(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function GE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ch={exports:{}},pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function jC(){if(k_)return pl;k_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(o,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:n,type:o,key:u,ref:r!==void 0?r:null,props:l}}return pl.Fragment=e,pl.jsx=t,pl.jsxs=t,pl}var q_;function eI(){return q_||(q_=1,Ch.exports=jC()),Ch.exports}var re=eI(),Ih={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function tI(){if(G_)return Ie;G_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function R(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,O={};function $(k,te,ue){this.props=k,this.context=te,this.refs=O,this.updater=ue||V}$.prototype.isReactComponent={},$.prototype.setState=function(k,te){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,te,"setState")},$.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function oe(){}oe.prototype=$.prototype;function Q(k,te,ue){this.props=k,this.context=te,this.refs=O,this.updater=ue||V}var se=Q.prototype=new oe;se.constructor=Q,G(se,$.prototype),se.isPureReactComponent=!0;var X=Array.isArray;function fe(){}var b={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function N(k,te,ue){var pe=ue.ref;return{$$typeof:n,type:k,key:te,ref:pe!==void 0?pe:null,props:ue}}function U(k,te){return N(k.type,te,k.props)}function P(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function q(k){var te={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ue){return te[ue]})}var D=/\/+/g;function Me(k,te){return typeof k=="object"&&k!==null&&k.key!=null?q(""+k.key):te.toString(36)}function ot(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(fe,fe):(k.status="pending",k.then(function(te){k.status==="pending"&&(k.status="fulfilled",k.value=te)},function(te){k.status==="pending"&&(k.status="rejected",k.reason=te)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function W(k,te,ue,pe,Se){var be=typeof k;(be==="undefined"||be==="boolean")&&(k=null);var Ge=!1;if(k===null)Ge=!0;else switch(be){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(k.$$typeof){case n:case e:Ge=!0;break;case v:return Ge=k._init,W(Ge(k._payload),te,ue,pe,Se)}}if(Ge)return Se=Se(k),Ge=pe===""?"."+Me(k,0):pe,X(Se)?(ue="",Ge!=null&&(ue=Ge.replace(D,"$&/")+"/"),W(Se,te,ue,"",function(es){return es})):Se!=null&&(P(Se)&&(Se=U(Se,ue+(Se.key==null||k&&k.key===Se.key?"":(""+Se.key).replace(D,"$&/")+"/")+Ge)),te.push(Se)),1;Ge=0;var xt=pe===""?".":pe+":";if(X(k))for(var ut=0;ut<k.length;ut++)pe=k[ut],be=xt+Me(pe,ut),Ge+=W(pe,te,ue,be,Se);else if(ut=R(k),typeof ut=="function")for(k=ut.call(k),ut=0;!(pe=k.next()).done;)pe=pe.value,be=xt+Me(pe,ut++),Ge+=W(pe,te,ue,be,Se);else if(be==="object"){if(typeof k.then=="function")return W(ot(k),te,ue,pe,Se);throw te=String(k),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function le(k,te,ue){if(k==null)return k;var pe=[],Se=0;return W(k,pe,"","",function(be){return te.call(ue,be,Se++)}),pe}function ge(k){if(k._status===-1){var te=k._result;te=te(),te.then(function(ue){(k._status===0||k._status===-1)&&(k._status=1,k._result=ue)},function(ue){(k._status===0||k._status===-1)&&(k._status=2,k._result=ue)}),k._status===-1&&(k._status=0,k._result=te)}if(k._status===1)return k._result.default;throw k._result}var xe=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},$e={map:le,forEach:function(k,te,ue){le(k,function(){te.apply(this,arguments)},ue)},count:function(k){var te=0;return le(k,function(){te++}),te},toArray:function(k){return le(k,function(te){return te})||[]},only:function(k){if(!P(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Ie.Activity=E,Ie.Children=$e,Ie.Component=$,Ie.Fragment=t,Ie.Profiler=r,Ie.PureComponent=Q,Ie.StrictMode=o,Ie.Suspense=g,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=b,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(k){return b.H.useMemoCache(k)}},Ie.cache=function(k){return function(){return k.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(k,te,ue){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var pe=G({},k.props),Se=k.key;if(te!=null)for(be in te.key!==void 0&&(Se=""+te.key),te)!M.call(te,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&te.ref===void 0||(pe[be]=te[be]);var be=arguments.length-2;if(be===1)pe.children=ue;else if(1<be){for(var Ge=Array(be),xt=0;xt<be;xt++)Ge[xt]=arguments[xt+2];pe.children=Ge}return N(k.type,Se,pe)},Ie.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Ie.createElement=function(k,te,ue){var pe,Se={},be=null;if(te!=null)for(pe in te.key!==void 0&&(be=""+te.key),te)M.call(te,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Se[pe]=te[pe]);var Ge=arguments.length-2;if(Ge===1)Se.children=ue;else if(1<Ge){for(var xt=Array(Ge),ut=0;ut<Ge;ut++)xt[ut]=arguments[ut+2];Se.children=xt}if(k&&k.defaultProps)for(pe in Ge=k.defaultProps,Ge)Se[pe]===void 0&&(Se[pe]=Ge[pe]);return N(k,be,Se)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(k){return{$$typeof:d,render:k}},Ie.isValidElement=P,Ie.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:ge}},Ie.memo=function(k,te){return{$$typeof:m,type:k,compare:te===void 0?null:te}},Ie.startTransition=function(k){var te=b.T,ue={};b.T=ue;try{var pe=k(),Se=b.S;Se!==null&&Se(ue,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(fe,xe)}catch(be){xe(be)}finally{te!==null&&ue.types!==null&&(te.types=ue.types),b.T=te}},Ie.unstable_useCacheRefresh=function(){return b.H.useCacheRefresh()},Ie.use=function(k){return b.H.use(k)},Ie.useActionState=function(k,te,ue){return b.H.useActionState(k,te,ue)},Ie.useCallback=function(k,te){return b.H.useCallback(k,te)},Ie.useContext=function(k){return b.H.useContext(k)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(k,te){return b.H.useDeferredValue(k,te)},Ie.useEffect=function(k,te){return b.H.useEffect(k,te)},Ie.useEffectEvent=function(k){return b.H.useEffectEvent(k)},Ie.useId=function(){return b.H.useId()},Ie.useImperativeHandle=function(k,te,ue){return b.H.useImperativeHandle(k,te,ue)},Ie.useInsertionEffect=function(k,te){return b.H.useInsertionEffect(k,te)},Ie.useLayoutEffect=function(k,te){return b.H.useLayoutEffect(k,te)},Ie.useMemo=function(k,te){return b.H.useMemo(k,te)},Ie.useOptimistic=function(k,te){return b.H.useOptimistic(k,te)},Ie.useReducer=function(k,te,ue){return b.H.useReducer(k,te,ue)},Ie.useRef=function(k){return b.H.useRef(k)},Ie.useState=function(k){return b.H.useState(k)},Ie.useSyncExternalStore=function(k,te,ue){return b.H.useSyncExternalStore(k,te,ue)},Ie.useTransition=function(){return b.H.useTransition()},Ie.version="19.2.4",Ie}var B_;function Rp(){return B_||(B_=1,Ih.exports=tI()),Ih.exports}var Qt=Rp();const nI=GE(Qt);var Rh={exports:{}},ml={},wh={exports:{}},Nh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function iI(){return F_||(F_=1,(function(n){function e(W,le){var ge=W.length;W.push(le);e:for(;0<ge;){var xe=ge-1>>>1,$e=W[xe];if(0<r($e,le))W[xe]=le,W[ge]=$e,ge=xe;else break e}}function t(W){return W.length===0?null:W[0]}function o(W){if(W.length===0)return null;var le=W[0],ge=W.pop();if(ge!==le){W[0]=ge;e:for(var xe=0,$e=W.length,k=$e>>>1;xe<k;){var te=2*(xe+1)-1,ue=W[te],pe=te+1,Se=W[pe];if(0>r(ue,ge))pe<$e&&0>r(Se,ue)?(W[xe]=Se,W[pe]=ge,xe=pe):(W[xe]=ue,W[te]=ge,xe=te);else if(pe<$e&&0>r(Se,ge))W[xe]=Se,W[pe]=ge,xe=pe;else break e}}return le}function r(W,le){var ge=W.sortIndex-le.sortIndex;return ge!==0?ge:W.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var g=[],m=[],v=1,E=null,S=3,R=!1,V=!1,G=!1,O=!1,$=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function se(W){for(var le=t(m);le!==null;){if(le.callback===null)o(m);else if(le.startTime<=W)o(m),le.sortIndex=le.expirationTime,e(g,le);else break;le=t(m)}}function X(W){if(G=!1,se(W),!V)if(t(g)!==null)V=!0,fe||(fe=!0,q());else{var le=t(m);le!==null&&ot(X,le.startTime-W)}}var fe=!1,b=-1,M=5,N=-1;function U(){return O?!0:!(n.unstable_now()-N<M)}function P(){if(O=!1,fe){var W=n.unstable_now();N=W;var le=!0;try{e:{V=!1,G&&(G=!1,oe(b),b=-1),R=!0;var ge=S;try{t:{for(se(W),E=t(g);E!==null&&!(E.expirationTime>W&&U());){var xe=E.callback;if(typeof xe=="function"){E.callback=null,S=E.priorityLevel;var $e=xe(E.expirationTime<=W);if(W=n.unstable_now(),typeof $e=="function"){E.callback=$e,se(W),le=!0;break t}E===t(g)&&o(g),se(W)}else o(g);E=t(g)}if(E!==null)le=!0;else{var k=t(m);k!==null&&ot(X,k.startTime-W),le=!1}}break e}finally{E=null,S=ge,R=!1}le=void 0}}finally{le?q():fe=!1}}}var q;if(typeof Q=="function")q=function(){Q(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Me=D.port2;D.port1.onmessage=P,q=function(){Me.postMessage(null)}}else q=function(){$(P,0)};function ot(W,le){b=$(function(){W(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(W){switch(S){case 1:case 2:case 3:var le=3;break;default:le=S}var ge=S;S=le;try{return W()}finally{S=ge}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(W,le){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ge=S;S=W;try{return le()}finally{S=ge}},n.unstable_scheduleCallback=function(W,le,ge){var xe=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?xe+ge:xe):ge=xe,W){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=ge+$e,W={id:v++,callback:le,priorityLevel:W,startTime:ge,expirationTime:$e,sortIndex:-1},ge>xe?(W.sortIndex=ge,e(m,W),t(g)===null&&W===t(m)&&(G?(oe(b),b=-1):G=!0,ot(X,ge-xe))):(W.sortIndex=$e,e(g,W),V||R||(V=!0,fe||(fe=!0,q()))),W},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(W){var le=S;return function(){var ge=S;S=le;try{return W.apply(this,arguments)}finally{S=ge}}}})(Nh)),Nh}var H_;function oI(){return H_||(H_=1,wh.exports=iI()),wh.exports}var Mh={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function sI(){if(z_)return Zt;z_=1;var n=Rp();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var o={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:g,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Zt.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,v)},Zt.flushSync=function(g){var m=u.T,v=o.p;try{if(u.T=null,o.p=2,g)return g()}finally{u.T=m,o.p=v,o.d.f()}},Zt.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(g,m))},Zt.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},Zt.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,R=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:R}):v==="script"&&o.d.X(g,{crossOrigin:E,integrity:S,fetchPriority:R,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Zt.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);o.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(g)},Zt.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin);o.d.L(g,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Zt.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=d(m.as,m.crossOrigin);o.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(g)},Zt.requestFormReset=function(g){o.d.r(g)},Zt.unstable_batchedUpdates=function(g,m){return g(m)},Zt.useFormState=function(g,m,v){return u.H.useFormState(g,m,v)},Zt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Zt.version="19.2.4",Zt}var Y_;function rI(){if(Y_)return Mh.exports;Y_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mh.exports=sI(),Mh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function aI(){if(J_)return ml;J_=1;var n=oI(),e=Rp(),t=rI();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(o(188))}function m(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(o(188));return s!==i?null:i}for(var a=i,c=s;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return g(y),i;if(_===c)return g(y),s;_=_.sibling}throw Error(o(188))}if(a.return!==c.return)a=y,c=_;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,c=_;break}if(I===c){A=!0,c=y,a=_;break}I=I.sibling}if(!A){for(I=_.child;I;){if(I===a){A=!0,a=_,c=y;break}if(I===c){A=!0,c=_,a=y;break}I=I.sibling}if(!A)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:s}function v(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=v(i),s!==null)return s;i=i.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),oe=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function Me(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case G:return"Fragment";case $:return"Profiler";case O:return"StrictMode";case X:return"Suspense";case fe:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case V:return"Portal";case Q:return i.displayName||"Context";case oe:return(i._context.displayName||"Context")+".Consumer";case se:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case b:return s=i.displayName||null,s!==null?s:Me(i.type)||"Memo";case M:s=i._payload,i=i._init;try{return Me(i(s))}catch{}}return null}var ot=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},xe=[],$e=-1;function k(i){return{current:i}}function te(i){0>$e||(i.current=xe[$e],xe[$e]=null,$e--)}function ue(i,s){$e++,xe[$e]=i.current,i.current=s}var pe=k(null),Se=k(null),be=k(null),Ge=k(null);function xt(i,s){switch(ue(be,s),ue(Se,i),ue(pe,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?a_(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=a_(s),i=l_(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}te(pe),ue(pe,i)}function ut(){te(pe),te(Se),te(be)}function es(i){i.memoizedState!==null&&ue(Ge,i);var s=pe.current,a=l_(s,i.type);s!==a&&(ue(Se,i),ue(pe,a))}function Js(i){Se.current===i&&(te(pe),te(Se)),Ge.current===i&&(te(Ge),cl._currentValue=ge)}var Ks,Qs;function li(i){if(Ks===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Ks=s&&s[1]||"",Qs=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ks+i+Qs}var ca=!1;function ts(i,s){if(!i||ca)return"";ca=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var Y=K}Reflect.construct(i,[],ee)}else{try{ee.call()}catch(K){Y=K}i.call(ee.prototype)}}else{try{throw Error()}catch(K){Y=K}(ee=i())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],I=_[1];if(A&&I){var x=A.split(`
`),z=I.split(`
`);for(y=c=0;c<x.length&&!x[c].includes("DetermineComponentFrameRoot");)c++;for(;y<z.length&&!z[y].includes("DetermineComponentFrameRoot");)y++;if(c===x.length||y===z.length)for(c=x.length-1,y=z.length-1;1<=c&&0<=y&&x[c]!==z[y];)y--;for(;1<=c&&0<=y;c--,y--)if(x[c]!==z[y]){if(c!==1||y!==1)do if(c--,y--,0>y||x[c]!==z[y]){var Z=`
`+x[c].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=c&&0<=y);break}}}finally{ca=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?li(a):""}function fa(i,s){switch(i.tag){case 26:case 27:case 5:return li(i.type);case 16:return li("Lazy");case 13:return i.child!==s&&s!==null?li("Suspense Fallback"):li("Suspense");case 19:return li("SuspenseList");case 0:case 15:return ts(i.type,!1);case 11:return ts(i.type.render,!1);case 1:return ts(i.type,!0);case 31:return li("Activity");default:return""}}function da(i){try{var s="",a=null;do s+=fa(i,a),a=i,i=i.return;while(i);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Tt=Object.prototype.hasOwnProperty,Vt=n.unstable_scheduleCallback,lo=n.unstable_cancelCallback,Rf=n.unstable_shouldYield,Yl=n.unstable_requestPaint,on=n.unstable_now,ns=n.unstable_getCurrentPriorityLevel,ha=n.unstable_ImmediatePriority,pa=n.unstable_UserBlockingPriority,uo=n.unstable_NormalPriority,wf=n.unstable_LowPriority,Jl=n.unstable_IdlePriority,Kl=n.log,Ql=n.unstable_setDisableYieldValue,Hn=null,Ft=null;function Rn(i){if(typeof Kl=="function"&&Ql(i),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Hn,i)}catch{}}var mt=Math.clz32?Math.clz32:Xl,$l=Math.log,$s=Math.LN2;function Xl(i){return i>>>=0,i===0?32:31-($l(i)/$s|0)|0}var ui=256,is=262144,Et=4194304;function ci(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function fi(i,s,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var I=c&134217727;return I!==0?(c=I&~_,c!==0?y=ci(c):(A&=I,A!==0?y=ci(A):a||(a=I&~i,a!==0&&(y=ci(a))))):(I=c&~_,I!==0?y=ci(I):A!==0?y=ci(A):a||(a=c&~i,a!==0&&(y=ci(a)))),y===0?0:s!==0&&s!==y&&(s&_)===0&&(_=y&-y,a=s&-s,_>=a||_===32&&(a&4194048)!==0)?s:y}function zn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Nf(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wl(){var i=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),i}function di(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function os(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Mf(i,s,a,c,y,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,x=i.expirationTimes,z=i.hiddenUpdates;for(a=A&~a;0<a;){var Z=31-mt(a),ee=1<<Z;I[Z]=0,x[Z]=-1;var Y=z[Z];if(Y!==null)for(z[Z]=null,Z=0;Z<Y.length;Z++){var K=Y[Z];K!==null&&(K.lane&=-536870913)}a&=~ee}c!==0&&ss(i,c,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~s))}function ss(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-mt(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function ma(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var c=31-mt(a),y=1<<c;y&s|i[c]&s&&(i[c]|=s),a&=~y}}function ga(i,s){var a=s&-s;return a=(a&42)!==0?1:rs(a),(a&(i.suspendedLanes|s))!==0?0:a}function rs(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Oi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Zl(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:D_(i.type))}function Yn(i,s){var a=le.p;try{return le.p=i,s()}finally{le.p=a}}var Jn=Math.random().toString(36).slice(2),St="__reactFiber$"+Jn,Ot="__reactProps$"+Jn,hi="__reactContainer$"+Jn,Xs="__reactEvents$"+Jn,bf="__reactListeners$"+Jn,jl="__reactHandles$"+Jn,eu="__reactResources$"+Jn,pi="__reactMarker$"+Jn;function Ws(i){delete i[St],delete i[Ot],delete i[Xs],delete i[bf],delete i[jl]}function mi(i){var s=i[St];if(s)return s;for(var a=i.parentNode;a;){if(s=a[hi]||a[St]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=m_(i);i!==null;){if(a=i[St])return a;i=m_(i)}return s}i=a,a=i.parentNode}return null}function wn(i){if(i=i[St]||i[hi]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function yn(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function gi(i){var s=i[eu];return s||(s=i[eu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function At(i){i[pi]=!0}var ya=new Set,_a={};function yi(i,s){_i(i,s),_i(i+"Capture",s)}function _i(i,s){for(_a[i]=s,i=0;i<s.length;i++)ya.add(s[i])}var va=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ta={},Ea={};function tu(i){return Tt.call(Ea,i)?!0:Tt.call(Ta,i)?!1:va.test(i)?Ea[i]=!0:(Ta[i]=!0,!1)}function Zs(i,s,a){if(tu(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function _n(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function Ct(i,s,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+c)}}function kt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function co(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Sa(i,s,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,s,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Xe(i){if(!i._valueTracker){var s=co(i)?"checked":"value";i._valueTracker=Sa(i,s,""+i[s])}}function as(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return i&&(c=co(i)?i.checked?"true":"false":i.value),i=c,i!==a?(s.setValue(i),!0):!1}function vi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ls=/[\n"\\]/g;function un(i){return i.replace(ls,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function js(i,s,a,c,y,_,A,I){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+kt(s)):i.value!==""+kt(s)&&(i.value=""+kt(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?Aa(i,A,kt(s)):a!=null?Aa(i,A,kt(a)):c!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+kt(I):i.removeAttribute("name")}function nu(i,s,a,c,y,_,A,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),s!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){Xe(i);return}a=a!=null?""+kt(a):"",s=s!=null?""+kt(s):a,I||s===i.value||(i.value=s),i.defaultValue=s}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=I?i.checked:!!c,i.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Xe(i)}function Aa(i,s,a){s==="number"&&vi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function fo(i,s,a,c){if(i=i.options,s){s={};for(var y=0;y<a.length;y++)s["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=s.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+kt(a),s=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}s!==null||i[y].disabled||(s=i[y])}s!==null&&(s.selected=!0)}}function iu(i,s,a){if(s!=null&&(s=""+kt(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+kt(a):""}function ho(i,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(o(92));if(ot(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=kt(s),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),Xe(i)}function cn(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var ou=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ca(i,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,a):typeof a!="number"||a===0||ou.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function Ia(i,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in s)c=s[y],s.hasOwnProperty(y)&&a[y]!==c&&Ca(i,y,c)}else for(var _ in s)s.hasOwnProperty(_)&&Ca(i,_,s[_])}function er(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var su=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),po=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tr(i){return po.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Kn(){}var Ra=null;function Nn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var mo=null,Ti=null;function us(i){var s=wn(i);if(s&&(i=s.stateNode)){var a=i[Ot]||null;e:switch(i=s.stateNode,s.type){case"input":if(js(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+un(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==i&&c.form===i.form){var y=c[Ot]||null;if(!y)throw Error(o(90));js(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===i.form&&as(c)}break e;case"textarea":iu(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&fo(i,!!a.multiple,s,!1)}}}var nr=!1;function go(i,s,a){if(nr)return i(s,a);nr=!0;try{var c=i(s);return c}finally{if(nr=!1,(mo!==null||Ti!==null)&&(Zu(),mo&&(s=mo,i=Ti,Ti=mo=null,us(s),i)))for(s=0;s<i.length;s++)us(i[s])}}function Qn(i,s){var a=i.stateNode;if(a===null)return null;var c=a[Ot]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cs=!1;if(Mn)try{var je={};Object.defineProperty(je,"passive",{get:function(){cs=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch{cs=!1}var Ei=null,wa=null,fs=null;function Na(){if(fs)return fs;var i,s=wa,a=s.length,c,y="value"in Ei?Ei.value:Ei.textContent,_=y.length;for(i=0;i<a&&s[i]===y[i];i++);var A=a-i;for(c=1;c<=A&&s[a-c]===y[_-c];c++);return fs=y.slice(i,1<c?1-c:void 0)}function ds(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function ki(){return!0}function $n(){return!1}function Ht(i){function s(a,c,y,_,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ki:$n,this.isPropagationStopped=$n,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),s}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=Ht(qi),yo=E({},qi,{view:0,detail:0}),Ma=Ht(yo),_o,ir,Ai,or=E({},yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ai&&(Ai&&i.type==="mousemove"?(_o=i.screenX-Ai.screenX,ir=i.screenY-Ai.screenY):ir=_o=0,Ai=i),_o)},movementY:function(i){return"movementY"in i?i.movementY:ir}}),ba=Ht(or),hs=E({},or,{dataTransfer:0}),ru=Ht(hs),au=E({},yo,{relatedTarget:0}),ps=Ht(au),Da=E({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),lu=Ht(Da),sr=E({},qi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),uu=Ht(sr),cu=E({},qi,{data:0}),Ci=Ht(cu),fu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=hu[i])?!!s[i]:!1}function vo(){return pu}var sn=E({},yo,{key:function(i){if(i.key){var s=fu[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ds(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?du[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vo,charCode:function(i){return i.type==="keypress"?ds(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ds(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),mu=Ht(sn),gu=E({},or,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gi=Ht(gu),p=E({},yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vo}),T=Ht(p),C=E({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Ht(C),F=E({},or,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),J=Ht(F),ae=E({},qi,{newState:0,oldState:0}),we=Ht(ae),gt=[9,13,27,32],Je=Mn&&"CompositionEvent"in window,ct=null;Mn&&"documentMode"in document&&(ct=document.documentMode);var bn=Mn&&"TextEvent"in window&&!ct,Ii=Mn&&(!Je||ct&&8<ct&&11>=ct),Xn=" ",Wn=!1;function ms(i,s){switch(i){case"keyup":return gt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rr(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ar=!1;function AA(i,s){switch(i){case"compositionend":return rr(s);case"keypress":return s.which!==32?null:(Wn=!0,Xn);case"textInput":return i=s.data,i===Xn&&Wn?null:i;default:return null}}function CA(i,s){if(ar)return i==="compositionend"||!Je&&ms(i,s)?(i=Na(),fs=wa=Ei=null,ar=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ii&&s.locale!=="ko"?null:s.data;default:return null}}var IA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _m(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!IA[i.type]:s==="textarea"}function vm(i,s,a,c){mo?Ti?Ti.push(c):Ti=[c]:mo=c,s=sc(s,"onChange"),0<s.length&&(a=new Si("onChange","change",null,a,c),i.push({event:a,listeners:s}))}var xa=null,Va=null;function RA(i){t_(i,0)}function yu(i){var s=yn(i);if(as(s))return i}function Tm(i,s){if(i==="change")return s}var Em=!1;if(Mn){var Df;if(Mn){var xf="oninput"in document;if(!xf){var Sm=document.createElement("div");Sm.setAttribute("oninput","return;"),xf=typeof Sm.oninput=="function"}Df=xf}else Df=!1;Em=Df&&(!document.documentMode||9<document.documentMode)}function Am(){xa&&(xa.detachEvent("onpropertychange",Cm),Va=xa=null)}function Cm(i){if(i.propertyName==="value"&&yu(Va)){var s=[];vm(s,Va,i,Nn(i)),go(RA,s)}}function wA(i,s,a){i==="focusin"?(Am(),xa=s,Va=a,xa.attachEvent("onpropertychange",Cm)):i==="focusout"&&Am()}function NA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return yu(Va)}function MA(i,s){if(i==="click")return yu(s)}function bA(i,s){if(i==="input"||i==="change")return yu(s)}function DA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var vn=typeof Object.is=="function"?Object.is:DA;function Pa(i,s){if(vn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!Tt.call(s,y)||!vn(i[y],s[y]))return!1}return!0}function Im(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Rm(i,s){var a=Im(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=s&&c>=s)return{node:a,offset:s-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Im(a)}}function wm(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?wm(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Nm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=vi(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=vi(i.document)}return s}function Vf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var xA=Mn&&"documentMode"in document&&11>=document.documentMode,lr=null,Pf=null,Ua=null,Uf=!1;function Mm(i,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Uf||lr==null||lr!==vi(c)||(c=lr,"selectionStart"in c&&Vf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ua&&Pa(Ua,c)||(Ua=c,c=sc(Pf,"onSelect"),0<c.length&&(s=new Si("onSelect","select",null,s,a),i.push({event:s,listeners:c}),s.target=lr)))}function gs(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var ur={animationend:gs("Animation","AnimationEnd"),animationiteration:gs("Animation","AnimationIteration"),animationstart:gs("Animation","AnimationStart"),transitionrun:gs("Transition","TransitionRun"),transitionstart:gs("Transition","TransitionStart"),transitioncancel:gs("Transition","TransitionCancel"),transitionend:gs("Transition","TransitionEnd")},Lf={},bm={};Mn&&(bm=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);function ys(i){if(Lf[i])return Lf[i];if(!ur[i])return i;var s=ur[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in bm)return Lf[i]=s[a];return i}var Dm=ys("animationend"),xm=ys("animationiteration"),Vm=ys("animationstart"),VA=ys("transitionrun"),PA=ys("transitionstart"),UA=ys("transitioncancel"),Pm=ys("transitionend"),Um=new Map,Of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Of.push("scrollEnd");function Zn(i,s){Um.set(i,s),yi(s,[i])}var _u=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Dn=[],cr=0,kf=0;function vu(){for(var i=cr,s=kf=cr=0;s<i;){var a=Dn[s];Dn[s++]=null;var c=Dn[s];Dn[s++]=null;var y=Dn[s];Dn[s++]=null;var _=Dn[s];if(Dn[s++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&Lm(a,y,_)}}function Tu(i,s,a,c){Dn[cr++]=i,Dn[cr++]=s,Dn[cr++]=a,Dn[cr++]=c,kf|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function qf(i,s,a,c){return Tu(i,s,a,c),Eu(i)}function _s(i,s){return Tu(i,null,null,s),Eu(i)}function Lm(i,s,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,c=_.alternate,c!==null&&(c.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&s!==null&&(y=31-mt(a),i=_.hiddenUpdates,c=i[y],c===null?i[y]=[s]:c.push(s),s.lane=a|536870912),_):null}function Eu(i){if(50<il)throw il=0,Qd=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var fr={};function LA(i,s,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(i,s,a,c){return new LA(i,s,a,c)}function Gf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Bi(i,s){var a=i.alternate;return a===null?(a=Tn(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Om(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Su(i,s,a,c,y,_){var A=0;if(c=i,typeof i=="function")Gf(i)&&(A=1);else if(typeof i=="string")A=BC(i,a,pe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=Tn(31,a,s,y),i.elementType=N,i.lanes=_,i;case G:return vs(a.children,y,_,s);case O:A=8,y|=24;break;case $:return i=Tn(12,a,s,y|2),i.elementType=$,i.lanes=_,i;case X:return i=Tn(13,a,s,y),i.elementType=X,i.lanes=_,i;case fe:return i=Tn(19,a,s,y),i.elementType=fe,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Q:A=10;break e;case oe:A=9;break e;case se:A=11;break e;case b:A=14;break e;case M:A=16,c=null;break e}A=29,a=Error(o(130,i===null?"null":typeof i,"")),c=null}return s=Tn(A,a,s,y),s.elementType=i,s.type=c,s.lanes=_,s}function vs(i,s,a,c){return i=Tn(7,i,c,s),i.lanes=a,i}function Bf(i,s,a){return i=Tn(6,i,null,s),i.lanes=a,i}function km(i){var s=Tn(18,null,null,0);return s.stateNode=i,s}function Ff(i,s,a){return s=Tn(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var qm=new WeakMap;function xn(i,s){if(typeof i=="object"&&i!==null){var a=qm.get(i);return a!==void 0?a:(s={value:i,source:s,stack:da(s)},qm.set(i,s),s)}return{value:i,source:s,stack:da(s)}}var dr=[],hr=0,Au=null,La=0,Vn=[],Pn=0,To=null,Ri=1,wi="";function Fi(i,s){dr[hr++]=La,dr[hr++]=Au,Au=i,La=s}function Gm(i,s,a){Vn[Pn++]=Ri,Vn[Pn++]=wi,Vn[Pn++]=To,To=i;var c=Ri;i=wi;var y=32-mt(c)-1;c&=~(1<<y),a+=1;var _=32-mt(s)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Ri=1<<32-mt(s)+y|a<<y|c,wi=_+i}else Ri=1<<_|a<<y|c,wi=i}function Hf(i){i.return!==null&&(Fi(i,1),Gm(i,1,0))}function zf(i){for(;i===Au;)Au=dr[--hr],dr[hr]=null,La=dr[--hr],dr[hr]=null;for(;i===To;)To=Vn[--Pn],Vn[Pn]=null,wi=Vn[--Pn],Vn[Pn]=null,Ri=Vn[--Pn],Vn[Pn]=null}function Bm(i,s){Vn[Pn++]=Ri,Vn[Pn++]=wi,Vn[Pn++]=To,Ri=s.id,wi=s.overflow,To=i}var zt=null,rt=null,qe=!1,Eo=null,Un=!1,Yf=Error(o(519));function So(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oa(xn(s,i)),Yf}function Fm(i){var s=i.stateNode,a=i.type,c=i.memoizedProps;switch(s[St]=i,s[Ot]=c,a){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(a=0;a<sl.length;a++)Pe(sl[a],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Pe("invalid",s),nu(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Pe("invalid",s);break;case"textarea":Pe("invalid",s),ho(s,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||s_(s.textContent,a)?(c.popover!=null&&(Pe("beforetoggle",s),Pe("toggle",s)),c.onScroll!=null&&Pe("scroll",s),c.onScrollEnd!=null&&Pe("scrollend",s),c.onClick!=null&&(s.onclick=Kn),s=!0):s=!1,s||So(i,!0)}function Hm(i){for(zt=i.return;zt;)switch(zt.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:zt=zt.return}}function pr(i){if(i!==zt)return!1;if(!qe)return Hm(i),qe=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||uh(i.type,i.memoizedProps)),a=!a),a&&rt&&So(i),Hm(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));rt=p_(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));rt=p_(i)}else s===27?(s=rt,Lo(i.type)?(i=ph,ph=null,rt=i):rt=s):rt=zt?On(i.stateNode.nextSibling):null;return!0}function Ts(){rt=zt=null,qe=!1}function Jf(){var i=Eo;return i!==null&&(pn===null?pn=i:pn.push.apply(pn,i),Eo=null),i}function Oa(i){Eo===null?Eo=[i]:Eo.push(i)}var Kf=k(null),Es=null,Hi=null;function Ao(i,s,a){ue(Kf,s._currentValue),s._currentValue=a}function zi(i){i._currentValue=Kf.current,te(Kf)}function Qf(i,s,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===a)break;i=i.return}}function $f(i,s,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var x=0;x<s.length;x++)if(I.context===s[x]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),Qf(_.return,a,i),c||(A=null);break e}_=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(o(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),Qf(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function mr(i,s,a,c){i=null;for(var y=s,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(o(387));if(A=A.memoizedProps,A!==null){var I=y.type;vn(y.pendingProps.value,A.value)||(i!==null?i.push(I):i=[I])}}else if(y===Ge.current){if(A=y.alternate,A===null)throw Error(o(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(cl):i=[cl])}y=y.return}i!==null&&$f(s,i,a,c),s.flags|=262144}function Cu(i){for(i=i.firstContext;i!==null;){if(!vn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ss(i){Es=i,Hi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Yt(i){return zm(Es,i)}function Iu(i,s){return Es===null&&Ss(i),zm(i,s)}function zm(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Hi===null){if(i===null)throw Error(o(308));Hi=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Hi=Hi.next=s;return a}var OA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},kA=n.unstable_scheduleCallback,qA=n.unstable_NormalPriority,It={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xf(){return{controller:new OA,data:new Map,refCount:0}}function ka(i){i.refCount--,i.refCount===0&&kA(qA,function(){i.controller.abort()})}var qa=null,Wf=0,gr=0,yr=null;function GA(i,s){if(qa===null){var a=qa=[];Wf=0,gr=eh(),yr={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Wf++,s.then(Ym,Ym),s}function Ym(){if(--Wf===0&&qa!==null){yr!==null&&(yr.status="fulfilled");var i=qa;qa=null,gr=0,yr=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function BA(i,s){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var y=0;y<a.length;y++)(0,a[y])(s)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var Jm=W.S;W.S=function(i,s){My=on(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&GA(i,s),Jm!==null&&Jm(i,s)};var As=k(null);function Zf(){var i=As.current;return i!==null?i:it.pooledCache}function Ru(i,s){s===null?ue(As,As.current):ue(As,s.pool)}function Km(){var i=Zf();return i===null?null:{parent:It._currentValue,pool:i}}var _r=Error(o(460)),jf=Error(o(474)),wu=Error(o(542)),Nu={then:function(){}};function Qm(i){return i=i.status,i==="fulfilled"||i==="rejected"}function $m(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(Kn,Kn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Wm(i),i;default:if(typeof s.status=="string")s.then(Kn,Kn);else{if(i=it,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=c}},function(c){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Wm(i),i}throw Is=s,_r}}function Cs(i){try{var s=i._init;return s(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Is=a,_r):a}}var Is=null;function Xm(){if(Is===null)throw Error(o(459));var i=Is;return Is=null,i}function Wm(i){if(i===_r||i===wu)throw Error(o(483))}var vr=null,Ga=0;function Mu(i){var s=Ga;return Ga+=1,vr===null&&(vr=[]),$m(vr,i,s)}function Ba(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function bu(i,s){throw s.$$typeof===S?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Zm(i){function s(B,L){if(i){var H=B.deletions;H===null?(B.deletions=[L],B.flags|=16):H.push(L)}}function a(B,L){if(!i)return null;for(;L!==null;)s(B,L),L=L.sibling;return null}function c(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function y(B,L){return B=Bi(B,L),B.index=0,B.sibling=null,B}function _(B,L,H){return B.index=H,i?(H=B.alternate,H!==null?(H=H.index,H<L?(B.flags|=67108866,L):H):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function A(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function I(B,L,H,j){return L===null||L.tag!==6?(L=Bf(H,B.mode,j),L.return=B,L):(L=y(L,H),L.return=B,L)}function x(B,L,H,j){var _e=H.type;return _e===G?Z(B,L,H.props.children,j,H.key):L!==null&&(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===M&&Cs(_e)===L.type)?(L=y(L,H.props),Ba(L,H),L.return=B,L):(L=Su(H.type,H.key,H.props,null,B.mode,j),Ba(L,H),L.return=B,L)}function z(B,L,H,j){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Ff(H,B.mode,j),L.return=B,L):(L=y(L,H.children||[]),L.return=B,L)}function Z(B,L,H,j,_e){return L===null||L.tag!==7?(L=vs(H,B.mode,j,_e),L.return=B,L):(L=y(L,H),L.return=B,L)}function ee(B,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Bf(""+L,B.mode,H),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case R:return H=Su(L.type,L.key,L.props,null,B.mode,H),Ba(H,L),H.return=B,H;case V:return L=Ff(L,B.mode,H),L.return=B,L;case M:return L=Cs(L),ee(B,L,H)}if(ot(L)||q(L))return L=vs(L,B.mode,H,null),L.return=B,L;if(typeof L.then=="function")return ee(B,Mu(L),H);if(L.$$typeof===Q)return ee(B,Iu(B,L),H);bu(B,L)}return null}function Y(B,L,H,j){var _e=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return _e!==null?null:I(B,L,""+H,j);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case R:return H.key===_e?x(B,L,H,j):null;case V:return H.key===_e?z(B,L,H,j):null;case M:return H=Cs(H),Y(B,L,H,j)}if(ot(H)||q(H))return _e!==null?null:Z(B,L,H,j,null);if(typeof H.then=="function")return Y(B,L,Mu(H),j);if(H.$$typeof===Q)return Y(B,L,Iu(B,H),j);bu(B,H)}return null}function K(B,L,H,j,_e){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return B=B.get(H)||null,I(L,B,""+j,_e);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case R:return B=B.get(j.key===null?H:j.key)||null,x(L,B,j,_e);case V:return B=B.get(j.key===null?H:j.key)||null,z(L,B,j,_e);case M:return j=Cs(j),K(B,L,H,j,_e)}if(ot(j)||q(j))return B=B.get(H)||null,Z(L,B,j,_e,null);if(typeof j.then=="function")return K(B,L,H,Mu(j),_e);if(j.$$typeof===Q)return K(B,L,H,Iu(L,j),_e);bu(L,j)}return null}function me(B,L,H,j){for(var _e=null,He=null,ye=L,De=L=0,Le=null;ye!==null&&De<H.length;De++){ye.index>De?(Le=ye,ye=null):Le=ye.sibling;var ze=Y(B,ye,H[De],j);if(ze===null){ye===null&&(ye=Le);break}i&&ye&&ze.alternate===null&&s(B,ye),L=_(ze,L,De),He===null?_e=ze:He.sibling=ze,He=ze,ye=Le}if(De===H.length)return a(B,ye),qe&&Fi(B,De),_e;if(ye===null){for(;De<H.length;De++)ye=ee(B,H[De],j),ye!==null&&(L=_(ye,L,De),He===null?_e=ye:He.sibling=ye,He=ye);return qe&&Fi(B,De),_e}for(ye=c(ye);De<H.length;De++)Le=K(ye,B,De,H[De],j),Le!==null&&(i&&Le.alternate!==null&&ye.delete(Le.key===null?De:Le.key),L=_(Le,L,De),He===null?_e=Le:He.sibling=Le,He=Le);return i&&ye.forEach(function(Bo){return s(B,Bo)}),qe&&Fi(B,De),_e}function Te(B,L,H,j){if(H==null)throw Error(o(151));for(var _e=null,He=null,ye=L,De=L=0,Le=null,ze=H.next();ye!==null&&!ze.done;De++,ze=H.next()){ye.index>De?(Le=ye,ye=null):Le=ye.sibling;var Bo=Y(B,ye,ze.value,j);if(Bo===null){ye===null&&(ye=Le);break}i&&ye&&Bo.alternate===null&&s(B,ye),L=_(Bo,L,De),He===null?_e=Bo:He.sibling=Bo,He=Bo,ye=Le}if(ze.done)return a(B,ye),qe&&Fi(B,De),_e;if(ye===null){for(;!ze.done;De++,ze=H.next())ze=ee(B,ze.value,j),ze!==null&&(L=_(ze,L,De),He===null?_e=ze:He.sibling=ze,He=ze);return qe&&Fi(B,De),_e}for(ye=c(ye);!ze.done;De++,ze=H.next())ze=K(ye,B,De,ze.value,j),ze!==null&&(i&&ze.alternate!==null&&ye.delete(ze.key===null?De:ze.key),L=_(ze,L,De),He===null?_e=ze:He.sibling=ze,He=ze);return i&&ye.forEach(function(ZC){return s(B,ZC)}),qe&&Fi(B,De),_e}function nt(B,L,H,j){if(typeof H=="object"&&H!==null&&H.type===G&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case R:e:{for(var _e=H.key;L!==null;){if(L.key===_e){if(_e=H.type,_e===G){if(L.tag===7){a(B,L.sibling),j=y(L,H.props.children),j.return=B,B=j;break e}}else if(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===M&&Cs(_e)===L.type){a(B,L.sibling),j=y(L,H.props),Ba(j,H),j.return=B,B=j;break e}a(B,L);break}else s(B,L);L=L.sibling}H.type===G?(j=vs(H.props.children,B.mode,j,H.key),j.return=B,B=j):(j=Su(H.type,H.key,H.props,null,B.mode,j),Ba(j,H),j.return=B,B=j)}return A(B);case V:e:{for(_e=H.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(B,L.sibling),j=y(L,H.children||[]),j.return=B,B=j;break e}else{a(B,L);break}else s(B,L);L=L.sibling}j=Ff(H,B.mode,j),j.return=B,B=j}return A(B);case M:return H=Cs(H),nt(B,L,H,j)}if(ot(H))return me(B,L,H,j);if(q(H)){if(_e=q(H),typeof _e!="function")throw Error(o(150));return H=_e.call(H),Te(B,L,H,j)}if(typeof H.then=="function")return nt(B,L,Mu(H),j);if(H.$$typeof===Q)return nt(B,L,Iu(B,H),j);bu(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(B,L.sibling),j=y(L,H),j.return=B,B=j):(a(B,L),j=Bf(H,B.mode,j),j.return=B,B=j),A(B)):a(B,L)}return function(B,L,H,j){try{Ga=0;var _e=nt(B,L,H,j);return vr=null,_e}catch(ye){if(ye===_r||ye===wu)throw ye;var He=Tn(29,ye,null,B.mode);return He.lanes=j,He.return=B,He}finally{}}}var Rs=Zm(!0),jm=Zm(!1),Co=!1;function ed(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function td(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Io(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ro(i,s,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Ke&2)!==0){var y=c.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),c.pending=s,s=Eu(i),Lm(i,null,a),s}return Tu(i,c,s,a),Eu(i)}function Fa(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,ma(i,a)}}function nd(i,s){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?y=_=s:_=_.next=s}else y=_=s;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var id=!1;function Ha(){if(id){var i=yr;if(i!==null)throw i}}function za(i,s,a,c){id=!1;var y=i.updateQueue;Co=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var x=I,z=x.next;x.next=null,A===null?_=z:A.next=z,A=x;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,I=Z.lastBaseUpdate,I!==A&&(I===null?Z.firstBaseUpdate=z:I.next=z,Z.lastBaseUpdate=x))}if(_!==null){var ee=y.baseState;A=0,Z=z=x=null,I=_;do{var Y=I.lane&-536870913,K=Y!==I.lane;if(K?(Ue&Y)===Y:(c&Y)===Y){Y!==0&&Y===gr&&(id=!0),Z!==null&&(Z=Z.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var me=i,Te=I;Y=s;var nt=a;switch(Te.tag){case 1:if(me=Te.payload,typeof me=="function"){ee=me.call(nt,ee,Y);break e}ee=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Te.payload,Y=typeof me=="function"?me.call(nt,ee,Y):me,Y==null)break e;ee=E({},ee,Y);break e;case 2:Co=!0}}Y=I.callback,Y!==null&&(i.flags|=64,K&&(i.flags|=8192),K=y.callbacks,K===null?y.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Z===null?(z=Z=K,x=ee):Z=Z.next=K,A|=Y;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;K=I,I=K.next,K.next=null,y.lastBaseUpdate=K,y.shared.pending=null}}while(!0);Z===null&&(x=ee),y.baseState=x,y.firstBaseUpdate=z,y.lastBaseUpdate=Z,_===null&&(y.shared.lanes=0),Do|=A,i.lanes=A,i.memoizedState=ee}}function eg(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function tg(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)eg(a[i],s)}var Tr=k(null),Du=k(0);function ng(i,s){i=ji,ue(Du,i),ue(Tr,s),ji=i|s.baseLanes}function od(){ue(Du,ji),ue(Tr,Tr.current)}function sd(){ji=Du.current,te(Tr),te(Du)}var En=k(null),Ln=null;function wo(i){var s=i.alternate;ue(yt,yt.current&1),ue(En,i),Ln===null&&(s===null||Tr.current!==null||s.memoizedState!==null)&&(Ln=i)}function rd(i){ue(yt,yt.current),ue(En,i),Ln===null&&(Ln=i)}function ig(i){i.tag===22?(ue(yt,yt.current),ue(En,i),Ln===null&&(Ln=i)):No()}function No(){ue(yt,yt.current),ue(En,En.current)}function Sn(i){te(En),Ln===i&&(Ln=null),te(yt)}var yt=k(0);function xu(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||dh(a)||hh(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Yi=0,Ne=null,et=null,Rt=null,Vu=!1,Er=!1,ws=!1,Pu=0,Ya=0,Sr=null,FA=0;function ht(){throw Error(o(321))}function ad(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!vn(i[a],s[a]))return!1;return!0}function ld(i,s,a,c,y,_){return Yi=_,Ne=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,W.H=i===null||i.memoizedState===null?Gg:Ad,ws=!1,_=a(c,y),ws=!1,Er&&(_=sg(s,a,c,y)),og(i),_}function og(i){W.H=Qa;var s=et!==null&&et.next!==null;if(Yi=0,Rt=et=Ne=null,Vu=!1,Ya=0,Sr=null,s)throw Error(o(300));i===null||wt||(i=i.dependencies,i!==null&&Cu(i)&&(wt=!0))}function sg(i,s,a,c){Ne=i;var y=0;do{if(Er&&(Sr=null),Ya=0,Er=!1,25<=y)throw Error(o(301));if(y+=1,Rt=et=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}W.H=Bg,_=s(a,c)}while(Er);return _}function HA(){var i=W.H,s=i.useState()[0];return s=typeof s.then=="function"?Ja(s):s,i=i.useState()[0],(et!==null?et.memoizedState:null)!==i&&(Ne.flags|=1024),s}function ud(){var i=Pu!==0;return Pu=0,i}function cd(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function fd(i){if(Vu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Vu=!1}Yi=0,Rt=et=Ne=null,Er=!1,Ya=Pu=0,Sr=null}function rn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Ne.memoizedState=Rt=i:Rt=Rt.next=i,Rt}function _t(){if(et===null){var i=Ne.alternate;i=i!==null?i.memoizedState:null}else i=et.next;var s=Rt===null?Ne.memoizedState:Rt.next;if(s!==null)Rt=s,et=i;else{if(i===null)throw Ne.alternate===null?Error(o(467)):Error(o(310));et=i,i={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Rt===null?Ne.memoizedState=Rt=i:Rt=Rt.next=i}return Rt}function Uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ja(i){var s=Ya;return Ya+=1,Sr===null&&(Sr=[]),i=$m(Sr,i,s),s=Ne,(Rt===null?s.memoizedState:Rt.next)===null&&(s=s.alternate,W.H=s===null||s.memoizedState===null?Gg:Ad),i}function Lu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ja(i);if(i.$$typeof===Q)return Yt(i)}throw Error(o(438,String(i)))}function dd(i){var s=null,a=Ne.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Uu(),Ne.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),c=0;c<i;c++)a[c]=U;return s.index++,a}function Ji(i,s){return typeof s=="function"?s(i):s}function Ou(i){var s=_t();return hd(s,et,i)}function hd(i,s,a){var c=i.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var y=i.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}s.baseQueue=y=_,c.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{s=y.next;var I=A=null,x=null,z=s,Z=!1;do{var ee=z.lane&-536870913;if(ee!==z.lane?(Ue&ee)===ee:(Yi&ee)===ee){var Y=z.revertLane;if(Y===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),ee===gr&&(Z=!0);else if((Yi&Y)===Y){z=z.next,Y===gr&&(Z=!0);continue}else ee={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(I=x=ee,A=_):x=x.next=ee,Ne.lanes|=Y,Do|=Y;ee=z.action,ws&&a(_,ee),_=z.hasEagerState?z.eagerState:a(_,ee)}else Y={lane:ee,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(I=x=Y,A=_):x=x.next=Y,Ne.lanes|=ee,Do|=ee;z=z.next}while(z!==null&&z!==s);if(x===null?A=_:x.next=I,!vn(_,i.memoizedState)&&(wt=!0,Z&&(a=yr,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=x,c.lastRenderedState=_}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function pd(i){var s=_t(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,_=s.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do _=i(_,A.action),A=A.next;while(A!==y);vn(_,s.memoizedState)||(wt=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),a.lastRenderedState=_}return[_,c]}function rg(i,s,a){var c=Ne,y=_t(),_=qe;if(_){if(a===void 0)throw Error(o(407));a=a()}else a=s();var A=!vn((et||y).memoizedState,a);if(A&&(y.memoizedState=a,wt=!0),y=y.queue,yd(ug.bind(null,c,y,i),[i]),y.getSnapshot!==s||A||Rt!==null&&Rt.memoizedState.tag&1){if(c.flags|=2048,Ar(9,{destroy:void 0},lg.bind(null,c,y,a,s),null),it===null)throw Error(o(349));_||(Yi&127)!==0||ag(c,s,a)}return a}function ag(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=Ne.updateQueue,s===null?(s=Uu(),Ne.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function lg(i,s,a,c){s.value=a,s.getSnapshot=c,cg(s)&&fg(i)}function ug(i,s,a){return a(function(){cg(s)&&fg(i)})}function cg(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!vn(i,a)}catch{return!0}}function fg(i){var s=_s(i,2);s!==null&&mn(s,i,2)}function md(i){var s=rn();if(typeof i=="function"){var a=i;if(i=a(),ws){Rn(!0);try{a()}finally{Rn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:i},s}function dg(i,s,a,c){return i.baseState=a,hd(i,et,typeof c=="function"?c:Ji)}function zA(i,s,a,c,y){if(Gu(i))throw Error(o(485));if(i=s.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};W.T!==null?a(!0):_.isTransition=!1,c(_),a=s.pending,a===null?(_.next=s.pending=_,hg(s,_)):(_.next=a.next,s.pending=a.next=_)}}function hg(i,s){var a=s.action,c=s.payload,y=i.state;if(s.isTransition){var _=W.T,A={};W.T=A;try{var I=a(y,c),x=W.S;x!==null&&x(A,I),pg(i,s,I)}catch(z){gd(i,s,z)}finally{_!==null&&A.types!==null&&(_.types=A.types),W.T=_}}else try{_=a(y,c),pg(i,s,_)}catch(z){gd(i,s,z)}}function pg(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){mg(i,s,c)},function(c){return gd(i,s,c)}):mg(i,s,a)}function mg(i,s,a){s.status="fulfilled",s.value=a,gg(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,hg(i,a)))}function gd(i,s,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,gg(s),s=s.next;while(s!==c)}i.action=null}function gg(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function yg(i,s){return s}function _g(i,s){if(qe){var a=it.formState;if(a!==null){e:{var c=Ne;if(qe){if(rt){t:{for(var y=rt,_=Un;y.nodeType!==8;){if(!_){y=null;break t}if(y=On(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){rt=On(y.nextSibling),c=y.data==="F!";break e}}So(c)}c=!1}c&&(s=a[0])}}return a=rn(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yg,lastRenderedState:s},a.queue=c,a=Og.bind(null,Ne,c),c.dispatch=a,c=md(!1),_=Sd.bind(null,Ne,!1,c.queue),c=rn(),y={state:s,dispatch:null,action:i,pending:null},c.queue=y,a=zA.bind(null,Ne,y,_,a),y.dispatch=a,c.memoizedState=i,[s,a,!1]}function vg(i){var s=_t();return Tg(s,et,i)}function Tg(i,s,a){if(s=hd(i,s,yg)[0],i=Ou(Ji)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Ja(s)}catch(A){throw A===_r?wu:A}else c=s;s=_t();var y=s.queue,_=y.dispatch;return a!==s.memoizedState&&(Ne.flags|=2048,Ar(9,{destroy:void 0},YA.bind(null,y,a),null)),[c,_,i]}function YA(i,s){i.action=s}function Eg(i){var s=_t(),a=et;if(a!==null)return Tg(s,a,i);_t(),s=s.memoizedState,a=_t();var c=a.queue.dispatch;return a.memoizedState=i,[s,c,!1]}function Ar(i,s,a,c){return i={tag:i,create:a,deps:c,inst:s,next:null},s=Ne.updateQueue,s===null&&(s=Uu(),Ne.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,s.lastEffect=i),i}function Sg(){return _t().memoizedState}function ku(i,s,a,c){var y=rn();Ne.flags|=i,y.memoizedState=Ar(1|s,{destroy:void 0},a,c===void 0?null:c)}function qu(i,s,a,c){var y=_t();c=c===void 0?null:c;var _=y.memoizedState.inst;et!==null&&c!==null&&ad(c,et.memoizedState.deps)?y.memoizedState=Ar(s,_,a,c):(Ne.flags|=i,y.memoizedState=Ar(1|s,_,a,c))}function Ag(i,s){ku(8390656,8,i,s)}function yd(i,s){qu(2048,8,i,s)}function JA(i){Ne.flags|=4;var s=Ne.updateQueue;if(s===null)s=Uu(),Ne.updateQueue=s,s.events=[i];else{var a=s.events;a===null?s.events=[i]:a.push(i)}}function Cg(i){var s=_t().memoizedState;return JA({ref:s,nextImpl:i}),function(){if((Ke&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Ig(i,s){return qu(4,2,i,s)}function Rg(i,s){return qu(4,4,i,s)}function wg(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Ng(i,s,a){a=a!=null?a.concat([i]):null,qu(4,4,wg.bind(null,s,i),a)}function _d(){}function Mg(i,s){var a=_t();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&ad(s,c[1])?c[0]:(a.memoizedState=[i,s],i)}function bg(i,s){var a=_t();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&ad(s,c[1]))return c[0];if(c=i(),ws){Rn(!0);try{i()}finally{Rn(!1)}}return a.memoizedState=[c,s],c}function vd(i,s,a){return a===void 0||(Yi&1073741824)!==0&&(Ue&261930)===0?i.memoizedState=s:(i.memoizedState=a,i=Dy(),Ne.lanes|=i,Do|=i,a)}function Dg(i,s,a,c){return vn(a,s)?a:Tr.current!==null?(i=vd(i,a,c),vn(i,s)||(wt=!0),i):(Yi&42)===0||(Yi&1073741824)!==0&&(Ue&261930)===0?(wt=!0,i.memoizedState=a):(i=Dy(),Ne.lanes|=i,Do|=i,s)}function xg(i,s,a,c,y){var _=le.p;le.p=_!==0&&8>_?_:8;var A=W.T,I={};W.T=I,Sd(i,!1,s,a);try{var x=y(),z=W.S;if(z!==null&&z(I,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var Z=BA(x,c);Ka(i,s,Z,In(i))}else Ka(i,s,c,In(i))}catch(ee){Ka(i,s,{then:function(){},status:"rejected",reason:ee},In())}finally{le.p=_,A!==null&&I.types!==null&&(A.types=I.types),W.T=A}}function KA(){}function Td(i,s,a,c){if(i.tag!==5)throw Error(o(476));var y=Vg(i).queue;xg(i,y,s,ge,a===null?KA:function(){return Pg(i),a(c)})}function Vg(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:ge},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Pg(i){var s=Vg(i);s.next===null&&(s=i.alternate.memoizedState),Ka(i,s.next.queue,{},In())}function Ed(){return Yt(cl)}function Ug(){return _t().memoizedState}function Lg(){return _t().memoizedState}function QA(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=In();i=Io(a);var c=Ro(s,i,a);c!==null&&(mn(c,s,a),Fa(c,s,a)),s={cache:Xf()},i.payload=s;return}s=s.return}}function $A(i,s,a){var c=In();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Gu(i)?kg(s,a):(a=qf(i,s,a,c),a!==null&&(mn(a,i,c),qg(a,s,c)))}function Og(i,s,a){var c=In();Ka(i,s,a,c)}function Ka(i,s,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Gu(i))kg(s,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var A=s.lastRenderedState,I=_(A,a);if(y.hasEagerState=!0,y.eagerState=I,vn(I,A))return Tu(i,s,y,0),it===null&&vu(),!1}catch{}finally{}if(a=qf(i,s,y,c),a!==null)return mn(a,i,c),qg(a,s,c),!0}return!1}function Sd(i,s,a,c){if(c={lane:2,revertLane:eh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Gu(i)){if(s)throw Error(o(479))}else s=qf(i,a,c,2),s!==null&&mn(s,i,2)}function Gu(i){var s=i.alternate;return i===Ne||s!==null&&s===Ne}function kg(i,s){Er=Vu=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function qg(i,s,a){if((a&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,ma(i,a)}}var Qa={readContext:Yt,use:Lu,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht};Qa.useEffectEvent=ht;var Gg={readContext:Yt,use:Lu,useCallback:function(i,s){return rn().memoizedState=[i,s===void 0?null:s],i},useContext:Yt,useEffect:Ag,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,ku(4194308,4,wg.bind(null,s,i),a)},useLayoutEffect:function(i,s){return ku(4194308,4,i,s)},useInsertionEffect:function(i,s){ku(4,2,i,s)},useMemo:function(i,s){var a=rn();s=s===void 0?null:s;var c=i();if(ws){Rn(!0);try{i()}finally{Rn(!1)}}return a.memoizedState=[c,s],c},useReducer:function(i,s,a){var c=rn();if(a!==void 0){var y=a(s);if(ws){Rn(!0);try{a(s)}finally{Rn(!1)}}}else y=s;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=$A.bind(null,Ne,i),[c.memoizedState,i]},useRef:function(i){var s=rn();return i={current:i},s.memoizedState=i},useState:function(i){i=md(i);var s=i.queue,a=Og.bind(null,Ne,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:_d,useDeferredValue:function(i,s){var a=rn();return vd(a,i,s)},useTransition:function(){var i=md(!1);return i=xg.bind(null,Ne,i.queue,!0,!1),rn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var c=Ne,y=rn();if(qe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),it===null)throw Error(o(349));(Ue&127)!==0||ag(c,s,a)}y.memoizedState=a;var _={value:a,getSnapshot:s};return y.queue=_,Ag(ug.bind(null,c,_,i),[i]),c.flags|=2048,Ar(9,{destroy:void 0},lg.bind(null,c,_,a,s),null),a},useId:function(){var i=rn(),s=it.identifierPrefix;if(qe){var a=wi,c=Ri;a=(c&~(1<<32-mt(c)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Pu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=FA++,s="_"+s+"r_"+a.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Ed,useFormState:_g,useActionState:_g,useOptimistic:function(i){var s=rn();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Sd.bind(null,Ne,!0,a),a.dispatch=s,[i,s]},useMemoCache:dd,useCacheRefresh:function(){return rn().memoizedState=QA.bind(null,Ne)},useEffectEvent:function(i){var s=rn(),a={impl:i};return s.memoizedState=a,function(){if((Ke&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Ad={readContext:Yt,use:Lu,useCallback:Mg,useContext:Yt,useEffect:yd,useImperativeHandle:Ng,useInsertionEffect:Ig,useLayoutEffect:Rg,useMemo:bg,useReducer:Ou,useRef:Sg,useState:function(){return Ou(Ji)},useDebugValue:_d,useDeferredValue:function(i,s){var a=_t();return Dg(a,et.memoizedState,i,s)},useTransition:function(){var i=Ou(Ji)[0],s=_t().memoizedState;return[typeof i=="boolean"?i:Ja(i),s]},useSyncExternalStore:rg,useId:Ug,useHostTransitionStatus:Ed,useFormState:vg,useActionState:vg,useOptimistic:function(i,s){var a=_t();return dg(a,et,i,s)},useMemoCache:dd,useCacheRefresh:Lg};Ad.useEffectEvent=Cg;var Bg={readContext:Yt,use:Lu,useCallback:Mg,useContext:Yt,useEffect:yd,useImperativeHandle:Ng,useInsertionEffect:Ig,useLayoutEffect:Rg,useMemo:bg,useReducer:pd,useRef:Sg,useState:function(){return pd(Ji)},useDebugValue:_d,useDeferredValue:function(i,s){var a=_t();return et===null?vd(a,i,s):Dg(a,et.memoizedState,i,s)},useTransition:function(){var i=pd(Ji)[0],s=_t().memoizedState;return[typeof i=="boolean"?i:Ja(i),s]},useSyncExternalStore:rg,useId:Ug,useHostTransitionStatus:Ed,useFormState:Eg,useActionState:Eg,useOptimistic:function(i,s){var a=_t();return et!==null?dg(a,et,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:dd,useCacheRefresh:Lg};Bg.useEffectEvent=Cg;function Cd(i,s,a,c){s=i.memoizedState,a=a(c,s),a=a==null?s:E({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Id={enqueueSetState:function(i,s,a){i=i._reactInternals;var c=In(),y=Io(c);y.payload=s,a!=null&&(y.callback=a),s=Ro(i,y,c),s!==null&&(mn(s,i,c),Fa(s,i,c))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var c=In(),y=Io(c);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=Ro(i,y,c),s!==null&&(mn(s,i,c),Fa(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=In(),c=Io(a);c.tag=2,s!=null&&(c.callback=s),s=Ro(i,c,a),s!==null&&(mn(s,i,a),Fa(s,i,a))}};function Fg(i,s,a,c,y,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,_,A):s.prototype&&s.prototype.isPureReactComponent?!Pa(a,c)||!Pa(y,_):!0}function Hg(i,s,a,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==i&&Id.enqueueReplaceState(s,s.state,null)}function Ns(i,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(i=i.defaultProps){a===s&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function zg(i){_u(i)}function Yg(i){console.error(i)}function Jg(i){_u(i)}function Bu(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Kg(i,s,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Rd(i,s,a){return a=Io(a),a.tag=3,a.payload={element:null},a.callback=function(){Bu(i,s)},a}function Qg(i){return i=Io(i),i.tag=3,i}function $g(i,s,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;i.payload=function(){return y(_)},i.callback=function(){Kg(s,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Kg(s,a,c),typeof y!="function"&&(xo===null?xo=new Set([this]):xo.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function XA(i,s,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&mr(s,a,y,!0),a=En.current,a!==null){switch(a.tag){case 31:case 13:return Ln===null?ju():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===Nu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),Wd(i,c,y)),!1;case 22:return a.flags|=65536,c===Nu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),Wd(i,c,y)),!1}throw Error(o(435,a.tag))}return Wd(i,c,y),ju(),!1}if(qe)return s=En.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,c!==Yf&&(i=Error(o(422),{cause:c}),Oa(xn(i,a)))):(c!==Yf&&(s=Error(o(423),{cause:c}),Oa(xn(s,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=xn(c,a),y=Rd(i.stateNode,c,y),nd(i,y),pt!==4&&(pt=2)),!1;var _=Error(o(520),{cause:c});if(_=xn(_,a),nl===null?nl=[_]:nl.push(_),pt!==4&&(pt=2),s===null)return!0;c=xn(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Rd(a.stateNode,c,i),nd(a,i),!1;case 1:if(s=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(xo===null||!xo.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Qg(y),$g(y,i,a,c),nd(a,y),!1}a=a.return}while(a!==null);return!1}var wd=Error(o(461)),wt=!1;function Jt(i,s,a,c){s.child=i===null?jm(s,null,a,c):Rs(s,i.child,a,c)}function Xg(i,s,a,c,y){a=a.render;var _=s.ref;if("ref"in c){var A={};for(var I in c)I!=="ref"&&(A[I]=c[I])}else A=c;return Ss(s),c=ld(i,s,a,A,_,y),I=ud(),i!==null&&!wt?(cd(i,s,y),Ki(i,s,y)):(qe&&I&&Hf(s),s.flags|=1,Jt(i,s,c,y),s.child)}function Wg(i,s,a,c,y){if(i===null){var _=a.type;return typeof _=="function"&&!Gf(_)&&_.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=_,Zg(i,s,_,c,y)):(i=Su(a.type,null,c,s,s.mode,y),i.ref=s.ref,i.return=s,s.child=i)}if(_=i.child,!Ud(i,y)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:Pa,a(A,c)&&i.ref===s.ref)return Ki(i,s,y)}return s.flags|=1,i=Bi(_,c),i.ref=s.ref,i.return=s,s.child=i}function Zg(i,s,a,c,y){if(i!==null){var _=i.memoizedProps;if(Pa(_,c)&&i.ref===s.ref)if(wt=!1,s.pendingProps=c=_,Ud(i,y))(i.flags&131072)!==0&&(wt=!0);else return s.lanes=i.lanes,Ki(i,s,y)}return Nd(i,s,a,c,y)}function jg(i,s,a,c){var y=c.children,_=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(c=s.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,s.child=null;return ey(i,s,_,a,c)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ru(s,_!==null?_.cachePool:null),_!==null?ng(s,_):od(),ig(s);else return c=s.lanes=536870912,ey(i,s,_!==null?_.baseLanes|a:a,a,c)}else _!==null?(Ru(s,_.cachePool),ng(s,_),No(),s.memoizedState=null):(i!==null&&Ru(s,null),od(),No());return Jt(i,s,y,a),s.child}function $a(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ey(i,s,a,c,y){var _=Zf();return _=_===null?null:{parent:It._currentValue,pool:_},s.memoizedState={baseLanes:a,cachePool:_},i!==null&&Ru(s,null),od(),ig(s),i!==null&&mr(i,s,c,!0),s.childLanes=y,null}function Fu(i,s){return s=zu({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function ty(i,s,a){return Rs(s,i.child,null,a),i=Fu(s,s.pendingProps),i.flags|=2,Sn(s),s.memoizedState=null,i}function WA(i,s,a){var c=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(qe){if(c.mode==="hidden")return i=Fu(s,c),s.lanes=536870912,$a(null,i);if(rd(s),(i=rt)?(i=h_(i,Un),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:To!==null?{id:Ri,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=km(i),a.return=s,s.child=a,zt=s,rt=null)):i=null,i===null)throw So(s);return s.lanes=536870912,null}return Fu(s,c)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(rd(s),y)if(s.flags&256)s.flags&=-257,s=ty(i,s,a);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(wt||mr(i,s,a,!1),y=(a&i.childLanes)!==0,wt||y){if(c=it,c!==null&&(A=ga(c,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,_s(i,A),mn(c,i,A),wd;ju(),s=ty(i,s,a)}else i=_.treeContext,rt=On(A.nextSibling),zt=s,qe=!0,Eo=null,Un=!1,i!==null&&Bm(s,i),s=Fu(s,c),s.flags|=4096;return s}return i=Bi(i.child,{mode:c.mode,children:c.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Hu(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function Nd(i,s,a,c,y){return Ss(s),a=ld(i,s,a,c,void 0,y),c=ud(),i!==null&&!wt?(cd(i,s,y),Ki(i,s,y)):(qe&&c&&Hf(s),s.flags|=1,Jt(i,s,a,y),s.child)}function ny(i,s,a,c,y,_){return Ss(s),s.updateQueue=null,a=sg(s,c,a,y),og(i),c=ud(),i!==null&&!wt?(cd(i,s,_),Ki(i,s,_)):(qe&&c&&Hf(s),s.flags|=1,Jt(i,s,a,_),s.child)}function iy(i,s,a,c,y){if(Ss(s),s.stateNode===null){var _=fr,A=a.contextType;typeof A=="object"&&A!==null&&(_=Yt(A)),_=new a(c,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Id,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=c,_.state=s.memoizedState,_.refs={},ed(s),A=a.contextType,_.context=typeof A=="object"&&A!==null?Yt(A):fr,_.state=s.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Cd(s,a,A,c),_.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Id.enqueueReplaceState(_,_.state,null),za(s,c,_,y),Ha(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){_=s.stateNode;var I=s.memoizedProps,x=Ns(a,I);_.props=x;var z=_.context,Z=a.contextType;A=fr,typeof Z=="object"&&Z!==null&&(A=Yt(Z));var ee=a.getDerivedStateFromProps;Z=typeof ee=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||z!==A)&&Hg(s,_,c,A),Co=!1;var Y=s.memoizedState;_.state=Y,za(s,c,_,y),Ha(),z=s.memoizedState,I||Y!==z||Co?(typeof ee=="function"&&(Cd(s,a,ee,c),z=s.memoizedState),(x=Co||Fg(s,a,x,c,Y,z,A))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=z),_.props=c,_.state=z,_.context=A,c=x):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{_=s.stateNode,td(i,s),A=s.memoizedProps,Z=Ns(a,A),_.props=Z,ee=s.pendingProps,Y=_.context,z=a.contextType,x=fr,typeof z=="object"&&z!==null&&(x=Yt(z)),I=a.getDerivedStateFromProps,(z=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ee||Y!==x)&&Hg(s,_,c,x),Co=!1,Y=s.memoizedState,_.state=Y,za(s,c,_,y),Ha();var K=s.memoizedState;A!==ee||Y!==K||Co||i!==null&&i.dependencies!==null&&Cu(i.dependencies)?(typeof I=="function"&&(Cd(s,a,I,c),K=s.memoizedState),(Z=Co||Fg(s,a,Z,c,Y,K,x)||i!==null&&i.dependencies!==null&&Cu(i.dependencies))?(z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,K,x),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,K,x)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=K),_.props=c,_.state=K,_.context=x,c=Z):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),c=!1)}return _=c,Hu(i,s),c=(s.flags&128)!==0,_||c?(_=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,i!==null&&c?(s.child=Rs(s,i.child,null,y),s.child=Rs(s,null,a,y)):Jt(i,s,a,y),s.memoizedState=_.state,i=s.child):i=Ki(i,s,y),i}function oy(i,s,a,c){return Ts(),s.flags|=256,Jt(i,s,a,c),s.child}var Md={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bd(i){return{baseLanes:i,cachePool:Km()}}function Dd(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=Cn),i}function sy(i,s,a){var c=s.pendingProps,y=!1,_=(s.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(yt.current&2)!==0),A&&(y=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if(qe){if(y?wo(s):No(),(i=rt)?(i=h_(i,Un),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:To!==null?{id:Ri,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=km(i),a.return=s,s.child=a,zt=s,rt=null)):i=null,i===null)throw So(s);return hh(i)?s.lanes=32:s.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(No(),y=s.mode,I=zu({mode:"hidden",children:I},y),c=vs(c,y,a,null),I.return=s,c.return=s,I.sibling=c,s.child=I,c=s.child,c.memoizedState=bd(a),c.childLanes=Dd(i,A,a),s.memoizedState=Md,$a(null,c)):(wo(s),xd(s,I))}var x=i.memoizedState;if(x!==null&&(I=x.dehydrated,I!==null)){if(_)s.flags&256?(wo(s),s.flags&=-257,s=Vd(i,s,a)):s.memoizedState!==null?(No(),s.child=i.child,s.flags|=128,s=null):(No(),I=c.fallback,y=s.mode,c=zu({mode:"visible",children:c.children},y),I=vs(I,y,a,null),I.flags|=2,c.return=s,I.return=s,c.sibling=I,s.child=c,Rs(s,i.child,null,a),c=s.child,c.memoizedState=bd(a),c.childLanes=Dd(i,A,a),s.memoizedState=Md,s=$a(null,c));else if(wo(s),hh(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var z=A.dgst;A=z,c=Error(o(419)),c.stack="",c.digest=A,Oa({value:c,source:null,stack:null}),s=Vd(i,s,a)}else if(wt||mr(i,s,a,!1),A=(a&i.childLanes)!==0,wt||A){if(A=it,A!==null&&(c=ga(A,a),c!==0&&c!==x.retryLane))throw x.retryLane=c,_s(i,c),mn(A,i,c),wd;dh(I)||ju(),s=Vd(i,s,a)}else dh(I)?(s.flags|=192,s.child=i.child,s=null):(i=x.treeContext,rt=On(I.nextSibling),zt=s,qe=!0,Eo=null,Un=!1,i!==null&&Bm(s,i),s=xd(s,c.children),s.flags|=4096);return s}return y?(No(),I=c.fallback,y=s.mode,x=i.child,z=x.sibling,c=Bi(x,{mode:"hidden",children:c.children}),c.subtreeFlags=x.subtreeFlags&65011712,z!==null?I=Bi(z,I):(I=vs(I,y,a,null),I.flags|=2),I.return=s,c.return=s,c.sibling=I,s.child=c,$a(null,c),c=s.child,I=i.child.memoizedState,I===null?I=bd(a):(y=I.cachePool,y!==null?(x=It._currentValue,y=y.parent!==x?{parent:x,pool:x}:y):y=Km(),I={baseLanes:I.baseLanes|a,cachePool:y}),c.memoizedState=I,c.childLanes=Dd(i,A,a),s.memoizedState=Md,$a(i.child,c)):(wo(s),a=i.child,i=a.sibling,a=Bi(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=a,s.memoizedState=null,a)}function xd(i,s){return s=zu({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function zu(i,s){return i=Tn(22,i,null,s),i.lanes=0,i}function Vd(i,s,a){return Rs(s,i.child,null,a),i=xd(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function ry(i,s,a){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),Qf(i.return,s,a)}function Pd(i,s,a,c,y,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:_}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=_)}function ay(i,s,a){var c=s.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=yt.current,I=(A&2)!==0;if(I?(A=A&1|2,s.flags|=128):A&=1,ue(yt,A),Jt(i,s,c,a),c=qe?La:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ry(i,a,s);else if(i.tag===19)ry(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=s.child,y=null;a!==null;)i=a.alternate,i!==null&&xu(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=s.child,s.child=null):(y=a.sibling,a.sibling=null),Pd(s,!1,y,a,_,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=s.child,s.child=null;y!==null;){if(i=y.alternate,i!==null&&xu(i)===null){s.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}Pd(s,!0,a,null,_,c);break;case"together":Pd(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function Ki(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),Do|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(mr(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,a=Bi(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=Bi(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function Ud(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Cu(i)))}function ZA(i,s,a){switch(s.tag){case 3:xt(s,s.stateNode.containerInfo),Ao(s,It,i.memoizedState.cache),Ts();break;case 27:case 5:es(s);break;case 4:xt(s,s.stateNode.containerInfo);break;case 10:Ao(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,rd(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(wo(s),s.flags|=128,null):(a&s.child.childLanes)!==0?sy(i,s,a):(wo(s),i=Ki(i,s,a),i!==null?i.sibling:null);wo(s);break;case 19:var y=(i.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(mr(i,s,a,!1),c=(a&s.childLanes)!==0),y){if(c)return ay(i,s,a);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ue(yt,yt.current),c)break;return null;case 22:return s.lanes=0,jg(i,s,a,s.pendingProps);case 24:Ao(s,It,i.memoizedState.cache)}return Ki(i,s,a)}function ly(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)wt=!0;else{if(!Ud(i,a)&&(s.flags&128)===0)return wt=!1,ZA(i,s,a);wt=(i.flags&131072)!==0}else wt=!1,qe&&(s.flags&1048576)!==0&&Gm(s,La,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(i=Cs(s.elementType),s.type=i,typeof i=="function")Gf(i)?(c=Ns(i,c),s.tag=1,s=iy(null,s,i,c,a)):(s.tag=0,s=Nd(null,s,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===se){s.tag=11,s=Xg(null,s,i,c,a);break e}else if(y===b){s.tag=14,s=Wg(null,s,i,c,a);break e}}throw s=Me(i)||i,Error(o(306,s,""))}}return s;case 0:return Nd(i,s,s.type,s.pendingProps,a);case 1:return c=s.type,y=Ns(c,s.pendingProps),iy(i,s,c,y,a);case 3:e:{if(xt(s,s.stateNode.containerInfo),i===null)throw Error(o(387));c=s.pendingProps;var _=s.memoizedState;y=_.element,td(i,s),za(s,c,null,a);var A=s.memoizedState;if(c=A.cache,Ao(s,It,c),c!==_.cache&&$f(s,[It],a,!0),Ha(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=oy(i,s,c,a);break e}else if(c!==y){y=xn(Error(o(424)),s),Oa(y),s=oy(i,s,c,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(rt=On(i.firstChild),zt=s,qe=!0,Eo=null,Un=!0,a=jm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ts(),c===y){s=Ki(i,s,a);break e}Jt(i,s,c,a)}s=s.child}return s;case 26:return Hu(i,s),i===null?(a=v_(s.type,null,s.pendingProps,null))?s.memoizedState=a:qe||(a=s.type,i=s.pendingProps,c=rc(be.current).createElement(a),c[St]=s,c[Ot]=i,Kt(c,a,i),At(c),s.stateNode=c):s.memoizedState=v_(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return es(s),i===null&&qe&&(c=s.stateNode=g_(s.type,s.pendingProps,be.current),zt=s,Un=!0,y=rt,Lo(s.type)?(ph=y,rt=On(c.firstChild)):rt=y),Jt(i,s,s.pendingProps.children,a),Hu(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&qe&&((y=c=rt)&&(c=NC(c,s.type,s.pendingProps,Un),c!==null?(s.stateNode=c,zt=s,rt=On(c.firstChild),Un=!1,y=!0):y=!1),y||So(s)),es(s),y=s.type,_=s.pendingProps,A=i!==null?i.memoizedProps:null,c=_.children,uh(y,_)?c=null:A!==null&&uh(y,A)&&(s.flags|=32),s.memoizedState!==null&&(y=ld(i,s,HA,null,null,a),cl._currentValue=y),Hu(i,s),Jt(i,s,c,a),s.child;case 6:return i===null&&qe&&((i=a=rt)&&(a=MC(a,s.pendingProps,Un),a!==null?(s.stateNode=a,zt=s,rt=null,i=!0):i=!1),i||So(s)),null;case 13:return sy(i,s,a);case 4:return xt(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=Rs(s,null,c,a):Jt(i,s,c,a),s.child;case 11:return Xg(i,s,s.type,s.pendingProps,a);case 7:return Jt(i,s,s.pendingProps,a),s.child;case 8:return Jt(i,s,s.pendingProps.children,a),s.child;case 12:return Jt(i,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,Ao(s,s.type,c.value),Jt(i,s,c.children,a),s.child;case 9:return y=s.type._context,c=s.pendingProps.children,Ss(s),y=Yt(y),c=c(y),s.flags|=1,Jt(i,s,c,a),s.child;case 14:return Wg(i,s,s.type,s.pendingProps,a);case 15:return Zg(i,s,s.type,s.pendingProps,a);case 19:return ay(i,s,a);case 31:return WA(i,s,a);case 22:return jg(i,s,a,s.pendingProps);case 24:return Ss(s),c=Yt(It),i===null?(y=Zf(),y===null&&(y=it,_=Xf(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),s.memoizedState={parent:c,cache:y},ed(s),Ao(s,It,y)):((i.lanes&a)!==0&&(td(i,s),za(s,null,null,a),Ha()),y=i.memoizedState,_=s.memoizedState,y.parent!==c?(y={parent:c,cache:c},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Ao(s,It,c)):(c=_.cache,Ao(s,It,c),c!==y.cache&&$f(s,[It],a,!0))),Jt(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Qi(i){i.flags|=4}function Ld(i,s,a,c,y){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(Uy())i.flags|=8192;else throw Is=Nu,jf}else i.flags&=-16777217}function uy(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!C_(s))if(Uy())i.flags|=8192;else throw Is=Nu,jf}function Yu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Wl():536870912,i.lanes|=s,wr|=s)}function Xa(i,s){if(!qe)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function at(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(s)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,s}function jA(i,s,a){var c=s.pendingProps;switch(zf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(s),null;case 1:return at(s),null;case 3:return a=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),zi(It),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(pr(s)?Qi(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jf())),at(s),null;case 26:var y=s.type,_=s.memoizedState;return i===null?(Qi(s),_!==null?(at(s),uy(s,_)):(at(s),Ld(s,y,null,c,a))):_?_!==i.memoizedState?(Qi(s),at(s),uy(s,_)):(at(s),s.flags&=-16777217):(i=i.memoizedProps,i!==c&&Qi(s),at(s),Ld(s,y,i,c,a)),null;case 27:if(Js(s),a=be.current,y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&Qi(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return at(s),null}i=pe.current,pr(s)?Fm(s):(i=g_(y,c,a),s.stateNode=i,Qi(s))}return at(s),null;case 5:if(Js(s),y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&Qi(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return at(s),null}if(_=pe.current,pr(s))Fm(s);else{var A=rc(be.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[St]=s,_[Ot]=c;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=_;e:switch(Kt(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Qi(s)}}return at(s),Ld(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,a),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&Qi(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(o(166));if(i=be.current,pr(s)){if(i=s.stateNode,a=s.memoizedProps,c=null,y=zt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[St]=s,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||s_(i.nodeValue,a)),i||So(s,!0)}else i=rc(i).createTextNode(c),i[St]=s,s.stateNode=i}return at(s),null;case 31:if(a=s.memoizedState,i===null||i.memoizedState!==null){if(c=pr(s),a!==null){if(i===null){if(!c)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[St]=s}else Ts(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;at(s),i=!1}else a=Jf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return s.flags&256?(Sn(s),s):(Sn(s),null);if((s.flags&128)!==0)throw Error(o(558))}return at(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=pr(s),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(o(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[St]=s}else Ts(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;at(s),y=!1}else y=Jf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Sn(s),s):(Sn(s),null)}return Sn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=s.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),a!==i&&a&&(s.child.flags|=8192),Yu(s,s.updateQueue),at(s),null);case 4:return ut(),i===null&&oh(s.stateNode.containerInfo),at(s),null;case 10:return zi(s.type),at(s),null;case 19:if(te(yt),c=s.memoizedState,c===null)return at(s),null;if(y=(s.flags&128)!==0,_=c.rendering,_===null)if(y)Xa(c,!1);else{if(pt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(_=xu(i),_!==null){for(s.flags|=128,Xa(c,!1),i=_.updateQueue,s.updateQueue=i,Yu(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)Om(a,i),a=a.sibling;return ue(yt,yt.current&1|2),qe&&Fi(s,c.treeForkCount),s.child}i=i.sibling}c.tail!==null&&on()>Xu&&(s.flags|=128,y=!0,Xa(c,!1),s.lanes=4194304)}else{if(!y)if(i=xu(_),i!==null){if(s.flags|=128,y=!0,i=i.updateQueue,s.updateQueue=i,Yu(s,i),Xa(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!qe)return at(s),null}else 2*on()-c.renderingStartTime>Xu&&a!==536870912&&(s.flags|=128,y=!0,Xa(c,!1),s.lanes=4194304);c.isBackwards?(_.sibling=s.child,s.child=_):(i=c.last,i!==null?i.sibling=_:s.child=_,c.last=_)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=on(),i.sibling=null,a=yt.current,ue(yt,y?a&1|2:a&1),qe&&Fi(s,c.treeForkCount),i):(at(s),null);case 22:case 23:return Sn(s),sd(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(at(s),s.subtreeFlags&6&&(s.flags|=8192)):at(s),a=s.updateQueue,a!==null&&Yu(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),i!==null&&te(As),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),zi(It),at(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function eC(i,s){switch(zf(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return zi(It),ut(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Js(s),null;case 31:if(s.memoizedState!==null){if(Sn(s),s.alternate===null)throw Error(o(340));Ts()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Sn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Ts()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return te(yt),null;case 4:return ut(),null;case 10:return zi(s.type),null;case 22:case 23:return Sn(s),sd(),i!==null&&te(As),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return zi(It),null;case 25:return null;default:return null}}function cy(i,s){switch(zf(s),s.tag){case 3:zi(It),ut();break;case 26:case 27:case 5:Js(s);break;case 4:ut();break;case 31:s.memoizedState!==null&&Sn(s);break;case 13:Sn(s);break;case 19:te(yt);break;case 10:zi(s.type);break;case 22:case 23:Sn(s),sd(),i!==null&&te(As);break;case 24:zi(It)}}function Wa(i,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var _=a.create,A=a.inst;c=_(),A.destroy=c}a=a.next}while(a!==y)}}catch(I){Ze(s,s.return,I)}}function Mo(i,s,a){try{var c=s.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&i)===i){var A=c.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=s;var x=a,z=I;try{z()}catch(Z){Ze(y,x,Z)}}}c=c.next}while(c!==_)}}catch(Z){Ze(s,s.return,Z)}}function fy(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{tg(s,a)}catch(c){Ze(i,i.return,c)}}}function dy(i,s,a){a.props=Ns(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){Ze(i,s,c)}}function Za(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){Ze(i,s,y)}}function Ni(i,s){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){Ze(i,s,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){Ze(i,s,y)}else a.current=null}function hy(i){var s=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){Ze(i,i.return,y)}}function Od(i,s,a){try{var c=i.stateNode;SC(c,i.type,a,s),c[Ot]=s}catch(y){Ze(i,i.return,y)}}function py(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Lo(i.type)||i.tag===4}function kd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||py(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Lo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function qd(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Kn));else if(c!==4&&(c===27&&Lo(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(qd(i,s,a),i=i.sibling;i!==null;)qd(i,s,a),i=i.sibling}function Ju(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(c!==4&&(c===27&&Lo(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Ju(i,s,a),i=i.sibling;i!==null;)Ju(i,s,a),i=i.sibling}function my(i){var s=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);Kt(s,c,a),s[St]=i,s[Ot]=a}catch(_){Ze(i,i.return,_)}}var $i=!1,Nt=!1,Gd=!1,gy=typeof WeakSet=="function"?WeakSet:Set,qt=null;function tC(i,s){if(i=i.containerInfo,ah=hc,i=Nm(i),Vf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,I=-1,x=-1,z=0,Z=0,ee=i,Y=null;t:for(;;){for(var K;ee!==a||y!==0&&ee.nodeType!==3||(I=A+y),ee!==_||c!==0&&ee.nodeType!==3||(x=A+c),ee.nodeType===3&&(A+=ee.nodeValue.length),(K=ee.firstChild)!==null;)Y=ee,ee=K;for(;;){if(ee===i)break t;if(Y===a&&++z===y&&(I=A),Y===_&&++Z===c&&(x=A),(K=ee.nextSibling)!==null)break;ee=Y,Y=ee.parentNode}ee=K}a=I===-1||x===-1?null:{start:I,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(lh={focusedElem:i,selectionRange:a},hc=!1,qt=s;qt!==null;)if(s=qt,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,qt=i;else for(;qt!==null;){switch(s=qt,_=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=s,y=_.memoizedProps,_=_.memoizedState,c=a.stateNode;try{var me=Ns(a.type,y);i=c.getSnapshotBeforeUpdate(me,_),c.__reactInternalSnapshotBeforeUpdate=i}catch(Te){Ze(a,a.return,Te)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)fh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":fh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,qt=i;break}qt=s.return}}function yy(i,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Wi(i,a),c&4&&Wa(5,a);break;case 1:if(Wi(i,a),c&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(A){Ze(a,a.return,A)}else{var y=Ns(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(y,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){Ze(a,a.return,A)}}c&64&&fy(a),c&512&&Za(a,a.return);break;case 3:if(Wi(i,a),c&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{tg(i,s)}catch(A){Ze(a,a.return,A)}}break;case 27:s===null&&c&4&&my(a);case 26:case 5:Wi(i,a),s===null&&c&4&&hy(a),c&512&&Za(a,a.return);break;case 12:Wi(i,a);break;case 31:Wi(i,a),c&4&&Ty(i,a);break;case 13:Wi(i,a),c&4&&Ey(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=cC.bind(null,a),bC(i,a))));break;case 22:if(c=a.memoizedState!==null||$i,!c){s=s!==null&&s.memoizedState!==null||Nt,y=$i;var _=Nt;$i=c,(Nt=s)&&!_?Zi(i,a,(a.subtreeFlags&8772)!==0):Wi(i,a),$i=y,Nt=_}break;case 30:break;default:Wi(i,a)}}function _y(i){var s=i.alternate;s!==null&&(i.alternate=null,_y(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Ws(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ft=null,fn=!1;function Xi(i,s,a){for(a=a.child;a!==null;)vy(i,s,a),a=a.sibling}function vy(i,s,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Hn,a)}catch{}switch(a.tag){case 26:Nt||Ni(a,s),Xi(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Nt||Ni(a,s);var c=ft,y=fn;Lo(a.type)&&(ft=a.stateNode,fn=!1),Xi(i,s,a),al(a.stateNode),ft=c,fn=y;break;case 5:Nt||Ni(a,s);case 6:if(c=ft,y=fn,ft=null,Xi(i,s,a),ft=c,fn=y,ft!==null)if(fn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(_){Ze(a,s,_)}else try{ft.removeChild(a.stateNode)}catch(_){Ze(a,s,_)}break;case 18:ft!==null&&(fn?(i=ft,f_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Ur(i)):f_(ft,a.stateNode));break;case 4:c=ft,y=fn,ft=a.stateNode.containerInfo,fn=!0,Xi(i,s,a),ft=c,fn=y;break;case 0:case 11:case 14:case 15:Mo(2,a,s),Nt||Mo(4,a,s),Xi(i,s,a);break;case 1:Nt||(Ni(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&dy(a,s,c)),Xi(i,s,a);break;case 21:Xi(i,s,a);break;case 22:Nt=(c=Nt)||a.memoizedState!==null,Xi(i,s,a),Nt=c;break;default:Xi(i,s,a)}}function Ty(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ur(i)}catch(a){Ze(s,s.return,a)}}}function Ey(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ur(i)}catch(a){Ze(s,s.return,a)}}function nC(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new gy),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new gy),s;default:throw Error(o(435,i.tag))}}function Ku(i,s){var a=nC(i);s.forEach(function(c){if(!a.has(c)){a.add(c);var y=fC.bind(null,i,c);c.then(y,y)}})}function dn(i,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],_=i,A=s,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Lo(I.type)){ft=I.stateNode,fn=!1;break e}break;case 5:ft=I.stateNode,fn=!1;break e;case 3:case 4:ft=I.stateNode.containerInfo,fn=!0;break e}I=I.return}if(ft===null)throw Error(o(160));vy(_,A,y),ft=null,fn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Sy(s,i),s=s.sibling}var jn=null;function Sy(i,s){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:dn(s,i),hn(i),c&4&&(Mo(3,i,i.return),Wa(3,i),Mo(5,i,i.return));break;case 1:dn(s,i),hn(i),c&512&&(Nt||a===null||Ni(a,a.return)),c&64&&$i&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=jn;if(dn(s,i),hn(i),c&512&&(Nt||a===null||Ni(a,a.return)),c&4){var _=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[pi]||_[St]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),Kt(_,c,a),_[St]=i,At(_),c=_;break e;case"link":var A=S_("link","href",y).get(c+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(_=A[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}_=y.createElement(c),Kt(_,c,a),y.head.appendChild(_);break;case"meta":if(A=S_("meta","content",y).get(c+(a.content||""))){for(I=0;I<A.length;I++)if(_=A[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}_=y.createElement(c),Kt(_,c,a),y.head.appendChild(_);break;default:throw Error(o(468,c))}_[St]=i,At(_),c=_}i.stateNode=c}else A_(y,i.type,i.stateNode);else i.stateNode=E_(y,c,i.memoizedProps);else _!==c?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,c===null?A_(y,i.type,i.stateNode):E_(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Od(i,i.memoizedProps,a.memoizedProps)}break;case 27:dn(s,i),hn(i),c&512&&(Nt||a===null||Ni(a,a.return)),a!==null&&c&4&&Od(i,i.memoizedProps,a.memoizedProps);break;case 5:if(dn(s,i),hn(i),c&512&&(Nt||a===null||Ni(a,a.return)),i.flags&32){y=i.stateNode;try{cn(y,"")}catch(me){Ze(i,i.return,me)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,Od(i,y,a!==null?a.memoizedProps:y)),c&1024&&(Gd=!0);break;case 6:if(dn(s,i),hn(i),c&4){if(i.stateNode===null)throw Error(o(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(me){Ze(i,i.return,me)}}break;case 3:if(uc=null,y=jn,jn=ac(s.containerInfo),dn(s,i),jn=y,hn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Ur(s.containerInfo)}catch(me){Ze(i,i.return,me)}Gd&&(Gd=!1,Ay(i));break;case 4:c=jn,jn=ac(i.stateNode.containerInfo),dn(s,i),hn(i),jn=c;break;case 12:dn(s,i),hn(i);break;case 31:dn(s,i),hn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Ku(i,c)));break;case 13:dn(s,i),hn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&($u=on()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Ku(i,c)));break;case 22:y=i.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,z=$i,Z=Nt;if($i=z||y,Nt=Z||x,dn(s,i),Nt=Z,$i=z,hn(i),c&8192)e:for(s=i.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(a===null||x||$i||Nt||Ms(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){x=a=s;try{if(_=x.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=x.stateNode;var ee=x.memoizedProps.style,Y=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;I.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(me){Ze(x,x.return,me)}}}else if(s.tag===6){if(a===null){x=s;try{x.stateNode.nodeValue=y?"":x.memoizedProps}catch(me){Ze(x,x.return,me)}}}else if(s.tag===18){if(a===null){x=s;try{var K=x.stateNode;y?d_(K,!0):d_(x.stateNode,!1)}catch(me){Ze(x,x.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Ku(i,a))));break;case 19:dn(s,i),hn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Ku(i,c)));break;case 30:break;case 21:break;default:dn(s,i),hn(i)}}function hn(i){var s=i.flags;if(s&2){try{for(var a,c=i.return;c!==null;){if(py(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var y=a.stateNode,_=kd(i);Ju(i,_,y);break;case 5:var A=a.stateNode;a.flags&32&&(cn(A,""),a.flags&=-33);var I=kd(i);Ju(i,I,A);break;case 3:case 4:var x=a.stateNode.containerInfo,z=kd(i);qd(i,z,x);break;default:throw Error(o(161))}}catch(Z){Ze(i,i.return,Z)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Ay(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Ay(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Wi(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)yy(i,s.alternate,s),s=s.sibling}function Ms(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Mo(4,s,s.return),Ms(s);break;case 1:Ni(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&dy(s,s.return,a),Ms(s);break;case 27:al(s.stateNode);case 26:case 5:Ni(s,s.return),Ms(s);break;case 22:s.memoizedState===null&&Ms(s);break;case 30:Ms(s);break;default:Ms(s)}i=i.sibling}}function Zi(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,y=i,_=s,A=_.flags;switch(_.tag){case 0:case 11:case 15:Zi(y,_,a),Wa(4,_);break;case 1:if(Zi(y,_,a),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(z){Ze(c,c.return,z)}if(c=_,y=c.updateQueue,y!==null){var I=c.stateNode;try{var x=y.shared.hiddenCallbacks;if(x!==null)for(y.shared.hiddenCallbacks=null,y=0;y<x.length;y++)eg(x[y],I)}catch(z){Ze(c,c.return,z)}}a&&A&64&&fy(_),Za(_,_.return);break;case 27:my(_);case 26:case 5:Zi(y,_,a),a&&c===null&&A&4&&hy(_),Za(_,_.return);break;case 12:Zi(y,_,a);break;case 31:Zi(y,_,a),a&&A&4&&Ty(y,_);break;case 13:Zi(y,_,a),a&&A&4&&Ey(y,_);break;case 22:_.memoizedState===null&&Zi(y,_,a),Za(_,_.return);break;case 30:break;default:Zi(y,_,a)}s=s.sibling}}function Bd(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&ka(a))}function Fd(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ka(i))}function ei(i,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Cy(i,s,a,c),s=s.sibling}function Cy(i,s,a,c){var y=s.flags;switch(s.tag){case 0:case 11:case 15:ei(i,s,a,c),y&2048&&Wa(9,s);break;case 1:ei(i,s,a,c);break;case 3:ei(i,s,a,c),y&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ka(i)));break;case 12:if(y&2048){ei(i,s,a,c),i=s.stateNode;try{var _=s.memoizedProps,A=_.id,I=_.onPostCommit;typeof I=="function"&&I(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(x){Ze(s,s.return,x)}}else ei(i,s,a,c);break;case 31:ei(i,s,a,c);break;case 13:ei(i,s,a,c);break;case 23:break;case 22:_=s.stateNode,A=s.alternate,s.memoizedState!==null?_._visibility&2?ei(i,s,a,c):ja(i,s):_._visibility&2?ei(i,s,a,c):(_._visibility|=2,Cr(i,s,a,c,(s.subtreeFlags&10256)!==0||!1)),y&2048&&Bd(A,s);break;case 24:ei(i,s,a,c),y&2048&&Fd(s.alternate,s);break;default:ei(i,s,a,c)}}function Cr(i,s,a,c,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=i,A=s,I=a,x=c,z=A.flags;switch(A.tag){case 0:case 11:case 15:Cr(_,A,I,x,y),Wa(8,A);break;case 23:break;case 22:var Z=A.stateNode;A.memoizedState!==null?Z._visibility&2?Cr(_,A,I,x,y):ja(_,A):(Z._visibility|=2,Cr(_,A,I,x,y)),y&&z&2048&&Bd(A.alternate,A);break;case 24:Cr(_,A,I,x,y),y&&z&2048&&Fd(A.alternate,A);break;default:Cr(_,A,I,x,y)}s=s.sibling}}function ja(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,c=s,y=c.flags;switch(c.tag){case 22:ja(a,c),y&2048&&Bd(c.alternate,c);break;case 24:ja(a,c),y&2048&&Fd(c.alternate,c);break;default:ja(a,c)}s=s.sibling}}var el=8192;function Ir(i,s,a){if(i.subtreeFlags&el)for(i=i.child;i!==null;)Iy(i,s,a),i=i.sibling}function Iy(i,s,a){switch(i.tag){case 26:Ir(i,s,a),i.flags&el&&i.memoizedState!==null&&FC(a,jn,i.memoizedState,i.memoizedProps);break;case 5:Ir(i,s,a);break;case 3:case 4:var c=jn;jn=ac(i.stateNode.containerInfo),Ir(i,s,a),jn=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=el,el=16777216,Ir(i,s,a),el=c):Ir(i,s,a));break;default:Ir(i,s,a)}}function Ry(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function tl(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];qt=c,Ny(c,i)}Ry(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)wy(i),i=i.sibling}function wy(i){switch(i.tag){case 0:case 11:case 15:tl(i),i.flags&2048&&Mo(9,i,i.return);break;case 3:tl(i);break;case 12:tl(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Qu(i)):tl(i);break;default:tl(i)}}function Qu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];qt=c,Ny(c,i)}Ry(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Mo(8,s,s.return),Qu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Qu(s));break;default:Qu(s)}i=i.sibling}}function Ny(i,s){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:Mo(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ka(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,qt=c;else e:for(a=i;qt!==null;){c=qt;var y=c.sibling,_=c.return;if(_y(c),c===a){qt=null;break e}if(y!==null){y.return=_,qt=y;break e}qt=_}}}var iC={getCacheForType:function(i){var s=Yt(It),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a},cacheSignal:function(){return Yt(It).controller.signal}},oC=typeof WeakMap=="function"?WeakMap:Map,Ke=0,it=null,Ve=null,Ue=0,We=0,An=null,bo=!1,Rr=!1,Hd=!1,ji=0,pt=0,Do=0,bs=0,zd=0,Cn=0,wr=0,nl=null,pn=null,Yd=!1,$u=0,My=0,Xu=1/0,Wu=null,xo=null,Pt=0,Vo=null,Nr=null,eo=0,Jd=0,Kd=null,by=null,il=0,Qd=null;function In(){return(Ke&2)!==0&&Ue!==0?Ue&-Ue:W.T!==null?eh():Zl()}function Dy(){if(Cn===0)if((Ue&536870912)===0||qe){var i=is;is<<=1,(is&3932160)===0&&(is=262144),Cn=i}else Cn=536870912;return i=En.current,i!==null&&(i.flags|=32),Cn}function mn(i,s,a){(i===it&&(We===2||We===9)||i.cancelPendingCommit!==null)&&(Mr(i,0),Po(i,Ue,Cn,!1)),os(i,a),((Ke&2)===0||i!==it)&&(i===it&&((Ke&2)===0&&(bs|=a),pt===4&&Po(i,Ue,Cn,!1)),Mi(i))}function xy(i,s,a){if((Ke&6)!==0)throw Error(o(327));var c=!a&&(s&127)===0&&(s&i.expiredLanes)===0||zn(i,s),y=c?aC(i,s):Xd(i,s,!0),_=c;do{if(y===0){Rr&&!c&&Po(i,s,0,!1);break}else{if(a=i.current.alternate,_&&!sC(a)){y=Xd(i,s,!1),_=!1;continue}if(y===2){if(_=s,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var I=i;y=nl;var x=I.current.memoizedState.isDehydrated;if(x&&(Mr(I,A).flags|=256),A=Xd(I,A,!1),A!==2){if(Hd&&!x){I.errorRecoveryDisabledLanes|=_,bs|=_,y=4;break e}_=pn,pn=y,_!==null&&(pn===null?pn=_:pn.push.apply(pn,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){Mr(i,0),Po(i,s,0,!0);break}e:{switch(c=i,_=y,_){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Po(c,s,Cn,!bo);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(y=$u+300-on(),10<y)){if(Po(c,s,Cn,!bo),fi(c,0,!0)!==0)break e;eo=s,c.timeoutHandle=u_(Vy.bind(null,c,a,pn,Wu,Yd,s,Cn,bs,wr,bo,_,"Throttled",-0,0),y);break e}Vy(c,a,pn,Wu,Yd,s,Cn,bs,wr,bo,_,null,-0,0)}}break}while(!0);Mi(i)}function Vy(i,s,a,c,y,_,A,I,x,z,Z,ee,Y,K){if(i.timeoutHandle=-1,ee=s.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Kn},Iy(s,_,ee);var me=(_&62914560)===_?$u-on():(_&4194048)===_?My-on():0;if(me=HC(ee,me),me!==null){eo=_,i.cancelPendingCommit=me(By.bind(null,i,s,_,a,c,y,A,I,x,Z,ee,null,Y,K)),Po(i,_,A,!z);return}}By(i,s,_,a,c,y,A,I,x)}function sC(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],_=y.getSnapshot;y=y.value;try{if(!vn(_(),y))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Po(i,s,a,c){s&=~zd,s&=~bs,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var y=s;0<y;){var _=31-mt(y),A=1<<_;c[_]=-1,y&=~A}a!==0&&ss(i,a,s)}function Zu(){return(Ke&6)===0?(ol(0),!1):!0}function $d(){if(Ve!==null){if(We===0)var i=Ve.return;else i=Ve,Hi=Es=null,fd(i),vr=null,Ga=0,i=Ve;for(;i!==null;)cy(i.alternate,i),i=i.return;Ve=null}}function Mr(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,IC(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),eo=0,$d(),it=i,Ve=a=Bi(i.current,null),Ue=s,We=0,An=null,bo=!1,Rr=zn(i,s),Hd=!1,wr=Cn=zd=bs=Do=pt=0,pn=nl=null,Yd=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var y=31-mt(c),_=1<<y;s|=i[y],c&=~_}return ji=s,vu(),a}function Py(i,s){Ne=null,W.H=Qa,s===_r||s===wu?(s=Xm(),We=3):s===jf?(s=Xm(),We=4):We=s===wd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,An=s,Ve===null&&(pt=1,Bu(i,xn(s,i.current)))}function Uy(){var i=En.current;return i===null?!0:(Ue&4194048)===Ue?Ln===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?i===Ln:!1}function Ly(){var i=W.H;return W.H=Qa,i===null?Qa:i}function Oy(){var i=W.A;return W.A=iC,i}function ju(){pt=4,bo||(Ue&4194048)!==Ue&&En.current!==null||(Rr=!0),(Do&134217727)===0&&(bs&134217727)===0||it===null||Po(it,Ue,Cn,!1)}function Xd(i,s,a){var c=Ke;Ke|=2;var y=Ly(),_=Oy();(it!==i||Ue!==s)&&(Wu=null,Mr(i,s)),s=!1;var A=pt;e:do try{if(We!==0&&Ve!==null){var I=Ve,x=An;switch(We){case 8:$d(),A=6;break e;case 3:case 2:case 9:case 6:En.current===null&&(s=!0);var z=We;if(We=0,An=null,br(i,I,x,z),a&&Rr){A=0;break e}break;default:z=We,We=0,An=null,br(i,I,x,z)}}rC(),A=pt;break}catch(Z){Py(i,Z)}while(!0);return s&&i.shellSuspendCounter++,Hi=Es=null,Ke=c,W.H=y,W.A=_,Ve===null&&(it=null,Ue=0,vu()),A}function rC(){for(;Ve!==null;)ky(Ve)}function aC(i,s){var a=Ke;Ke|=2;var c=Ly(),y=Oy();it!==i||Ue!==s?(Wu=null,Xu=on()+500,Mr(i,s)):Rr=zn(i,s);e:do try{if(We!==0&&Ve!==null){s=Ve;var _=An;t:switch(We){case 1:We=0,An=null,br(i,s,_,1);break;case 2:case 9:if(Qm(_)){We=0,An=null,qy(s);break}s=function(){We!==2&&We!==9||it!==i||(We=7),Mi(i)},_.then(s,s);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Qm(_)?(We=0,An=null,qy(s)):(We=0,An=null,br(i,s,_,7));break;case 5:var A=null;switch(Ve.tag){case 26:A=Ve.memoizedState;case 5:case 27:var I=Ve;if(A?C_(A):I.stateNode.complete){We=0,An=null;var x=I.sibling;if(x!==null)Ve=x;else{var z=I.return;z!==null?(Ve=z,ec(z)):Ve=null}break t}}We=0,An=null,br(i,s,_,5);break;case 6:We=0,An=null,br(i,s,_,6);break;case 8:$d(),pt=6;break e;default:throw Error(o(462))}}lC();break}catch(Z){Py(i,Z)}while(!0);return Hi=Es=null,W.H=c,W.A=y,Ke=a,Ve!==null?0:(it=null,Ue=0,vu(),pt)}function lC(){for(;Ve!==null&&!Rf();)ky(Ve)}function ky(i){var s=ly(i.alternate,i,ji);i.memoizedProps=i.pendingProps,s===null?ec(i):Ve=s}function qy(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=ny(a,s,s.pendingProps,s.type,void 0,Ue);break;case 11:s=ny(a,s,s.pendingProps,s.type.render,s.ref,Ue);break;case 5:fd(s);default:cy(a,s),s=Ve=Om(s,ji),s=ly(a,s,ji)}i.memoizedProps=i.pendingProps,s===null?ec(i):Ve=s}function br(i,s,a,c){Hi=Es=null,fd(s),vr=null,Ga=0;var y=s.return;try{if(XA(i,y,s,a,Ue)){pt=1,Bu(i,xn(a,i.current)),Ve=null;return}}catch(_){if(y!==null)throw Ve=y,_;pt=1,Bu(i,xn(a,i.current)),Ve=null;return}s.flags&32768?(qe||c===1?i=!0:Rr||(Ue&536870912)!==0?i=!1:(bo=i=!0,(c===2||c===9||c===3||c===6)&&(c=En.current,c!==null&&c.tag===13&&(c.flags|=16384))),Gy(s,i)):ec(s)}function ec(i){var s=i;do{if((s.flags&32768)!==0){Gy(s,bo);return}i=s.return;var a=jA(s.alternate,s,ji);if(a!==null){Ve=a;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=i}while(s!==null);pt===0&&(pt=5)}function Gy(i,s){do{var a=eC(i.alternate,i);if(a!==null){a.flags&=32767,Ve=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=a}while(i!==null);pt=6,Ve=null}function By(i,s,a,c,y,_,A,I,x){i.cancelPendingCommit=null;do tc();while(Pt!==0);if((Ke&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(_=s.lanes|s.childLanes,_|=kf,Mf(i,a,_,A,I,x),i===it&&(Ve=it=null,Ue=0),Nr=s,Vo=i,eo=a,Jd=_,Kd=y,by=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,dC(uo,function(){return Jy(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,y=le.p,le.p=2,A=Ke,Ke|=4;try{tC(i,s,a)}finally{Ke=A,le.p=y,W.T=c}}Pt=1,Fy(),Hy(),zy()}}function Fy(){if(Pt===1){Pt=0;var i=Vo,s=Nr,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var c=le.p;le.p=2;var y=Ke;Ke|=4;try{Sy(s,i);var _=lh,A=Nm(i.containerInfo),I=_.focusedElem,x=_.selectionRange;if(A!==I&&I&&I.ownerDocument&&wm(I.ownerDocument.documentElement,I)){if(x!==null&&Vf(I)){var z=x.start,Z=x.end;if(Z===void 0&&(Z=z),"selectionStart"in I)I.selectionStart=z,I.selectionEnd=Math.min(Z,I.value.length);else{var ee=I.ownerDocument||document,Y=ee&&ee.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),me=I.textContent.length,Te=Math.min(x.start,me),nt=x.end===void 0?Te:Math.min(x.end,me);!K.extend&&Te>nt&&(A=nt,nt=Te,Te=A);var B=Rm(I,Te),L=Rm(I,nt);if(B&&L&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var H=ee.createRange();H.setStart(B.node,B.offset),K.removeAllRanges(),Te>nt?(K.addRange(H),K.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),K.addRange(H))}}}}for(ee=[],K=I;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ee.length;I++){var j=ee[I];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}hc=!!ah,lh=ah=null}finally{Ke=y,le.p=c,W.T=a}}i.current=s,Pt=2}}function Hy(){if(Pt===2){Pt=0;var i=Vo,s=Nr,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var c=le.p;le.p=2;var y=Ke;Ke|=4;try{yy(i,s.alternate,s)}finally{Ke=y,le.p=c,W.T=a}}Pt=3}}function zy(){if(Pt===4||Pt===3){Pt=0,Yl();var i=Vo,s=Nr,a=eo,c=by;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Pt=5:(Pt=0,Nr=Vo=null,Yy(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(xo=null),Oi(a),s=s.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Hn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=W.T,y=le.p,le.p=2,W.T=null;try{for(var _=i.onRecoverableError,A=0;A<c.length;A++){var I=c[A];_(I.value,{componentStack:I.stack})}}finally{W.T=s,le.p=y}}(eo&3)!==0&&tc(),Mi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===Qd?il++:(il=0,Qd=i):il=0,ol(0)}}function Yy(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,ka(s)))}function tc(){return Fy(),Hy(),zy(),Jy()}function Jy(){if(Pt!==5)return!1;var i=Vo,s=Jd;Jd=0;var a=Oi(eo),c=W.T,y=le.p;try{le.p=32>a?32:a,W.T=null,a=Kd,Kd=null;var _=Vo,A=eo;if(Pt=0,Nr=Vo=null,eo=0,(Ke&6)!==0)throw Error(o(331));var I=Ke;if(Ke|=4,wy(_.current),Cy(_,_.current,A,a),Ke=I,ol(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Hn,_)}catch{}return!0}finally{le.p=y,W.T=c,Yy(i,s)}}function Ky(i,s,a){s=xn(a,s),s=Rd(i.stateNode,s,2),i=Ro(i,s,2),i!==null&&(os(i,2),Mi(i))}function Ze(i,s,a){if(i.tag===3)Ky(i,i,a);else for(;s!==null;){if(s.tag===3){Ky(s,i,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(xo===null||!xo.has(c))){i=xn(a,i),a=Qg(2),c=Ro(s,a,2),c!==null&&($g(a,c,s,i),os(c,2),Mi(c));break}}s=s.return}}function Wd(i,s,a){var c=i.pingCache;if(c===null){c=i.pingCache=new oC;var y=new Set;c.set(s,y)}else y=c.get(s),y===void 0&&(y=new Set,c.set(s,y));y.has(a)||(Hd=!0,y.add(a),i=uC.bind(null,i,s,a),s.then(i,i))}function uC(i,s,a){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,it===i&&(Ue&a)===a&&(pt===4||pt===3&&(Ue&62914560)===Ue&&300>on()-$u?(Ke&2)===0&&Mr(i,0):zd|=a,wr===Ue&&(wr=0)),Mi(i)}function Qy(i,s){s===0&&(s=Wl()),i=_s(i,s),i!==null&&(os(i,s),Mi(i))}function cC(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),Qy(i,a)}function fC(i,s){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(s),Qy(i,a)}function dC(i,s){return Vt(i,s)}var nc=null,Dr=null,Zd=!1,ic=!1,jd=!1,Uo=0;function Mi(i){i!==Dr&&i.next===null&&(Dr===null?nc=Dr=i:Dr=Dr.next=i),ic=!0,Zd||(Zd=!0,pC())}function ol(i,s){if(!jd&&ic){jd=!0;do for(var a=!1,c=nc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,I=c.pingedLanes;_=(1<<31-mt(42|i)+1)-1,_&=y&~(A&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,Zy(c,_))}else _=Ue,_=fi(c,c===it?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||zn(c,_)||(a=!0,Zy(c,_));c=c.next}while(a);jd=!1}}function hC(){$y()}function $y(){ic=Zd=!1;var i=0;Uo!==0&&CC()&&(i=Uo);for(var s=on(),a=null,c=nc;c!==null;){var y=c.next,_=Xy(c,s);_===0?(c.next=null,a===null?nc=y:a.next=y,y===null&&(Dr=a)):(a=c,(i!==0||(_&3)!==0)&&(ic=!0)),c=y}Pt!==0&&Pt!==5||ol(i),Uo!==0&&(Uo=0)}function Xy(i,s){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-mt(_),I=1<<A,x=y[A];x===-1?((I&a)===0||(I&c)!==0)&&(y[A]=Nf(I,s)):x<=s&&(i.expiredLanes|=I),_&=~I}if(s=it,a=Ue,a=fi(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===s&&(We===2||We===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&lo(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||zn(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(c!==null&&lo(c),Oi(a)){case 2:case 8:a=pa;break;case 32:a=uo;break;case 268435456:a=Jl;break;default:a=uo}return c=Wy.bind(null,i),a=Vt(a,c),i.callbackPriority=s,i.callbackNode=a,s}return c!==null&&c!==null&&lo(c),i.callbackPriority=2,i.callbackNode=null,2}function Wy(i,s){if(Pt!==0&&Pt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(tc()&&i.callbackNode!==a)return null;var c=Ue;return c=fi(i,i===it?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(xy(i,c,s),Xy(i,on()),i.callbackNode!=null&&i.callbackNode===a?Wy.bind(null,i):null)}function Zy(i,s){if(tc())return null;xy(i,s,!0)}function pC(){RC(function(){(Ke&6)!==0?Vt(ha,hC):$y()})}function eh(){if(Uo===0){var i=gr;i===0&&(i=ui,ui<<=1,(ui&261888)===0&&(ui=256)),Uo=i}return Uo}function jy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:tr(""+i)}function e_(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function mC(i,s,a,c,y){if(s==="submit"&&a&&a.stateNode===y){var _=jy((y[Ot]||null).action),A=c.submitter;A&&(s=(s=A[Ot]||null)?jy(s.formAction):A.getAttribute("formAction"),s!==null&&(_=s,A=null));var I=new Si("action","action",null,c,y);i.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Uo!==0){var x=A?e_(y,A):new FormData(y);Td(a,{pending:!0,data:x,method:y.method,action:_},null,x)}}else typeof _=="function"&&(I.preventDefault(),x=A?e_(y,A):new FormData(y),Td(a,{pending:!0,data:x,method:y.method,action:_},_,x))},currentTarget:y}]})}}for(var th=0;th<Of.length;th++){var nh=Of[th],gC=nh.toLowerCase(),yC=nh[0].toUpperCase()+nh.slice(1);Zn(gC,"on"+yC)}Zn(Dm,"onAnimationEnd"),Zn(xm,"onAnimationIteration"),Zn(Vm,"onAnimationStart"),Zn("dblclick","onDoubleClick"),Zn("focusin","onFocus"),Zn("focusout","onBlur"),Zn(VA,"onTransitionRun"),Zn(PA,"onTransitionStart"),Zn(UA,"onTransitionCancel"),Zn(Pm,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_C=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sl));function t_(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var _=void 0;if(s)for(var A=c.length-1;0<=A;A--){var I=c[A],x=I.instance,z=I.currentTarget;if(I=I.listener,x!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=z;try{_(y)}catch(Z){_u(Z)}y.currentTarget=null,_=x}else for(A=0;A<c.length;A++){if(I=c[A],x=I.instance,z=I.currentTarget,I=I.listener,x!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=z;try{_(y)}catch(Z){_u(Z)}y.currentTarget=null,_=x}}}}function Pe(i,s){var a=s[Xs];a===void 0&&(a=s[Xs]=new Set);var c=i+"__bubble";a.has(c)||(n_(s,i,2,!1),a.add(c))}function ih(i,s,a){var c=0;s&&(c|=4),n_(a,i,c,s)}var oc="_reactListening"+Math.random().toString(36).slice(2);function oh(i){if(!i[oc]){i[oc]=!0,ya.forEach(function(a){a!=="selectionchange"&&(_C.has(a)||ih(a,!1,i),ih(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[oc]||(s[oc]=!0,ih("selectionchange",!1,s))}}function n_(i,s,a,c){switch(D_(s)){case 2:var y=JC;break;case 8:y=KC;break;default:y=vh}a=y.bind(null,s,a,i),y=void 0,!cs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(s,a,{capture:!0,passive:y}):i.addEventListener(s,a,!0):y!==void 0?i.addEventListener(s,a,{passive:y}):i.addEventListener(s,a,!1)}function sh(i,s,a,c,y){var _=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var I=c.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=c.return;A!==null;){var x=A.tag;if((x===3||x===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=mi(I),A===null)return;if(x=A.tag,x===5||x===6||x===26||x===27){c=_=A;continue e}I=I.parentNode}}c=c.return}go(function(){var z=_,Z=Nn(a),ee=[];e:{var Y=Um.get(i);if(Y!==void 0){var K=Si,me=i;switch(i){case"keypress":if(ds(a)===0)break e;case"keydown":case"keyup":K=mu;break;case"focusin":me="focus",K=ps;break;case"focusout":me="blur",K=ps;break;case"beforeblur":case"afterblur":K=ps;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=ba;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=T;break;case Dm:case xm:case Vm:K=lu;break;case Pm:K=w;break;case"scroll":case"scrollend":K=Ma;break;case"wheel":K=J;break;case"copy":case"cut":case"paste":K=uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Gi;break;case"toggle":case"beforetoggle":K=we}var Te=(s&4)!==0,nt=!Te&&(i==="scroll"||i==="scrollend"),B=Te?Y!==null?Y+"Capture":null:Y;Te=[];for(var L=z,H;L!==null;){var j=L;if(H=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||H===null||B===null||(j=Qn(L,B),j!=null&&Te.push(rl(L,j,H))),nt)break;L=L.return}0<Te.length&&(Y=new K(Y,me,null,a,Z),ee.push({event:Y,listeners:Te}))}}if((s&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",Y&&a!==Ra&&(me=a.relatedTarget||a.fromElement)&&(mi(me)||me[hi]))break e;if((K||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(me=a.relatedTarget||a.toElement,K=z,me=me?mi(me):null,me!==null&&(nt=l(me),Te=me.tag,me!==nt||Te!==5&&Te!==27&&Te!==6)&&(me=null)):(K=null,me=z),K!==me)){if(Te=ba,j="onMouseLeave",B="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(Te=Gi,j="onPointerLeave",B="onPointerEnter",L="pointer"),nt=K==null?Y:yn(K),H=me==null?Y:yn(me),Y=new Te(j,L+"leave",K,a,Z),Y.target=nt,Y.relatedTarget=H,j=null,mi(Z)===z&&(Te=new Te(B,L+"enter",me,a,Z),Te.target=H,Te.relatedTarget=nt,j=Te),nt=j,K&&me)t:{for(Te=vC,B=K,L=me,H=0,j=B;j;j=Te(j))H++;j=0;for(var _e=L;_e;_e=Te(_e))j++;for(;0<H-j;)B=Te(B),H--;for(;0<j-H;)L=Te(L),j--;for(;H--;){if(B===L||L!==null&&B===L.alternate){Te=B;break t}B=Te(B),L=Te(L)}Te=null}else Te=null;K!==null&&i_(ee,Y,K,Te,!1),me!==null&&nt!==null&&i_(ee,nt,me,Te,!0)}}e:{if(Y=z?yn(z):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var He=Tm;else if(_m(Y))if(Em)He=bA;else{He=NA;var ye=wA}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?z&&er(z.elementType)&&(He=Tm):He=MA;if(He&&(He=He(i,z))){vm(ee,He,a,Z);break e}ye&&ye(i,Y,z),i==="focusout"&&z&&Y.type==="number"&&z.memoizedProps.value!=null&&Aa(Y,"number",Y.value)}switch(ye=z?yn(z):window,i){case"focusin":(_m(ye)||ye.contentEditable==="true")&&(lr=ye,Pf=z,Ua=null);break;case"focusout":Ua=Pf=lr=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,Mm(ee,a,Z);break;case"selectionchange":if(xA)break;case"keydown":case"keyup":Mm(ee,a,Z)}var De;if(Je)e:{switch(i){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else ar?ms(i,a)&&(Le="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Le="onCompositionStart");Le&&(Ii&&a.locale!=="ko"&&(ar||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&ar&&(De=Na()):(Ei=Z,wa="value"in Ei?Ei.value:Ei.textContent,ar=!0)),ye=sc(z,Le),0<ye.length&&(Le=new Ci(Le,i,null,a,Z),ee.push({event:Le,listeners:ye}),De?Le.data=De:(De=rr(a),De!==null&&(Le.data=De)))),(De=bn?AA(i,a):CA(i,a))&&(Le=sc(z,"onBeforeInput"),0<Le.length&&(ye=new Ci("onBeforeInput","beforeinput",null,a,Z),ee.push({event:ye,listeners:Le}),ye.data=De)),mC(ee,i,z,a,Z)}t_(ee,s)})}function rl(i,s,a){return{instance:i,listener:s,currentTarget:a}}function sc(i,s){for(var a=s+"Capture",c=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Qn(i,a),y!=null&&c.unshift(rl(i,y,_)),y=Qn(i,s),y!=null&&c.push(rl(i,y,_))),i.tag===3)return c;i=i.return}return[]}function vC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function i_(i,s,a,c,y){for(var _=s._reactName,A=[];a!==null&&a!==c;){var I=a,x=I.alternate,z=I.stateNode;if(I=I.tag,x!==null&&x===c)break;I!==5&&I!==26&&I!==27||z===null||(x=z,y?(z=Qn(a,_),z!=null&&A.unshift(rl(a,z,x))):y||(z=Qn(a,_),z!=null&&A.push(rl(a,z,x)))),a=a.return}A.length!==0&&i.push({event:s,listeners:A})}var TC=/\r\n?/g,EC=/\u0000|\uFFFD/g;function o_(i){return(typeof i=="string"?i:""+i).replace(TC,`
`).replace(EC,"")}function s_(i,s){return s=o_(s),o_(i)===s}function tt(i,s,a,c,y,_){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||cn(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&cn(i,""+c);break;case"className":_n(i,"class",c);break;case"tabIndex":_n(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":_n(i,a,c);break;case"style":Ia(i,c,_);break;case"data":if(s!=="object"){_n(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=tr(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(s!=="input"&&tt(i,s,"name",y.name,y,null),tt(i,s,"formEncType",y.formEncType,y,null),tt(i,s,"formMethod",y.formMethod,y,null),tt(i,s,"formTarget",y.formTarget,y,null)):(tt(i,s,"encType",y.encType,y,null),tt(i,s,"method",y.method,y,null),tt(i,s,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=tr(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Kn);break;case"onScroll":c!=null&&Pe("scroll",i);break;case"onScrollEnd":c!=null&&Pe("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=tr(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Pe("beforetoggle",i),Pe("toggle",i),Zs(i,"popover",c);break;case"xlinkActuate":Ct(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ct(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ct(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ct(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ct(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ct(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ct(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ct(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ct(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Zs(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=su.get(a)||a,Zs(i,a,c))}}function rh(i,s,a,c,y,_){switch(a){case"style":Ia(i,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof c=="string"?cn(i,c):(typeof c=="number"||typeof c=="bigint")&&cn(i,""+c);break;case"onScroll":c!=null&&Pe("scroll",i);break;case"onScrollEnd":c!=null&&Pe("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_a.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),s=a.slice(2,y?a.length-7:void 0),_=i[Ot]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(s,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):Zs(i,a,c)}}}function Kt(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",i),Pe("load",i);var c=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:tt(i,s,_,A,a,null)}}y&&tt(i,s,"srcSet",a.srcSet,a,null),c&&tt(i,s,"src",a.src,a,null);return;case"input":Pe("invalid",i);var I=_=A=y=null,x=null,z=null;for(c in a)if(a.hasOwnProperty(c)){var Z=a[c];if(Z!=null)switch(c){case"name":y=Z;break;case"type":A=Z;break;case"checked":x=Z;break;case"defaultChecked":z=Z;break;case"value":_=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(o(137,s));break;default:tt(i,s,c,Z,a,null)}}nu(i,_,I,x,z,A,y,!1);return;case"select":Pe("invalid",i),c=A=_=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":A=I;break;case"multiple":c=I;default:tt(i,s,y,I,a,null)}s=_,a=A,i.multiple=!!c,s!=null?fo(i,!!c,s,!1):a!=null&&fo(i,!!c,a,!0);return;case"textarea":Pe("invalid",i),_=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":c=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(91));break;default:tt(i,s,A,I,a,null)}ho(i,c,y,_);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(c=a[x],c!=null))switch(x){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:tt(i,s,x,c,a,null)}return;case"dialog":Pe("beforetoggle",i),Pe("toggle",i),Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":Pe("load",i);break;case"video":case"audio":for(c=0;c<sl.length;c++)Pe(sl[c],i);break;case"image":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"embed":case"source":case"link":Pe("error",i),Pe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(c=a[z],c!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:tt(i,s,z,c,a,null)}return;default:if(er(s)){for(Z in a)a.hasOwnProperty(Z)&&(c=a[Z],c!==void 0&&rh(i,s,Z,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&tt(i,s,I,c,a,null))}function SC(i,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,I=null,x=null,z=null,Z=null;for(K in a){var ee=a[K];if(a.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":x=ee;default:c.hasOwnProperty(K)||tt(i,s,K,null,c,ee)}}for(var Y in c){var K=c[Y];if(ee=a[Y],c.hasOwnProperty(Y)&&(K!=null||ee!=null))switch(Y){case"type":_=K;break;case"name":y=K;break;case"checked":z=K;break;case"defaultChecked":Z=K;break;case"value":A=K;break;case"defaultValue":I=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,s));break;default:K!==ee&&tt(i,s,Y,K,c,ee)}}js(i,A,I,x,z,Z,_,y);return;case"select":K=A=I=Y=null;for(_ in a)if(x=a[_],a.hasOwnProperty(_)&&x!=null)switch(_){case"value":break;case"multiple":K=x;default:c.hasOwnProperty(_)||tt(i,s,_,null,c,x)}for(y in c)if(_=c[y],x=a[y],c.hasOwnProperty(y)&&(_!=null||x!=null))switch(y){case"value":Y=_;break;case"defaultValue":I=_;break;case"multiple":A=_;default:_!==x&&tt(i,s,y,_,c,x)}s=I,a=A,c=K,Y!=null?fo(i,!!a,Y,!1):!!c!=!!a&&(s!=null?fo(i,!!a,s,!0):fo(i,!!a,a?[]:"",!1));return;case"textarea":K=Y=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:tt(i,s,I,null,c,y)}for(A in c)if(y=c[A],_=a[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":Y=y;break;case"defaultValue":K=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==_&&tt(i,s,A,y,c,_)}iu(i,Y,K);return;case"option":for(var me in a)if(Y=a[me],a.hasOwnProperty(me)&&Y!=null&&!c.hasOwnProperty(me))switch(me){case"selected":i.selected=!1;break;default:tt(i,s,me,null,c,Y)}for(x in c)if(Y=c[x],K=a[x],c.hasOwnProperty(x)&&Y!==K&&(Y!=null||K!=null))switch(x){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:tt(i,s,x,Y,c,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)Y=a[Te],a.hasOwnProperty(Te)&&Y!=null&&!c.hasOwnProperty(Te)&&tt(i,s,Te,null,c,Y);for(z in c)if(Y=c[z],K=a[z],c.hasOwnProperty(z)&&Y!==K&&(Y!=null||K!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(o(137,s));break;default:tt(i,s,z,Y,c,K)}return;default:if(er(s)){for(var nt in a)Y=a[nt],a.hasOwnProperty(nt)&&Y!==void 0&&!c.hasOwnProperty(nt)&&rh(i,s,nt,void 0,c,Y);for(Z in c)Y=c[Z],K=a[Z],!c.hasOwnProperty(Z)||Y===K||Y===void 0&&K===void 0||rh(i,s,Z,Y,c,K);return}}for(var B in a)Y=a[B],a.hasOwnProperty(B)&&Y!=null&&!c.hasOwnProperty(B)&&tt(i,s,B,null,c,Y);for(ee in c)Y=c[ee],K=a[ee],!c.hasOwnProperty(ee)||Y===K||Y==null&&K==null||tt(i,s,ee,Y,c,K)}function r_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],_=y.transferSize,A=y.initiatorType,I=y.duration;if(_&&I&&r_(A)){for(A=0,I=y.responseEnd,c+=1;c<a.length;c++){var x=a[c],z=x.startTime;if(z>I)break;var Z=x.transferSize,ee=x.initiatorType;Z&&r_(ee)&&(x=x.responseEnd,A+=Z*(x<I?1:(I-z)/(x-z)))}if(--c,s+=8*(_+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var ah=null,lh=null;function rc(i){return i.nodeType===9?i:i.ownerDocument}function a_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l_(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function uh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ch=null;function CC(){var i=window.event;return i&&i.type==="popstate"?i===ch?!1:(ch=i,!0):(ch=null,!1)}var u_=typeof setTimeout=="function"?setTimeout:void 0,IC=typeof clearTimeout=="function"?clearTimeout:void 0,c_=typeof Promise=="function"?Promise:void 0,RC=typeof queueMicrotask=="function"?queueMicrotask:typeof c_<"u"?function(i){return c_.resolve(null).then(i).catch(wC)}:u_;function wC(i){setTimeout(function(){throw i})}function Lo(i){return i==="head"}function f_(i,s){var a=s,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),Ur(s);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")al(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,al(a);for(var _=a.firstChild;_;){var A=_.nextSibling,I=_.nodeName;_[pi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&al(i.ownerDocument.body);a=y}while(a);Ur(s)}function d_(i,s){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function fh(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":fh(a),Ws(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function NC(i,s,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[pi])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=On(i.nextSibling),i===null)break}return null}function MC(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=On(i.nextSibling),i===null))return null;return i}function h_(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=On(i.nextSibling),i===null))return null;return i}function dh(i){return i.data==="$?"||i.data==="$~"}function hh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function bC(i,s){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||a.readyState!=="loading")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function On(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var ph=null;function p_(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(s===0)return On(i.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}i=i.nextSibling}return null}function m_(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return i;s--}else a!=="/$"&&a!=="/&"||s++}i=i.previousSibling}return null}function g_(i,s,a){switch(s=rc(a),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function al(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Ws(i)}var kn=new Map,y_=new Set;function ac(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var to=le.d;le.d={f:DC,r:xC,D:VC,C:PC,L:UC,m:LC,X:kC,S:OC,M:qC};function DC(){var i=to.f(),s=Zu();return i||s}function xC(i){var s=wn(i);s!==null&&s.tag===5&&s.type==="form"?Pg(s):to.r(i)}var xr=typeof document>"u"?null:document;function __(i,s,a){var c=xr;if(c&&typeof s=="string"&&s){var y=un(s);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),y_.has(y)||(y_.add(y),i={rel:i,crossOrigin:a,href:s},c.querySelector(y)===null&&(s=c.createElement("link"),Kt(s,"link",i),At(s),c.head.appendChild(s)))}}function VC(i){to.D(i),__("dns-prefetch",i,null)}function PC(i,s){to.C(i,s),__("preconnect",i,s)}function UC(i,s,a){to.L(i,s,a);var c=xr;if(c&&i&&s){var y='link[rel="preload"][as="'+un(s)+'"]';s==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+un(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+un(a.imageSizes)+'"]')):y+='[href="'+un(i)+'"]';var _=y;switch(s){case"style":_=Vr(i);break;case"script":_=Pr(i)}kn.has(_)||(i=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),kn.set(_,i),c.querySelector(y)!==null||s==="style"&&c.querySelector(ll(_))||s==="script"&&c.querySelector(ul(_))||(s=c.createElement("link"),Kt(s,"link",i),At(s),c.head.appendChild(s)))}}function LC(i,s){to.m(i,s);var a=xr;if(a&&i){var c=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+un(c)+'"][href="'+un(i)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Pr(i)}if(!kn.has(_)&&(i=E({rel:"modulepreload",href:i},s),kn.set(_,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ul(_)))return}c=a.createElement("link"),Kt(c,"link",i),At(c),a.head.appendChild(c)}}}function OC(i,s,a){to.S(i,s,a);var c=xr;if(c&&i){var y=gi(c).hoistableStyles,_=Vr(i);s=s||"default";var A=y.get(_);if(!A){var I={loading:0,preload:null};if(A=c.querySelector(ll(_)))I.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":s},a),(a=kn.get(_))&&mh(i,a);var x=A=c.createElement("link");At(x),Kt(x,"link",i),x._p=new Promise(function(z,Z){x.onload=z,x.onerror=Z}),x.addEventListener("load",function(){I.loading|=1}),x.addEventListener("error",function(){I.loading|=2}),I.loading|=4,lc(A,s,c)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(_,A)}}}function kC(i,s){to.X(i,s);var a=xr;if(a&&i){var c=gi(a).hoistableScripts,y=Pr(i),_=c.get(y);_||(_=a.querySelector(ul(y)),_||(i=E({src:i,async:!0},s),(s=kn.get(y))&&gh(i,s),_=a.createElement("script"),At(_),Kt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function qC(i,s){to.M(i,s);var a=xr;if(a&&i){var c=gi(a).hoistableScripts,y=Pr(i),_=c.get(y);_||(_=a.querySelector(ul(y)),_||(i=E({src:i,async:!0,type:"module"},s),(s=kn.get(y))&&gh(i,s),_=a.createElement("script"),At(_),Kt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function v_(i,s,a,c){var y=(y=be.current)?ac(y):null;if(!y)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Vr(a.href),a=gi(y).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Vr(a.href);var _=gi(y).hoistableStyles,A=_.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=y.querySelector(ll(i)))&&!_._p&&(A.instance=_,A.state.loading=5),kn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},kn.set(i,a),_||GC(y,i,a,A.state))),s&&c===null)throw Error(o(528,""));return A}if(s&&c!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Pr(a),a=gi(y).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function Vr(i){return'href="'+un(i)+'"'}function ll(i){return'link[rel="stylesheet"]['+i+"]"}function T_(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function GC(i,s,a,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Kt(s,"link",a),At(s),i.head.appendChild(s))}function Pr(i){return'[src="'+un(i)+'"]'}function ul(i){return"script[async]"+i}function E_(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+un(a.href)+'"]');if(c)return s.instance=c,At(c),c;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),At(c),Kt(c,"style",y),lc(c,a.precedence,i),s.instance=c;case"stylesheet":y=Vr(a.href);var _=i.querySelector(ll(y));if(_)return s.state.loading|=4,s.instance=_,At(_),_;c=T_(a),(y=kn.get(y))&&mh(c,y),_=(i.ownerDocument||i).createElement("link"),At(_);var A=_;return A._p=new Promise(function(I,x){A.onload=I,A.onerror=x}),Kt(_,"link",c),s.state.loading|=4,lc(_,a.precedence,i),s.instance=_;case"script":return _=Pr(a.src),(y=i.querySelector(ul(_)))?(s.instance=y,At(y),y):(c=a,(y=kn.get(_))&&(c=E({},a),gh(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),At(y),Kt(y,"link",c),i.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,lc(c,a.precedence,i));return s.instance}function lc(i,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var I=c[A];if(I.dataset.precedence===s)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function mh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function gh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var uc=null;function S_(i,s,a){if(uc===null){var c=new Map,y=uc=new Map;y.set(a,c)}else y=uc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[pi]||_[St]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(s)||"";A=i+A;var I=c.get(A);I?I.push(_):c.set(A,[_])}}return c}function A_(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function BC(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function C_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function FC(i,s,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Vr(c.href),_=s.querySelector(ll(y));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=cc.bind(i),s.then(i,i)),a.state.loading|=4,a.instance=_,At(_);return}_=s.ownerDocument||s,c=T_(c),(y=kn.get(y))&&mh(c,y),_=_.createElement("link"),At(_);var A=_;A._p=new Promise(function(I,x){A.onload=I,A.onerror=x}),Kt(_,"link",c),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=cc.bind(i),s.addEventListener("load",a),s.addEventListener("error",a))}}var yh=0;function HC(i,s){return i.stylesheets&&i.count===0&&dc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&dc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+s);0<i.imgBytes&&yh===0&&(yh=62500*AC());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&dc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>yh?50:800)+s);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)dc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var fc=null;function dc(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,fc=new Map,s.forEach(zC,i),fc=null,cc.call(i))}function zC(i,s){if(!(s.state.loading&4)){var a=fc.get(i);if(a)var c=a.get(null);else{a=new Map,fc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=s.instance,A=y.getAttribute("data-precedence"),_=a.get(A)||c,_===c&&a.set(null,y),a.set(A,y),this.count++,c=cc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),s.state.loading|=4}}var cl={$$typeof:Q,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function YC(i,s,a,c,y,_,A,I,x){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.hiddenUpdates=di(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function I_(i,s,a,c,y,_,A,I,x,z,Z,ee){return i=new YC(i,s,a,A,x,z,Z,ee,I),s=1,_===!0&&(s|=24),_=Tn(3,null,null,s),i.current=_,_.stateNode=i,s=Xf(),s.refCount++,i.pooledCache=s,s.refCount++,_.memoizedState={element:c,isDehydrated:a,cache:s},ed(_),i}function R_(i){return i?(i=fr,i):fr}function w_(i,s,a,c,y,_){y=R_(y),c.context===null?c.context=y:c.pendingContext=y,c=Io(s),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=Ro(i,c,s),a!==null&&(mn(a,i,s),Fa(a,i,s))}function N_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function _h(i,s){N_(i,s),(i=i.alternate)&&N_(i,s)}function M_(i){if(i.tag===13||i.tag===31){var s=_s(i,67108864);s!==null&&mn(s,i,67108864),_h(i,67108864)}}function b_(i){if(i.tag===13||i.tag===31){var s=In();s=rs(s);var a=_s(i,s);a!==null&&mn(a,i,s),_h(i,s)}}var hc=!0;function JC(i,s,a,c){var y=W.T;W.T=null;var _=le.p;try{le.p=2,vh(i,s,a,c)}finally{le.p=_,W.T=y}}function KC(i,s,a,c){var y=W.T;W.T=null;var _=le.p;try{le.p=8,vh(i,s,a,c)}finally{le.p=_,W.T=y}}function vh(i,s,a,c){if(hc){var y=Th(c);if(y===null)sh(i,s,c,pc,a),x_(i,c);else if($C(y,i,s,a,c))c.stopPropagation();else if(x_(i,c),s&4&&-1<QC.indexOf(i)){for(;y!==null;){var _=wn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ci(_.pendingLanes);if(A!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var x=1<<31-mt(A);I.entanglements[1]|=x,A&=~x}Mi(_),(Ke&6)===0&&(Xu=on()+500,ol(0))}}break;case 31:case 13:I=_s(_,2),I!==null&&mn(I,_,2),Zu(),_h(_,2)}if(_=Th(c),_===null&&sh(i,s,c,pc,a),_===y)break;y=_}y!==null&&c.stopPropagation()}else sh(i,s,c,null,a)}}function Th(i){return i=Nn(i),Eh(i)}var pc=null;function Eh(i){if(pc=null,i=mi(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=u(s),i!==null)return i;i=null}else if(a===31){if(i=d(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return pc=i,null}function D_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ns()){case ha:return 2;case pa:return 8;case uo:case wf:return 32;case Jl:return 268435456;default:return 32}default:return 32}}var Sh=!1,Oo=null,ko=null,qo=null,fl=new Map,dl=new Map,Go=[],QC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function x_(i,s){switch(i){case"focusin":case"focusout":Oo=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":qo=null;break;case"pointerover":case"pointerout":fl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(s.pointerId)}}function hl(i,s,a,c,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},s!==null&&(s=wn(s),s!==null&&M_(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),i)}function $C(i,s,a,c,y){switch(s){case"focusin":return Oo=hl(Oo,i,s,a,c,y),!0;case"dragenter":return ko=hl(ko,i,s,a,c,y),!0;case"mouseover":return qo=hl(qo,i,s,a,c,y),!0;case"pointerover":var _=y.pointerId;return fl.set(_,hl(fl.get(_)||null,i,s,a,c,y)),!0;case"gotpointercapture":return _=y.pointerId,dl.set(_,hl(dl.get(_)||null,i,s,a,c,y)),!0}return!1}function V_(i){var s=mi(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){i.blockedOn=s,Yn(i.priority,function(){b_(a)});return}}else if(s===31){if(s=d(a),s!==null){i.blockedOn=s,Yn(i.priority,function(){b_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function mc(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=Th(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);Ra=c,a.target.dispatchEvent(c),Ra=null}else return s=wn(a),s!==null&&M_(s),i.blockedOn=a,!1;s.shift()}return!0}function P_(i,s,a){mc(i)&&a.delete(s)}function XC(){Sh=!1,Oo!==null&&mc(Oo)&&(Oo=null),ko!==null&&mc(ko)&&(ko=null),qo!==null&&mc(qo)&&(qo=null),fl.forEach(P_),dl.forEach(P_)}function gc(i,s){i.blockedOn===s&&(i.blockedOn=null,Sh||(Sh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,XC)))}var yc=null;function U_(i){yc!==i&&(yc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){yc===i&&(yc=null);for(var s=0;s<i.length;s+=3){var a=i[s],c=i[s+1],y=i[s+2];if(typeof c!="function"){if(Eh(c||a)===null)continue;break}var _=wn(a);_!==null&&(i.splice(s,3),s-=3,Td(_,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function Ur(i){function s(x){return gc(x,i)}Oo!==null&&gc(Oo,i),ko!==null&&gc(ko,i),qo!==null&&gc(qo,i),fl.forEach(s),dl.forEach(s);for(var a=0;a<Go.length;a++){var c=Go[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Go.length&&(a=Go[0],a.blockedOn===null);)V_(a),a.blockedOn===null&&Go.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],_=a[c+1],A=y[Ot]||null;if(typeof _=="function")A||U_(a);else if(A){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[Ot]||null)I=A.formAction;else if(Eh(y)!==null)continue}else I=A.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),U_(a)}}}function L_(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function Ah(i){this._internalRoot=i}_c.prototype.render=Ah.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,c=In();w_(a,c,i,s,null,null)},_c.prototype.unmount=Ah.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;w_(i.current,2,null,i,null,null),Zu(),s[hi]=null}};function _c(i){this._internalRoot=i}_c.prototype.unstable_scheduleHydration=function(i){if(i){var s=Zl();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Go.length&&s!==0&&s<Go[a].priority;a++);Go.splice(a,0,i),a===0&&V_(i)}};var O_=e.version;if(O_!=="19.2.4")throw Error(o(527,O_,"19.2.4"));le.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=m(s),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var WC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{Hn=vc.inject(WC),Ft=vc}catch{}}return ml.createRoot=function(i,s){if(!r(i))throw Error(o(299));var a=!1,c="",y=zg,_=Yg,A=Jg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=I_(i,1,!1,null,null,a,c,null,y,_,A,L_),i[hi]=s.current,oh(i),new Ah(s)},ml.hydrateRoot=function(i,s,a){if(!r(i))throw Error(o(299));var c=!1,y="",_=zg,A=Yg,I=Jg,x=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(x=a.formState)),s=I_(i,1,!0,s,a??null,c,y,x,_,A,I,L_),s.context=R_(null),a=s.current,c=In(),c=rs(c),y=Io(c),y.callback=null,Ro(a,y,c),a=c,s.current.lanes=a,os(s,a),Mi(s),i[hi]=s.current,oh(i),new _c(s)},ml.version="19.2.4",ml}var K_;function lI(){if(K_)return Rh.exports;K_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rh.exports=aI(),Rh.exports}var uI=lI();const cI=GE(uI);var bi=(n=>(n.INITIAL_SETUP="INITIAL_SETUP",n.MASTER_LOGIN="MASTER_LOGIN",n.EMAIL_STORAGE="EMAIL_STORAGE",n))(bi||{});const fI=({onComplete:n})=>{const[e,t]=Qt.useState(""),[o,r]=Qt.useState(""),[l,u]=Qt.useState(""),d=g=>{if(g.preventDefault(),e.length<6){u("A senha deve ter pelo menos 6 caracteres.");return}if(e!==o){u("As senhas no coincidem.");return}n(e)};return re.jsxs("div",{className:"p-8",children:[re.jsxs("div",{className:"text-center mb-8",children:[re.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:re.jsx("i",{className:"fa-solid fa-key text-blue-600 text-2xl"})}),re.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Primeiro Acesso"}),re.jsx("p",{className:"text-gray-500 mt-2",children:"Crie uma senha mestre para proteger seu acesso ao aplicativo."})]}),re.jsxs("form",{onSubmit:d,className:"space-y-4",children:[re.jsxs("div",{children:[re.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nova Senha"}),re.jsx("input",{type:"password",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",placeholder:"",value:e,onChange:g=>t(g.target.value),required:!0})]}),re.jsxs("div",{children:[re.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Senha"}),re.jsx("input",{type:"password",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",placeholder:"",value:o,onChange:g=>r(g.target.value),required:!0})]}),l&&re.jsx("p",{className:"text-red-500 text-sm mt-2",children:l}),re.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors mt-6",children:"Configurar Acesso"})]})]})},dI=({onSuccess:n})=>{const[e,t]=Qt.useState(""),[o,r]=Qt.useState(""),l=u=>{u.preventDefault();const d=localStorage.getItem("master_password");e===d?n():(r("Senha incorreta. Tente novamente."),t(""))};return re.jsxs("div",{className:"p-8",children:[re.jsxs("div",{className:"text-center mb-8",children:[re.jsx("div",{className:"bg-indigo-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:re.jsx("i",{className:"fa-solid fa-lock text-indigo-600 text-2xl"})}),re.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Cofre de Acesso"}),re.jsx("p",{className:"text-gray-500 mt-2",children:"Insira sua senha mestre para continuar."})]}),re.jsxs("form",{onSubmit:l,className:"space-y-4",children:[re.jsxs("div",{children:[re.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha Mestre"}),re.jsx("input",{autoFocus:!0,type:"password",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all",placeholder:"",value:e,onChange:u=>t(u.target.value),required:!0})]}),o&&re.jsx("p",{className:"text-red-500 text-sm mt-2",children:o}),re.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-lg transition-colors mt-6",children:"Desbloquear"})]}),re.jsx("div",{className:"mt-6 text-center",children:re.jsx("button",{onClick:()=>{confirm("Isso apagar sua senha mestre e todos os dados. Continuar?")&&(localStorage.clear(),window.location.reload())},className:"text-xs text-gray-400 hover:text-red-500 transition-colors",children:"Redefinir aplicativo"})})]})},Q_=({email:n,className:e=""})=>{const o=(d=>{var m;const g=(m=d.split("@")[1])==null?void 0:m.toLowerCase();return g?g.includes("gmail")||g.includes("googlemail")?"gmail":g.includes("outlook")||g.includes("hotmail")||g.includes("live")||g.includes("msn")?"outlook":g.includes("yahoo")||g.includes("ymail")?"yahoo":g.includes("icloud")||g.includes("apple")||g.includes("me.com")?"apple":g.includes("proton")?"proton":"generic":"generic"})(n),r={gmail:{icon:"fa-brands fa-google",color:"text-red-500"},outlook:{icon:"fa-brands fa-microsoft",color:"text-blue-600"},yahoo:{icon:"fa-brands fa-yahoo",color:"text-purple-600"},apple:{icon:"fa-brands fa-apple",color:"text-slate-800"},proton:{icon:"fa-solid fa-shield-halved",color:"text-indigo-600"},generic:{icon:"fa-solid fa-envelope",color:"text-gray-400"}},{icon:l,color:u}=r[o];return re.jsx("div",{className:`transition-all duration-300 flex items-center justify-center ${e}`,children:re.jsx("i",{className:`${l} ${u} text-2xl`})})};var hI={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let pI,mI;function gI(){return{geminiUrl:pI,vertexUrl:mI}}function yI(n,e,t,o){var r,l;if(!(n!=null&&n.baseUrl)){const u=gI();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(l=u.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ro{}function ce(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const g=n[d];if(Array.isArray(t))for(let m=0;m<g.length;m++){const v=g[m];h(v,e.slice(l+1),t[m])}else for(const m of g)h(m,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const g=n[d];h(g[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return t;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(o+1),t)):t}else return t}else n=n[r]}return n}catch(o){if(o instanceof TypeError)return t;throw o}}function _I(n,e){for(const[t,o]of Object.entries(e)){const r=t.split("."),l=o.split("."),u=new Set;let d=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){d=g;break}if(d!==-1&&l.length>d)for(let g=d;g<l.length;g++){const m=l[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}Hh(n,r,l,0,u)}}function Hh(n,e,t,o,r){if(o>=e.length||typeof n!="object"||n===null)return;const l=e[o];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const g of d[u])Hh(g,e,t,o+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!r.has(m)),g={};for(const m of d)g[m]=u[m];for(const[m,v]of Object.entries(g)){const E=[];for(const S of t.slice(o))S==="*"?E.push(m):E.push(S);h(u,E,v)}for(const m of d)delete u[m]}}else{const u=n;l in u&&Hh(u[l],e,t,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vI(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const o=f(n,["resourceName"]);return o!=null&&h(e,["_url","resourceName"],o),e}function TI(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],SI(u)),e}function EI(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],AI(u)),e}function SI(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>CI(u))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function AI(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>II(u))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function CI(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],DI(t)),e}function II(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],xI(t)),e}function RI(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function wI(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function NI(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],MI(u)),e}function MI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function BE(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],bI(u)),e}function bI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function DI(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const o=f(n,["encodedVideo"]);o!=null&&h(e,["videoBytes"],wp(o));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function xI(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],wp(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})($_||($_={}));var X_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(X_||(X_={}));var W_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(W_||(W_={}));var ti;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ti||(ti={}));var Z_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Z_||(Z_={}));var j_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(j_||(j_={}));var ev;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ev||(ev={}));var tv;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(tv||(tv={}));var nv;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(nv||(nv={}));var iv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(iv||(iv={}));var ov;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(ov||(ov={}));var sv;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(sv||(sv={}));var rv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(rv||(rv={}));var av;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(av||(av={}));var lv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(lv||(lv={}));var uv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(uv||(uv={}));var cv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(cv||(cv={}));var fv;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(fv||(fv={}));var dv;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(dv||(dv={}));var hv;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(hv||(hv={}));var pv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(pv||(pv={}));var kc;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(kc||(kc={}));var mv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(mv||(mv={}));var gv;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(gv||(gv={}));var yv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(yv||(yv={}));var zh;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zh||(zh={}));var _v;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(_v||(_v={}));var vv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(vv||(vv={}));var Yh;(function(n){n.COLLECTION="COLLECTION"})(Yh||(Yh={}));var Tv;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Tv||(Tv={}));var Ev;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ev||(Ev={}));var Sv;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Sv||(Sv={}));var Av;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Av||(Av={}));var Cv;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Cv||(Cv={}));var Iv;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Iv||(Iv={}));var Rv;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Rv||(Rv={}));var wv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wv||(wv={}));var Nv;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Nv||(Nv={}));var Mv;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Mv||(Mv={}));var bv;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(bv||(bv={}));var Dv;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Dv||(Dv={}));var xv;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(xv||(xv={}));var Vv;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(Vv||(Vv={}));var Pv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Pv||(Pv={}));var Uv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Uv||(Uv={}));var Lv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(Lv||(Lv={}));var Ov;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ov||(Ov={}));var kv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(kv||(kv={}));var qv;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(qv||(qv={}));var Gv;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(Gv||(Gv={}));var Bv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Bv||(Bv={}));var Fv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Fv||(Fv={}));var Hv;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Hv||(Hv={}));var zv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(zv||(zv={}));var Yv;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Yv||(Yv={}));var Jv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Jv||(Jv={}));var Br;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Br||(Br={}));class Jh{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class gl{get text(){var e,t,o,r,l,u,d,g;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const S of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[R,V]of Object.entries(S))R!=="text"&&R!=="thought"&&R!=="thoughtSignature"&&(V!==null||V!==void 0)&&E.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,o,r,l,u,d,g;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[S,R]of Object.entries(E))S!=="inlineData"&&(R!==null||R!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,o,r,l,u,d,g;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,o,r,l,u,d,g,m;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,o,r,l,u,d,g,m;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Kv{}class Qv{}class VI{}class PI{}class UI{}class LI{}class $v{}class Xv{}class Wv{}class OI{}class qc{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new qc;let r;const l=e;return t?r=EI(l):r=TI(l),Object.assign(o,r),o}}class Zv{}class jv{}class eT{}class tT{}class kI{}class qI{}class GI{}class Np{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new Np,l=NI(e);return Object.assign(o,l),o}}class BI{}class FI{}class HI{}class zI{}class nT{}class YI{get text(){var e,t,o;let r="",l=!1;const u=[];for(const d of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[g,m]of Object.entries(d))g!=="text"&&g!=="thought"&&m!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,o;let r="";const l=[];for(const u of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class JI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Mp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new Mp,l=BE(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ye(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function FE(n,e){const t=Ye(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function HE(n){return Array.isArray(n)?n.map(e=>Gc(e)):[Gc(n)]}function Gc(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function zE(n){const e=Gc(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function YE(n){const e=Gc(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function iT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function JE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>iT(e)):[iT(n)]}function Kh(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function oT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function sT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function nn(n){if(n==null)throw new Error("ContentUnion is required");return Kh(n)?n:{role:"user",parts:JE(n)}}function bp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=nn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=nn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>nn(t)):[nn(e)]}function Bn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(oT(n)||sT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[nn(n)]}const e=[],t=[],o=Kh(n[0]);for(const r of n){const l=Kh(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(oT(r)||sT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:JE(t)}),e}function KI(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(ti).includes(t[0].toUpperCase())?t[0].toUpperCase():ti.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(ti).includes(o.toUpperCase())?o.toUpperCase():ti.TYPE_UNSPECIFIED})}}function Hr(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&KI(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(ti).includes(d.toUpperCase())?d.toUpperCase():ti.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Hr(d);else if(o.includes(u)){const g=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}g.push(Hr(m))}e[u]=g}else if(r.includes(u)){const g={};for(const[m,v]of Object.entries(d))g[m]=Hr(v);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Dp(n){return Hr(n)}function xp(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Vp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ta(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Hr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Hr(e.response));return n}function na(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function QI(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function ao(n,e){if(typeof e!="string")throw new Error("name must be a string");return QI(n,e,"cachedContents")}function KE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function jo(n){return wp(n)}function $I(n){return n!=null&&typeof n=="object"&&"name"in n}function XI(n){return n!=null&&typeof n=="object"&&"video"in n}function WI(n){return n!=null&&typeof n=="object"&&"uri"in n}function QE(n){var e;let t;if($I(n)&&(t=n.name),!(WI(n)&&(t=n.uri,t===void 0))&&!(XI(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function $E(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function XE(n){for(const e of["models","tunedModels","publisherModels"])if(ZI(n,e))return n[e];return[]}function ZI(n,e){return n!==null&&typeof n=="object"&&e in n}function jI(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function eR(n,e={}){const t=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const u=jI(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function WE(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function tR(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ZE(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ia(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function jE(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nR(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const o=f(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>LR(u))),h(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["inlinedEmbedContentResponses"],l)}return e}function iR(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const o=f(n,["gcsDestination","outputUriPrefix"]);o!=null&&h(e,["gcsUri"],o);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function oR(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const o=f(n,["gcsUri"]);o!=null&&h(e,["gcsDestination","outputUriPrefix"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function bc(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata","displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["metadata","state"]);r!=null&&h(e,["state"],jE(r));const l=f(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(n,["metadata","model"]);g!=null&&h(e,["model"],g);const m=f(n,["metadata","output"]);return m!=null&&h(e,["dest"],nR(ZE(m))),e}function Qh(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["state"]);r!=null&&h(e,["state"],jE(r));const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["createTime"]);u!=null&&h(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(e,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&h(e,["model"],v);const E=f(n,["inputConfig"]);E!=null&&h(e,["src"],sR(E));const S=f(n,["outputConfig"]);S!=null&&h(e,["dest"],iR(ZE(S)));const R=f(n,["completionStats"]);return R!=null&&h(e,["completionStats"],R),e}function sR(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const o=f(n,["gcsSource","uris"]);o!=null&&h(e,["gcsUri"],o);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function rR(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&h(t,["fileName"],o);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>UR(n,u))),h(t,["requests","requests"],l)}return t}function aR(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const o=f(n,["gcsUri"]);o!=null&&h(e,["gcsSource","uris"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function lR(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function uR(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ia(n,o)),t}function cR(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ia(n,o)),t}function fR(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const o=f(n,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],dR(o));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const m=f(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),h(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function dR(n){const e={},t=f(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["citations"],o)}return e}function e0(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>HR(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function hR(n,e){const t={},o=f(n,["displayName"]);if(e!==void 0&&o!=null&&h(e,["batch","displayName"],o),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function pR(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const r=f(n,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],oR(tR(r))),t}function rT(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ye(n,o));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],rR(n,WE(n,r)));const l=f(e,["config"]);return l!=null&&hR(l,t),t}function mR(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],Ye(n,o));const r=f(e,["src"]);r!=null&&h(t,["inputConfig"],aR(WE(n,r)));const l=f(e,["config"]);return l!=null&&pR(l,t),t}function gR(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&h(e,["batch","displayName"],o),t}function yR(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ye(n,o));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],CR(n,r));const l=f(e,["config"]);return l!=null&&gR(l,t),t}function _R(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ia(n,o)),t}function vR(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ia(n,o)),t}function TR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function ER(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function SR(n,e){const t={},o=f(e,["contents"]);if(o!=null){let l=bp(n,o);Array.isArray(l)&&(l=l.map(u=>u)),h(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(h(t,["_self"],AR(r,t)),_I(t,{"requests[].*":"requests[].request.*"})),t}function AR(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function CR(n,e){const t={},o=f(e,["fileName"]);o!=null&&h(t,["file_name"],o);const r=f(e,["inlinedRequests"]);return r!=null&&h(t,["requests"],SR(n,r)),t}function IR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function RR(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wR(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&h(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function NR(n,e,t){const o={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],e0(nn(r)));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(o,["topP"],u);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(o,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&h(o,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&h(o,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&h(o,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&h(o,["presencePenalty"],R);const V=f(e,["frequencyPenalty"]);V!=null&&h(o,["frequencyPenalty"],V);const G=f(e,["seed"]);G!=null&&h(o,["seed"],G);const O=f(e,["responseMimeType"]);O!=null&&h(o,["responseMimeType"],O);const $=f(e,["responseSchema"]);$!=null&&h(o,["responseSchema"],Dp($));const oe=f(e,["responseJsonSchema"]);if(oe!=null&&h(o,["responseJsonSchema"],oe),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=f(e,["safetySettings"]);if(t!==void 0&&Q!=null){let D=Q;Array.isArray(D)&&(D=D.map(Me=>zR(Me))),h(t,["safetySettings"],D)}const se=f(e,["tools"]);if(t!==void 0&&se!=null){let D=na(se);Array.isArray(D)&&(D=D.map(Me=>JR(ta(Me)))),h(t,["tools"],D)}const X=f(e,["toolConfig"]);if(t!==void 0&&X!=null&&h(t,["toolConfig"],YR(X)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=f(e,["cachedContent"]);t!==void 0&&fe!=null&&h(t,["cachedContent"],ao(n,fe));const b=f(e,["responseModalities"]);b!=null&&h(o,["responseModalities"],b);const M=f(e,["mediaResolution"]);M!=null&&h(o,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&h(o,["speechConfig"],xp(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&h(o,["thinkingConfig"],U);const P=f(e,["imageConfig"]);P!=null&&h(o,["imageConfig"],PR(P));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&h(o,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function MR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>fR(m))),h(e,["candidates"],g)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function bR(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ia(n,o)),t}function DR(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ia(n,o)),t}function xR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function VR(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function PR(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const o=f(n,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function UR(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["request","model"],Ye(n,o));const r=f(e,["contents"]);if(r!=null){let d=Bn(r);Array.isArray(d)&&(d=d.map(g=>e0(g))),h(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&h(t,["request","generationConfig"],NR(n,u,f(t,["request"],{}))),t}function LR(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],MR(t));const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["error"]);return r!=null&&h(e,["error"],r),e}function OR(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function kR(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function qR(n){const e={},t=f(n,["config"]);return t!=null&&OR(t,e),e}function GR(n){const e={},t=f(n,["config"]);return t!=null&&kR(t,e),e}function BR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>bc(u))),h(e,["batchJobs"],l)}return e}function FR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Qh(u))),h(e,["batchJobs"],l)}return e}function HR(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],IR(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],RR(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],lR(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function zR(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function YR(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],wR(o)),e}function JR(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],xR(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],VR(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var no;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(no||(no={}));class Gs{constructor(e,t,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,r)}init(e,t,o){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!o||Object.keys(o).length===0?u={config:{}}:typeof o=="object"?u=Object.assign({},o):u=o,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KR extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Gs(no.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=rT(this.apiClient,e),o=t._url,r=ce("{model}:batchGenerateContent",o),d=t.batch.inputConfig.requests,g=d.requests,m=[];for(const v of g){const E=Object.assign({},v);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const R=E.request;R.systemInstruction=S,E.request=R}m.push(E)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(u)o.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=mR(this.apiClient,e);return d=ce("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Qh(v))}else{const m=rT(this.apiClient,e);return d=ce("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>bc(v))}}async createEmbeddingsInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=yR(this.apiClient,e);return l=ce("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>bc(g))}}async get(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=DR(this.apiClient,e);return d=ce("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Qh(v))}else{const m=bR(this.apiClient,e);return d=ce("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>bc(v))}}async cancel(e){var t,o,r,l;let u="",d={};if(this.apiClient.isVertexAI()){const g=cR(this.apiClient,e);u=ce("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=uR(this.apiClient,e);u=ce("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=GR(e);return d=ce("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=FR(v),S=new nT;return Object.assign(S,E),S})}else{const m=qR(e);return d=ce("batches",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=BR(v),S=new nT;return Object.assign(S,E),S})}}async delete(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=vR(this.apiClient,e);return d=ce("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>ER(v))}else{const m=_R(this.apiClient,e);return d=ce("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>TR(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QR(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function aT(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>yw(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function $R(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=Bn(u);Array.isArray(v)&&(v=v.map(E=>aT(E))),h(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],aT(nn(d)));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(E=>vw(E))),h(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],_w(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function XR(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let E=Bn(u);Array.isArray(E)&&(E=E.map(S=>S)),h(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],nn(d));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(S=>Tw(S))),h(e,["tools"],E)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),t}function WR(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],FE(n,o));const r=f(e,["config"]);return r!=null&&$R(r,t),t}function ZR(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],FE(n,o));const r=f(e,["config"]);return r!=null&&XR(r,t),t}function jR(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ao(n,o)),t}function ew(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ao(n,o)),t}function tw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function nw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function iw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function ow(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sw(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&h(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function rw(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function aw(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ao(n,o)),t}function lw(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],ao(n,o)),t}function uw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function cw(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function fw(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function dw(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function hw(n){const e={},t=f(n,["config"]);return t!=null&&fw(t,e),e}function pw(n){const e={},t=f(n,["config"]);return t!=null&&dw(t,e),e}function mw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function gw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function yw(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],iw(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],ow(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],QR(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function _w(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],sw(o)),e}function vw(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],uw(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],cw(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function Tw(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>rw(S))),h(e,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const m=f(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function Ew(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function Sw(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function Aw(n,e){const t={},o=f(e,["name"]);o!=null&&h(t,["_url","name"],ao(n,o));const r=f(e,["config"]);return r!=null&&Ew(r,t),t}function Cw(n,e){const t={},o=f(e,["name"]);o!=null&&h(t,["_url","name"],ao(n,o));const r=f(e,["config"]);return r!=null&&Sw(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iw extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Gs(no.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=ZR(this.apiClient,e);return d=ce("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=WR(this.apiClient,e);return d=ce("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=lw(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=aw(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=ew(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=nw(v),S=new eT;return Object.assign(S,E),S})}else{const m=jR(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=tw(v),S=new eT;return Object.assign(S,E),S})}}async update(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Cw(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=Aw(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=pw(e);return d=ce("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=gw(v),S=new tT;return Object.assign(S,E),S})}else{const m=hw(e);return d=ce("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=mw(v),S=new tT;return Object.assign(S,E),S})}}}function Bc(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(n);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(t[o[r]]=n[o[r]]);return t}function lT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(n){return this instanceof Ae?(this.v=n,this):new Ae(n)}function ii(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(R){return function(V){return Promise.resolve(V).then(R,E)}}function d(R,V){o[R]&&(r[R]=function(G){return new Promise(function(O,$){l.push([R,G,O,$])>1||g(R,G)})},V&&(r[R]=V(r[R])))}function g(R,V){try{m(o[R](V))}catch(G){S(l[0][3],G)}}function m(R){R.value instanceof Ae?Promise.resolve(R.value.v).then(v,E):S(l[0][2],R)}function v(R){g("next",R)}function E(R){g("throw",R)}function S(R,V){R(V),l.shift(),l.length&&g(l[0][0],l[0][1])}}function oi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof lT=="function"?lT(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(u){return new Promise(function(d,g){u=n[l](u),r(d,g,u.done,u.value)})}}function r(l,u,d,g){Promise.resolve(g).then(function(m){l({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rw(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:t0(t)}function t0(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ww(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function uT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let l=!0;for(;o<t&&n[o].role==="model";)r.push(n[o]),l&&!t0(n[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Nw{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Mw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Mw{constructor(e,t,o,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),ww(l)}async sendMessage(e){var t;await this.sendPromise;const o=nn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const g=await r,m=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=g.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(E))!==null&&d!==void 0?d:[]);const R=m?[m]:[];this.recordHistory(o,R,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const o=nn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?uT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return ii(this,arguments,function*(){var r,l,u,d,g,m;const v=[];try{for(var E=!0,S=oi(e),R;R=yield Ae(S.next()),r=R.done,!r;E=!0){d=R.value,E=!1;const V=d;if(Rw(V)){const G=(m=(g=V.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;G!==void 0&&v.push(G)}yield yield Ae(V)}}catch(V){l={error:V}}finally{try{!E&&!r&&(u=S.return)&&(yield Ae(u.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,v)})}recordHistory(e,t,o){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...uT(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ml extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ml.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bw(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function Dw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function xw(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],QE(t)),e}function Vw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function Pw(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],QE(t)),e}function Uw(n){const e={},t=f(n,["uris"]);return t!=null&&h(e,["uris"],t),e}function Lw(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function Ow(n){const e={},t=f(n,["config"]);return t!=null&&Lw(t,e),e}function kw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["files"],l)}return e}function qw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gw extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Gs(no.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ow(e);return l=ce("files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=kw(g),v=new BI;return Object.assign(v,m),v})}}async createInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=bw(e);return l=ce("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=Dw(g),v=new FI;return Object.assign(v,m),v})}}async get(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Pw(e);return l=ce("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xw(e);return l=ce("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=Vw(g),v=new HI;return Object.assign(v,m),v})}}async registerFilesInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Uw(e);return l=ce("files:register",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=qw(g),v=new zI;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dc(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Bw(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>iN(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function Fw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Hw(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zw(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Yw(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const o=f(n,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const m=f(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const E=f(n,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&h(e,["responseMimeType"],R);const V=f(n,["responseModalities"]);V!=null&&h(e,["responseModalities"],V);const G=f(n,["responseSchema"]);G!=null&&h(e,["responseSchema"],G);const O=f(n,["routingConfig"]);O!=null&&h(e,["routingConfig"],O);const $=f(n,["seed"]);$!=null&&h(e,["seed"],$);const oe=f(n,["speechConfig"]);oe!=null&&h(e,["speechConfig"],oe);const Q=f(n,["stopSequences"]);Q!=null&&h(e,["stopSequences"],Q);const se=f(n,["temperature"]);se!=null&&h(e,["temperature"],se);const X=f(n,["thinkingConfig"]);X!=null&&h(e,["thinkingConfig"],X);const fe=f(n,["topK"]);fe!=null&&h(e,["topK"],fe);const b=f(n,["topP"]);if(b!=null&&h(e,["topP"],b),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Jw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function Kw(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function Qw(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Vp(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&h(e,["setup","systemInstruction"],Bw(nn(V)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let fe=na(G);Array.isArray(fe)&&(fe=fe.map(b=>sN(ta(b)))),h(e,["setup","tools"],fe)}const O=f(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],oN(O));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const oe=f(n,["outputAudioTranscription"]);e!==void 0&&oe!=null&&h(e,["setup","outputAudioTranscription"],oe);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&h(e,["setup","realtimeInputConfig"],Q);const se=f(n,["contextWindowCompression"]);e!==void 0&&se!=null&&h(e,["setup","contextWindowCompression"],se);const X=f(n,["proactivity"]);if(e!==void 0&&X!=null&&h(e,["setup","proactivity"],X),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function $w(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],Yw(o));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Vp(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&h(e,["setup","systemInstruction"],nn(V));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let b=na(G);Array.isArray(b)&&(b=b.map(M=>rN(ta(M)))),h(e,["setup","tools"],b)}const O=f(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],O);const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const oe=f(n,["outputAudioTranscription"]);e!==void 0&&oe!=null&&h(e,["setup","outputAudioTranscription"],oe);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&h(e,["setup","realtimeInputConfig"],Q);const se=f(n,["contextWindowCompression"]);e!==void 0&&se!=null&&h(e,["setup","contextWindowCompression"],se);const X=f(n,["proactivity"]);e!==void 0&&X!=null&&h(e,["setup","proactivity"],X);const fe=f(n,["explicitVadSignal"]);return e!==void 0&&fe!=null&&h(e,["setup","explicitVadSignal"],fe),t}function Xw(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],Ye(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],Qw(r,t)),t}function Ww(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],Ye(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],$w(r,t)),t}function Zw(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function jw(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["weightedPrompts"],o)}return e}function eN(n){const e={},t=f(n,["media"]);if(t!=null){let m=HE(t);Array.isArray(m)&&(m=m.map(v=>Dc(v))),h(e,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&h(e,["audio"],Dc(YE(o)));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],Dc(zE(l)));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function tN(n){const e={},t=f(n,["media"]);if(t!=null){let m=HE(t);Array.isArray(m)&&(m=m.map(v=>v)),h(e,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&h(e,["audio"],YE(o));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],zE(l));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function nN(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const o=f(n,["serverContent"]);o!=null&&h(e,["serverContent"],o);const r=f(n,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],aN(u));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(n,["sessionResumptionUpdate"]);g!=null&&h(e,["sessionResumptionUpdate"],g);const m=f(n,["voiceActivityDetectionSignal"]);m!=null&&h(e,["voiceActivityDetectionSignal"],m);const v=f(n,["voiceActivity"]);return v!=null&&h(e,["voiceActivity"],lN(v)),e}function iN(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],Fw(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],Hw(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],Dc(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function oN(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function sN(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],Jw(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],Kw(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function rN(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>zw(S))),h(e,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const m=f(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function aN(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const o=f(n,["cachedContentTokenCount"]);o!=null&&h(e,["cachedContentTokenCount"],o);const r=f(n,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(n,["promptTokensDetails"]);if(g!=null){let R=g;Array.isArray(R)&&(R=R.map(V=>V)),h(e,["promptTokensDetails"],R)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let R=m;Array.isArray(R)&&(R=R.map(V=>V)),h(e,["cacheTokensDetails"],R)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(V=>V)),h(e,["responseTokensDetails"],R)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let R=E;Array.isArray(R)&&(R=R.map(V=>V)),h(e,["toolUsePromptTokensDetails"],R)}const S=f(n,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}function lN(n){const e={},t=f(n,["type"]);return t!=null&&h(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uN(n,e){const t={},o=f(n,["data"]);if(o!=null&&h(t,["data"],o),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function cN(n,e){const t={},o=f(n,["content"]);o!=null&&h(t,["content"],o);const r=f(n,["citationMetadata"]);r!=null&&h(t,["citationMetadata"],fN(r));const l=f(n,["tokenCount"]);l!=null&&h(t,["tokenCount"],l);const u=f(n,["finishReason"]);u!=null&&h(t,["finishReason"],u);const d=f(n,["avgLogprobs"]);d!=null&&h(t,["avgLogprobs"],d);const g=f(n,["groundingMetadata"]);g!=null&&h(t,["groundingMetadata"],g);const m=f(n,["index"]);m!=null&&h(t,["index"],m);const v=f(n,["logprobsResult"]);v!=null&&h(t,["logprobsResult"],v);const E=f(n,["safetyRatings"]);if(E!=null){let R=E;Array.isArray(R)&&(R=R.map(V=>V)),h(t,["safetyRatings"],R)}const S=f(n,["urlContextMetadata"]);return S!=null&&h(t,["urlContextMetadata"],S),t}function fN(n,e){const t={},o=f(n,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(t,["citations"],r)}return t}function dN(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let u=Bn(l);Array.isArray(u)&&(u=u.map(d=>d)),h(o,["contents"],u)}return o}function hN(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["tokensInfo"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(t,["tokensInfo"],l)}return t}function pN(n,e){const t={},o=f(n,["values"]);o!=null&&h(t,["values"],o);const r=f(n,["statistics"]);return r!=null&&h(t,["statistics"],mN(r)),t}function mN(n,e){const t={},o=f(n,["truncated"]);o!=null&&h(t,["truncated"],o);const r=f(n,["token_count"]);return r!=null&&h(t,["tokenCount"],r),t}function rf(n,e){const t={},o=f(n,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>CM(u))),h(t,["parts"],l)}const r=f(n,["role"]);return r!=null&&h(t,["role"],r),t}function gN(n,e){const t={},o=f(n,["controlType"]);o!=null&&h(t,["controlType"],o);const r=f(n,["enableControlImageComputation"]);return r!=null&&h(t,["computeControl"],r),t}function yN(n,e){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function _N(n,e,t){const o={},r=f(n,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],nn(r));const l=f(n,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>s0(g))),h(e,["tools"],d)}const u=f(n,["generationConfig"]);return e!==void 0&&u!=null&&h(e,["generationConfig"],uM(u)),o}function vN(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let d=Bn(l);Array.isArray(d)&&(d=d.map(g=>rf(g))),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&yN(u),o}function TN(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let d=Bn(l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&_N(u,o),o}function EN(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["totalTokens"]);r!=null&&h(t,["totalTokens"],r);const l=f(n,["cachedContentTokenCount"]);return l!=null&&h(t,["cachedContentTokenCount"],l),t}function SN(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["totalTokens"]);return r!=null&&h(t,["totalTokens"],r),t}function AN(n,e,t){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],Ye(n,r)),o}function CN(n,e,t){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],Ye(n,r)),o}function IN(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function RN(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function wN(n,e,t){const o={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(n,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const m=f(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const v=f(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&h(e,["parameters","personGeneration"],E);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const R=f(n,["includeRaiReason"]);e!==void 0&&R!=null&&h(e,["parameters","includeRaiReason"],R);const V=f(n,["language"]);e!==void 0&&V!=null&&h(e,["parameters","language"],V);const G=f(n,["outputMimeType"]);e!==void 0&&G!=null&&h(e,["parameters","outputOptions","mimeType"],G);const O=f(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","compressionQuality"],O);const $=f(n,["addWatermark"]);e!==void 0&&$!=null&&h(e,["parameters","addWatermark"],$);const oe=f(n,["labels"]);e!==void 0&&oe!=null&&h(e,["labels"],oe);const Q=f(n,["editMode"]);e!==void 0&&Q!=null&&h(e,["parameters","editMode"],Q);const se=f(n,["baseSteps"]);return e!==void 0&&se!=null&&h(e,["parameters","editConfig","baseSteps"],se),o}function NN(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(m=>bM(m))),h(o,["instances[0]","referenceImages"],g)}const d=f(e,["config"]);return d!=null&&wN(d,o),o}function MN(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>af(u))),h(t,["generatedImages"],l)}return t}function bN(n,e,t){const o={},r=f(n,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const l=f(n,["title"]);e!==void 0&&l!=null&&h(e,["requests[]","title"],l);const u=f(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&h(e,["requests[]","outputDimensionality"],u),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function DN(n,e,t){const o={},r=f(n,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const l=f(n,["title"]);e!==void 0&&l!=null&&h(e,["instances[]","title"],l);const u=f(n,["outputDimensionality"]);e!==void 0&&u!=null&&h(e,["parameters","outputDimensionality"],u);const d=f(n,["mimeType"]);e!==void 0&&d!=null&&h(e,["instances[]","mimeType"],d);const g=f(n,["autoTruncate"]);return e!==void 0&&g!=null&&h(e,["parameters","autoTruncate"],g),o}function xN(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let g=bp(n,l);Array.isArray(g)&&(g=g.map(m=>m)),h(o,["requests[]","content"],g)}const u=f(e,["config"]);u!=null&&bN(u,o);const d=f(e,["model"]);return d!==void 0&&h(o,["requests[]","model"],Ye(n,d)),o}function VN(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let d=bp(n,l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["instances[]","content"],d)}const u=f(e,["config"]);return u!=null&&DN(u,o),o}function PN(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),h(t,["embeddings"],u)}const l=f(n,["metadata"]);return l!=null&&h(t,["metadata"],l),t}function UN(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>pN(d))),h(t,["embeddings"],u)}const l=f(n,["metadata"]);return l!=null&&h(t,["metadata"],l),t}function LN(n,e){const t={},o=f(n,["endpoint"]);o!=null&&h(t,["name"],o);const r=f(n,["deployedModelId"]);return r!=null&&h(t,["deployedModelId"],r),t}function ON(n,e){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["fileUri"]);o!=null&&h(t,["fileUri"],o);const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function kN(n,e){const t={},o=f(n,["id"]);o!=null&&h(t,["id"],o);const r=f(n,["args"]);r!=null&&h(t,["args"],r);const l=f(n,["name"]);if(l!=null&&h(t,["name"],l),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function qN(n,e){const t={},o=f(n,["allowedFunctionNames"]);o!=null&&h(t,["allowedFunctionNames"],o);const r=f(n,["mode"]);if(r!=null&&h(t,["mode"],r),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function GN(n,e){const t={},o=f(n,["description"]);o!=null&&h(t,["description"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["parameters"]);l!=null&&h(t,["parameters"],l);const u=f(n,["parametersJsonSchema"]);u!=null&&h(t,["parametersJsonSchema"],u);const d=f(n,["response"]);d!=null&&h(t,["response"],d);const g=f(n,["responseJsonSchema"]);if(g!=null&&h(t,["responseJsonSchema"],g),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function BN(n,e,t,o){const r={},l=f(e,["systemInstruction"]);t!==void 0&&l!=null&&h(t,["systemInstruction"],rf(nn(l)));const u=f(e,["temperature"]);u!=null&&h(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(r,["topP"],d);const g=f(e,["topK"]);g!=null&&h(r,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&h(r,["candidateCount"],m);const v=f(e,["maxOutputTokens"]);v!=null&&h(r,["maxOutputTokens"],v);const E=f(e,["stopSequences"]);E!=null&&h(r,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&h(r,["responseLogprobs"],S);const R=f(e,["logprobs"]);R!=null&&h(r,["logprobs"],R);const V=f(e,["presencePenalty"]);V!=null&&h(r,["presencePenalty"],V);const G=f(e,["frequencyPenalty"]);G!=null&&h(r,["frequencyPenalty"],G);const O=f(e,["seed"]);O!=null&&h(r,["seed"],O);const $=f(e,["responseMimeType"]);$!=null&&h(r,["responseMimeType"],$);const oe=f(e,["responseSchema"]);oe!=null&&h(r,["responseSchema"],Dp(oe));const Q=f(e,["responseJsonSchema"]);if(Q!=null&&h(r,["responseJsonSchema"],Q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const se=f(e,["safetySettings"]);if(t!==void 0&&se!=null){let Me=se;Array.isArray(Me)&&(Me=Me.map(ot=>DM(ot))),h(t,["safetySettings"],Me)}const X=f(e,["tools"]);if(t!==void 0&&X!=null){let Me=na(X);Array.isArray(Me)&&(Me=Me.map(ot=>kM(ta(ot)))),h(t,["tools"],Me)}const fe=f(e,["toolConfig"]);if(t!==void 0&&fe!=null&&h(t,["toolConfig"],OM(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=f(e,["cachedContent"]);t!==void 0&&b!=null&&h(t,["cachedContent"],ao(n,b));const M=f(e,["responseModalities"]);M!=null&&h(r,["responseModalities"],M);const N=f(e,["mediaResolution"]);N!=null&&h(r,["mediaResolution"],N);const U=f(e,["speechConfig"]);if(U!=null&&h(r,["speechConfig"],xp(U)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&h(r,["thinkingConfig"],P);const q=f(e,["imageConfig"]);q!=null&&h(r,["imageConfig"],pM(q));const D=f(e,["enableEnhancedCivicAnswers"]);if(D!=null&&h(r,["enableEnhancedCivicAnswers"],D),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function FN(n,e,t,o){const r={},l=f(e,["systemInstruction"]);t!==void 0&&l!=null&&h(t,["systemInstruction"],nn(l));const u=f(e,["temperature"]);u!=null&&h(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(r,["topP"],d);const g=f(e,["topK"]);g!=null&&h(r,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&h(r,["candidateCount"],m);const v=f(e,["maxOutputTokens"]);v!=null&&h(r,["maxOutputTokens"],v);const E=f(e,["stopSequences"]);E!=null&&h(r,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&h(r,["responseLogprobs"],S);const R=f(e,["logprobs"]);R!=null&&h(r,["logprobs"],R);const V=f(e,["presencePenalty"]);V!=null&&h(r,["presencePenalty"],V);const G=f(e,["frequencyPenalty"]);G!=null&&h(r,["frequencyPenalty"],G);const O=f(e,["seed"]);O!=null&&h(r,["seed"],O);const $=f(e,["responseMimeType"]);$!=null&&h(r,["responseMimeType"],$);const oe=f(e,["responseSchema"]);oe!=null&&h(r,["responseSchema"],Dp(oe));const Q=f(e,["responseJsonSchema"]);Q!=null&&h(r,["responseJsonSchema"],Q);const se=f(e,["routingConfig"]);se!=null&&h(r,["routingConfig"],se);const X=f(e,["modelSelectionConfig"]);X!=null&&h(r,["modelConfig"],X);const fe=f(e,["safetySettings"]);if(t!==void 0&&fe!=null){let ge=fe;Array.isArray(ge)&&(ge=ge.map(xe=>xe)),h(t,["safetySettings"],ge)}const b=f(e,["tools"]);if(t!==void 0&&b!=null){let ge=na(b);Array.isArray(ge)&&(ge=ge.map(xe=>s0(ta(xe)))),h(t,["tools"],ge)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&h(t,["toolConfig"],M);const N=f(e,["labels"]);t!==void 0&&N!=null&&h(t,["labels"],N);const U=f(e,["cachedContent"]);t!==void 0&&U!=null&&h(t,["cachedContent"],ao(n,U));const P=f(e,["responseModalities"]);P!=null&&h(r,["responseModalities"],P);const q=f(e,["mediaResolution"]);q!=null&&h(r,["mediaResolution"],q);const D=f(e,["speechConfig"]);D!=null&&h(r,["speechConfig"],xp(D));const Me=f(e,["audioTimestamp"]);Me!=null&&h(r,["audioTimestamp"],Me);const ot=f(e,["thinkingConfig"]);ot!=null&&h(r,["thinkingConfig"],ot);const W=f(e,["imageConfig"]);if(W!=null&&h(r,["imageConfig"],mM(W)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const le=f(e,["modelArmorConfig"]);return t!==void 0&&le!=null&&h(t,["modelArmorConfig"],le),r}function cT(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let d=Bn(l);Array.isArray(d)&&(d=d.map(g=>rf(g))),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(o,["generationConfig"],BN(n,u,o)),o}function fT(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let d=Bn(l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(o,["generationConfig"],FN(n,u,o)),o}function dT(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(v=>cN(v))),h(t,["candidates"],m)}const l=f(n,["modelVersion"]);l!=null&&h(t,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&h(t,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&h(t,["responseId"],d);const g=f(n,["usageMetadata"]);return g!=null&&h(t,["usageMetadata"],g),t}function hT(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["candidates"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(E=>E)),h(t,["candidates"],v)}const l=f(n,["createTime"]);l!=null&&h(t,["createTime"],l);const u=f(n,["modelVersion"]);u!=null&&h(t,["modelVersion"],u);const d=f(n,["promptFeedback"]);d!=null&&h(t,["promptFeedback"],d);const g=f(n,["responseId"]);g!=null&&h(t,["responseId"],g);const m=f(n,["usageMetadata"]);return m!=null&&h(t,["usageMetadata"],m),t}function HN(n,e,t){const o={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=f(n,["guidanceScale"]);if(e!==void 0&&u!=null&&h(e,["parameters","guidanceScale"],u),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const m=f(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const v=f(n,["includeRaiReason"]);e!==void 0&&v!=null&&h(e,["parameters","includeRaiReason"],v);const E=f(n,["language"]);e!==void 0&&E!=null&&h(e,["parameters","language"],E);const S=f(n,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const R=f(n,["outputCompressionQuality"]);if(e!==void 0&&R!=null&&h(e,["parameters","outputOptions","compressionQuality"],R),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=f(n,["imageSize"]);if(e!==void 0&&V!=null&&h(e,["parameters","sampleImageSize"],V),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function zN(n,e,t){const o={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(n,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const m=f(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const v=f(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&h(e,["parameters","personGeneration"],E);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const R=f(n,["includeRaiReason"]);e!==void 0&&R!=null&&h(e,["parameters","includeRaiReason"],R);const V=f(n,["language"]);e!==void 0&&V!=null&&h(e,["parameters","language"],V);const G=f(n,["outputMimeType"]);e!==void 0&&G!=null&&h(e,["parameters","outputOptions","mimeType"],G);const O=f(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","compressionQuality"],O);const $=f(n,["addWatermark"]);e!==void 0&&$!=null&&h(e,["parameters","addWatermark"],$);const oe=f(n,["labels"]);e!==void 0&&oe!=null&&h(e,["labels"],oe);const Q=f(n,["imageSize"]);e!==void 0&&Q!=null&&h(e,["parameters","sampleImageSize"],Q);const se=f(n,["enhancePrompt"]);return e!==void 0&&se!=null&&h(e,["parameters","enhancePrompt"],se),o}function YN(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&HN(u,o),o}function JN(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&zN(u,o),o}function KN(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>sM(d))),h(t,["generatedImages"],u)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&h(t,["positivePromptSafetyAttributes"],i0(l)),t}function QN(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>af(d))),h(t,["generatedImages"],u)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&h(t,["positivePromptSafetyAttributes"],o0(l)),t}function $N(n,e,t){const o={},r=f(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(n,["durationSeconds"]);if(e!==void 0&&l!=null&&h(e,["parameters","durationSeconds"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(n,["resolution"]);e!==void 0&&d!=null&&h(e,["parameters","resolution"],d);const g=f(n,["personGeneration"]);if(e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(n,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const v=f(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&h(e,["parameters","enhancePrompt"],v),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=f(n,["lastFrame"]);e!==void 0&&E!=null&&h(e,["instances[0]","lastFrame"],lf(E));const S=f(n,["referenceImages"]);if(e!==void 0&&S!=null){let R=S;Array.isArray(R)&&(R=R.map(V=>WM(V))),h(e,["instances[0]","referenceImages"],R)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function XN(n,e,t){const o={},r=f(n,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const u=f(n,["fps"]);e!==void 0&&u!=null&&h(e,["parameters","fps"],u);const d=f(n,["durationSeconds"]);e!==void 0&&d!=null&&h(e,["parameters","durationSeconds"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const m=f(n,["aspectRatio"]);e!==void 0&&m!=null&&h(e,["parameters","aspectRatio"],m);const v=f(n,["resolution"]);e!==void 0&&v!=null&&h(e,["parameters","resolution"],v);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&h(e,["parameters","personGeneration"],E);const S=f(n,["pubsubTopic"]);e!==void 0&&S!=null&&h(e,["parameters","pubsubTopic"],S);const R=f(n,["negativePrompt"]);e!==void 0&&R!=null&&h(e,["parameters","negativePrompt"],R);const V=f(n,["enhancePrompt"]);e!==void 0&&V!=null&&h(e,["parameters","enhancePrompt"],V);const G=f(n,["generateAudio"]);e!==void 0&&G!=null&&h(e,["parameters","generateAudio"],G);const O=f(n,["lastFrame"]);e!==void 0&&O!=null&&h(e,["instances[0]","lastFrame"],ai(O));const $=f(n,["referenceImages"]);if(e!==void 0&&$!=null){let se=$;Array.isArray(se)&&(se=se.map(X=>ZM(X))),h(e,["instances[0]","referenceImages"],se)}const oe=f(n,["mask"]);e!==void 0&&oe!=null&&h(e,["instances[0]","mask"],XM(oe));const Q=f(n,["compressionQuality"]);return e!==void 0&&Q!=null&&h(e,["parameters","compressionQuality"],Q),o}function WN(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["name"],o);const r=f(n,["metadata"]);r!=null&&h(t,["metadata"],r);const l=f(n,["done"]);l!=null&&h(t,["done"],l);const u=f(n,["error"]);u!=null&&h(t,["error"],u);const d=f(n,["response","generateVideoResponse"]);return d!=null&&h(t,["response"],tM(d)),t}function ZN(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["name"],o);const r=f(n,["metadata"]);r!=null&&h(t,["metadata"],r);const l=f(n,["done"]);l!=null&&h(t,["done"],l);const u=f(n,["error"]);u!=null&&h(t,["error"],u);const d=f(n,["response"]);return d!=null&&h(t,["response"],nM(d)),t}function jN(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&h(o,["instances[0]","image"],lf(u));const d=f(e,["video"]);d!=null&&h(o,["instances[0]","video"],r0(d));const g=f(e,["source"]);g!=null&&iM(g,o);const m=f(e,["config"]);return m!=null&&$N(m,o),o}function eM(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&h(o,["instances[0]","image"],ai(u));const d=f(e,["video"]);d!=null&&h(o,["instances[0]","video"],a0(d));const g=f(e,["source"]);g!=null&&oM(g,o);const m=f(e,["config"]);return m!=null&&XN(m,o),o}function tM(n,e){const t={},o=f(n,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>aM(d))),h(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&h(t,["raiMediaFilteredCount"],r);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&h(t,["raiMediaFilteredReasons"],l),t}function nM(n,e){const t={},o=f(n,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>lM(d))),h(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&h(t,["raiMediaFilteredCount"],r);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&h(t,["raiMediaFilteredReasons"],l),t}function iM(n,e,t){const o={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(n,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],lf(l));const u=f(n,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],r0(u)),o}function oM(n,e,t){const o={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(n,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],ai(l));const u=f(n,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],a0(u)),o}function sM(n,e){const t={},o=f(n,["_self"]);o!=null&&h(t,["image"],gM(o));const r=f(n,["raiFilteredReason"]);r!=null&&h(t,["raiFilteredReason"],r);const l=f(n,["_self"]);return l!=null&&h(t,["safetyAttributes"],i0(l)),t}function af(n,e){const t={},o=f(n,["_self"]);o!=null&&h(t,["image"],n0(o));const r=f(n,["raiFilteredReason"]);r!=null&&h(t,["raiFilteredReason"],r);const l=f(n,["_self"]);l!=null&&h(t,["safetyAttributes"],o0(l));const u=f(n,["prompt"]);return u!=null&&h(t,["enhancedPrompt"],u),t}function rM(n,e){const t={},o=f(n,["_self"]);o!=null&&h(t,["mask"],n0(o));const r=f(n,["labels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(t,["labels"],l)}return t}function aM(n,e){const t={},o=f(n,["video"]);return o!=null&&h(t,["video"],QM(o)),t}function lM(n,e){const t={},o=f(n,["_self"]);return o!=null&&h(t,["video"],$M(o)),t}function uM(n,e){const t={},o=f(n,["modelSelectionConfig"]);o!=null&&h(t,["modelConfig"],o);const r=f(n,["responseJsonSchema"]);r!=null&&h(t,["responseJsonSchema"],r);const l=f(n,["audioTimestamp"]);l!=null&&h(t,["audioTimestamp"],l);const u=f(n,["candidateCount"]);u!=null&&h(t,["candidateCount"],u);const d=f(n,["enableAffectiveDialog"]);d!=null&&h(t,["enableAffectiveDialog"],d);const g=f(n,["frequencyPenalty"]);g!=null&&h(t,["frequencyPenalty"],g);const m=f(n,["logprobs"]);m!=null&&h(t,["logprobs"],m);const v=f(n,["maxOutputTokens"]);v!=null&&h(t,["maxOutputTokens"],v);const E=f(n,["mediaResolution"]);E!=null&&h(t,["mediaResolution"],E);const S=f(n,["presencePenalty"]);S!=null&&h(t,["presencePenalty"],S);const R=f(n,["responseLogprobs"]);R!=null&&h(t,["responseLogprobs"],R);const V=f(n,["responseMimeType"]);V!=null&&h(t,["responseMimeType"],V);const G=f(n,["responseModalities"]);G!=null&&h(t,["responseModalities"],G);const O=f(n,["responseSchema"]);O!=null&&h(t,["responseSchema"],O);const $=f(n,["routingConfig"]);$!=null&&h(t,["routingConfig"],$);const oe=f(n,["seed"]);oe!=null&&h(t,["seed"],oe);const Q=f(n,["speechConfig"]);Q!=null&&h(t,["speechConfig"],Q);const se=f(n,["stopSequences"]);se!=null&&h(t,["stopSequences"],se);const X=f(n,["temperature"]);X!=null&&h(t,["temperature"],X);const fe=f(n,["thinkingConfig"]);fe!=null&&h(t,["thinkingConfig"],fe);const b=f(n,["topK"]);b!=null&&h(t,["topK"],b);const M=f(n,["topP"]);if(M!=null&&h(t,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function cM(n,e,t){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],Ye(n,r)),o}function fM(n,e,t){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],Ye(n,r)),o}function dM(n,e){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(n,["enableWidget"]);return o!=null&&h(t,["enableWidget"],o),t}function hM(n,e){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(n,["timeRangeFilter"]);return o!=null&&h(t,["timeRangeFilter"],o),t}function pM(n,e){const t={},o=f(n,["aspectRatio"]);o!=null&&h(t,["aspectRatio"],o);const r=f(n,["imageSize"]);if(r!=null&&h(t,["imageSize"],r),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function mM(n,e){const t={},o=f(n,["aspectRatio"]);o!=null&&h(t,["aspectRatio"],o);const r=f(n,["imageSize"]);r!=null&&h(t,["imageSize"],r);const l=f(n,["personGeneration"]);l!=null&&h(t,["personGeneration"],l);const u=f(n,["outputMimeType"]);u!=null&&h(t,["imageOutputOptions","mimeType"],u);const d=f(n,["outputCompressionQuality"]);return d!=null&&h(t,["imageOutputOptions","compressionQuality"],d),t}function gM(n,e){const t={},o=f(n,["bytesBase64Encoded"]);o!=null&&h(t,["imageBytes"],jo(o));const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function n0(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["gcsUri"],o);const r=f(n,["bytesBase64Encoded"]);r!=null&&h(t,["imageBytes"],jo(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["mimeType"],l),t}function lf(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=f(n,["imageBytes"]);o!=null&&h(t,["bytesBase64Encoded"],jo(o));const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function ai(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["gcsUri"],o);const r=f(n,["imageBytes"]);r!=null&&h(t,["bytesBase64Encoded"],jo(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["mimeType"],l),t}function yM(n,e,t,o){const r={},l=f(e,["pageSize"]);t!==void 0&&l!=null&&h(t,["_query","pageSize"],l);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&h(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&h(t,["_query","filter"],d);const g=f(e,["queryBase"]);return t!==void 0&&g!=null&&h(t,["_url","models_url"],$E(n,g)),r}function _M(n,e,t,o){const r={},l=f(e,["pageSize"]);t!==void 0&&l!=null&&h(t,["_query","pageSize"],l);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&h(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&h(t,["_query","filter"],d);const g=f(e,["queryBase"]);return t!==void 0&&g!=null&&h(t,["_url","models_url"],$E(n,g)),r}function vM(n,e,t){const o={},r=f(e,["config"]);return r!=null&&yM(n,r,o),o}function TM(n,e,t){const o={},r=f(e,["config"]);return r!=null&&_M(n,r,o),o}function EM(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["_self"]);if(l!=null){let u=XE(l);Array.isArray(u)&&(u=u.map(d=>$h(d))),h(t,["models"],u)}return t}function SM(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["_self"]);if(l!=null){let u=XE(l);Array.isArray(u)&&(u=u.map(d=>Xh(d))),h(t,["models"],u)}return t}function AM(n,e){const t={},o=f(n,["maskMode"]);o!=null&&h(t,["maskMode"],o);const r=f(n,["segmentationClasses"]);r!=null&&h(t,["maskClasses"],r);const l=f(n,["maskDilation"]);return l!=null&&h(t,["dilation"],l),t}function $h(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["name"],o);const r=f(n,["displayName"]);r!=null&&h(t,["displayName"],r);const l=f(n,["description"]);l!=null&&h(t,["description"],l);const u=f(n,["version"]);u!=null&&h(t,["version"],u);const d=f(n,["_self"]);d!=null&&h(t,["tunedModelInfo"],qM(d));const g=f(n,["inputTokenLimit"]);g!=null&&h(t,["inputTokenLimit"],g);const m=f(n,["outputTokenLimit"]);m!=null&&h(t,["outputTokenLimit"],m);const v=f(n,["supportedGenerationMethods"]);v!=null&&h(t,["supportedActions"],v);const E=f(n,["temperature"]);E!=null&&h(t,["temperature"],E);const S=f(n,["maxTemperature"]);S!=null&&h(t,["maxTemperature"],S);const R=f(n,["topP"]);R!=null&&h(t,["topP"],R);const V=f(n,["topK"]);V!=null&&h(t,["topK"],V);const G=f(n,["thinking"]);return G!=null&&h(t,["thinking"],G),t}function Xh(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["name"],o);const r=f(n,["displayName"]);r!=null&&h(t,["displayName"],r);const l=f(n,["description"]);l!=null&&h(t,["description"],l);const u=f(n,["versionId"]);u!=null&&h(t,["version"],u);const d=f(n,["deployedModels"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(R=>LN(R))),h(t,["endpoints"],S)}const g=f(n,["labels"]);g!=null&&h(t,["labels"],g);const m=f(n,["_self"]);m!=null&&h(t,["tunedModelInfo"],GM(m));const v=f(n,["defaultCheckpointId"]);v!=null&&h(t,["defaultCheckpointId"],v);const E=f(n,["checkpoints"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(R=>R)),h(t,["checkpoints"],S)}return t}function CM(n,e){const t={},o=f(n,["mediaResolution"]);o!=null&&h(t,["mediaResolution"],o);const r=f(n,["codeExecutionResult"]);r!=null&&h(t,["codeExecutionResult"],r);const l=f(n,["executableCode"]);l!=null&&h(t,["executableCode"],l);const u=f(n,["fileData"]);u!=null&&h(t,["fileData"],ON(u));const d=f(n,["functionCall"]);d!=null&&h(t,["functionCall"],kN(d));const g=f(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const m=f(n,["inlineData"]);m!=null&&h(t,["inlineData"],uN(m));const v=f(n,["text"]);v!=null&&h(t,["text"],v);const E=f(n,["thought"]);E!=null&&h(t,["thought"],E);const S=f(n,["thoughtSignature"]);S!=null&&h(t,["thoughtSignature"],S);const R=f(n,["videoMetadata"]);return R!=null&&h(t,["videoMetadata"],R),t}function IM(n,e){const t={},o=f(n,["productImage"]);return o!=null&&h(t,["image"],ai(o)),t}function RM(n,e,t){const o={},r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=f(n,["baseSteps"]);e!==void 0&&l!=null&&h(e,["parameters","baseSteps"],l);const u=f(n,["outputGcsUri"]);e!==void 0&&u!=null&&h(e,["parameters","storageUri"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&h(e,["parameters","safetySetting"],g);const m=f(n,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const v=f(n,["addWatermark"]);e!==void 0&&v!=null&&h(e,["parameters","addWatermark"],v);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","mimeType"],E);const S=f(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&h(e,["parameters","enhancePrompt"],R);const V=f(n,["labels"]);return e!==void 0&&V!=null&&h(e,["labels"],V),o}function wM(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["source"]);l!=null&&MM(l,o);const u=f(e,["config"]);return u!=null&&RM(u,o),o}function NM(n,e){const t={},o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>af(l))),h(t,["generatedImages"],r)}return t}function MM(n,e,t){const o={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(n,["personImage"]);e!==void 0&&l!=null&&h(e,["instances[0]","personImage","image"],ai(l));const u=f(n,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(g=>IM(g))),h(e,["instances[0]","productImages"],d)}return o}function bM(n,e){const t={},o=f(n,["referenceImage"]);o!=null&&h(t,["referenceImage"],ai(o));const r=f(n,["referenceId"]);r!=null&&h(t,["referenceId"],r);const l=f(n,["referenceType"]);l!=null&&h(t,["referenceType"],l);const u=f(n,["maskImageConfig"]);u!=null&&h(t,["maskImageConfig"],AM(u));const d=f(n,["controlImageConfig"]);d!=null&&h(t,["controlImageConfig"],gN(d));const g=f(n,["styleImageConfig"]);g!=null&&h(t,["styleImageConfig"],g);const m=f(n,["subjectImageConfig"]);return m!=null&&h(t,["subjectImageConfig"],m),t}function i0(n,e){const t={},o=f(n,["safetyAttributes","categories"]);o!=null&&h(t,["categories"],o);const r=f(n,["safetyAttributes","scores"]);r!=null&&h(t,["scores"],r);const l=f(n,["contentType"]);return l!=null&&h(t,["contentType"],l),t}function o0(n,e){const t={},o=f(n,["safetyAttributes","categories"]);o!=null&&h(t,["categories"],o);const r=f(n,["safetyAttributes","scores"]);r!=null&&h(t,["scores"],r);const l=f(n,["contentType"]);return l!=null&&h(t,["contentType"],l),t}function DM(n,e){const t={},o=f(n,["category"]);if(o!=null&&h(t,["category"],o),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(n,["threshold"]);return r!=null&&h(t,["threshold"],r),t}function xM(n,e){const t={},o=f(n,["image"]);return o!=null&&h(t,["image"],ai(o)),t}function VM(n,e,t){const o={},r=f(n,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const l=f(n,["maxPredictions"]);e!==void 0&&l!=null&&h(e,["parameters","maxPredictions"],l);const u=f(n,["confidenceThreshold"]);e!==void 0&&u!=null&&h(e,["parameters","confidenceThreshold"],u);const d=f(n,["maskDilation"]);e!==void 0&&d!=null&&h(e,["parameters","maskDilation"],d);const g=f(n,["binaryColorThreshold"]);e!==void 0&&g!=null&&h(e,["parameters","binaryColorThreshold"],g);const m=f(n,["labels"]);return e!==void 0&&m!=null&&h(e,["labels"],m),o}function PM(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["source"]);l!=null&&LM(l,o);const u=f(e,["config"]);return u!=null&&VM(u,o),o}function UM(n,e){const t={},o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>rM(l))),h(t,["generatedMasks"],r)}return t}function LM(n,e,t){const o={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(n,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],ai(l));const u=f(n,["scribbleImage"]);return e!==void 0&&u!=null&&h(e,["instances[0]","scribble"],xM(u)),o}function OM(n,e){const t={},o=f(n,["retrievalConfig"]);o!=null&&h(t,["retrievalConfig"],o);const r=f(n,["functionCallingConfig"]);return r!=null&&h(t,["functionCallingConfig"],qN(r)),t}function kM(n,e){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(n,["computerUse"]);o!=null&&h(t,["computerUse"],o);const r=f(n,["fileSearch"]);r!=null&&h(t,["fileSearch"],r);const l=f(n,["codeExecution"]);if(l!=null&&h(t,["codeExecution"],l),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>S)),h(t,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&h(t,["googleMaps"],dM(d));const g=f(n,["googleSearch"]);g!=null&&h(t,["googleSearch"],hM(g));const m=f(n,["googleSearchRetrieval"]);m!=null&&h(t,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&h(t,["urlContext"],v),t}function s0(n,e){const t={},o=f(n,["retrieval"]);o!=null&&h(t,["retrieval"],o);const r=f(n,["computerUse"]);if(r!=null&&h(t,["computerUse"],r),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(n,["codeExecution"]);l!=null&&h(t,["codeExecution"],l);const u=f(n,["enterpriseWebSearch"]);u!=null&&h(t,["enterpriseWebSearch"],u);const d=f(n,["functionDeclarations"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(R=>GN(R))),h(t,["functionDeclarations"],S)}const g=f(n,["googleMaps"]);g!=null&&h(t,["googleMaps"],g);const m=f(n,["googleSearch"]);m!=null&&h(t,["googleSearch"],m);const v=f(n,["googleSearchRetrieval"]);v!=null&&h(t,["googleSearchRetrieval"],v);const E=f(n,["urlContext"]);return E!=null&&h(t,["urlContext"],E),t}function qM(n,e){const t={},o=f(n,["baseModel"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["createTime"]);r!=null&&h(t,["createTime"],r);const l=f(n,["updateTime"]);return l!=null&&h(t,["updateTime"],l),t}function GM(n,e){const t={},o=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["createTime"]);r!=null&&h(t,["createTime"],r);const l=f(n,["updateTime"]);return l!=null&&h(t,["updateTime"],l),t}function BM(n,e,t){const o={},r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),o}function FM(n,e,t){const o={},r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),o}function HM(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","name"],Ye(n,r));const l=f(e,["config"]);return l!=null&&BM(l,o),o}function zM(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["config"]);return l!=null&&FM(l,o),o}function YM(n,e,t){const o={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const d=f(n,["includeRaiReason"]);e!==void 0&&d!=null&&h(e,["parameters","includeRaiReason"],d);const g=f(n,["outputMimeType"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","mimeType"],g);const m=f(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m);const v=f(n,["enhanceInputImage"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],v);const E=f(n,["imagePreservationFactor"]);e!==void 0&&E!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const S=f(n,["labels"]);e!==void 0&&S!=null&&h(e,["labels"],S);const R=f(n,["numberOfImages"]);e!==void 0&&R!=null&&h(e,["parameters","sampleCount"],R);const V=f(n,["mode"]);return e!==void 0&&V!=null&&h(e,["parameters","mode"],V),o}function JM(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["image"]);l!=null&&h(o,["instances[0]","image"],ai(l));const u=f(e,["upscaleFactor"]);u!=null&&h(o,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&YM(d,o),o}function KM(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>af(u))),h(t,["generatedImages"],l)}return t}function QM(n,e){const t={},o=f(n,["uri"]);o!=null&&h(t,["uri"],o);const r=f(n,["encodedVideo"]);r!=null&&h(t,["videoBytes"],jo(r));const l=f(n,["encoding"]);return l!=null&&h(t,["mimeType"],l),t}function $M(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["uri"],o);const r=f(n,["bytesBase64Encoded"]);r!=null&&h(t,["videoBytes"],jo(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["mimeType"],l),t}function XM(n,e){const t={},o=f(n,["image"]);o!=null&&h(t,["_self"],ai(o));const r=f(n,["maskMode"]);return r!=null&&h(t,["maskMode"],r),t}function WM(n,e){const t={},o=f(n,["image"]);o!=null&&h(t,["image"],lf(o));const r=f(n,["referenceType"]);return r!=null&&h(t,["referenceType"],r),t}function ZM(n,e){const t={},o=f(n,["image"]);o!=null&&h(t,["image"],ai(o));const r=f(n,["referenceType"]);return r!=null&&h(t,["referenceType"],r),t}function r0(n,e){const t={},o=f(n,["uri"]);o!=null&&h(t,["uri"],o);const r=f(n,["videoBytes"]);r!=null&&h(t,["encodedVideo"],jo(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["encoding"],l),t}function a0(n,e){const t={},o=f(n,["uri"]);o!=null&&h(t,["gcsUri"],o);const r=f(n,["videoBytes"]);r!=null&&h(t,["bytesBase64Encoded"],jo(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["mimeType"],l),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jM(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&h(e,["displayName"],o),t}function e1(n){const e={},t=f(n,["config"]);return t!=null&&jM(t,e),e}function t1(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),t}function n1(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&t1(o,e),e}function i1(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function o1(n,e){const t={},o=f(n,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),t}function s1(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],a1(u)),e}function r1(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const o=f(n,["fileName"]);o!=null&&h(e,["fileName"],o);const r=f(n,["config"]);return r!=null&&o1(r,e),e}function a1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function l1(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function u1(n){const e={},t=f(n,["config"]);return t!=null&&l1(t,e),e}function c1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["fileSearchStores"],l)}return e}function l0(n,e){const t={},o=f(n,["mimeType"]);e!==void 0&&o!=null&&h(e,["mimeType"],o);const r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),t}function f1(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const o=f(n,["config"]);return o!=null&&l0(o,e),e}function d1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h1="Content-Type",p1="X-Server-Timeout",m1="User-Agent",Wh="x-goog-api-client",g1="1.40.0",y1=`google-genai-sdk/${g1}`,_1="v1beta1",v1="v1beta";class T1{constructor(e){var t,o,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:_1}else{if(!this.clientOptions.apiKey)throw new Ml({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:v1,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const r=[this.getRequestUrlInternal(t)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===Yh.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))r.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o,r){if(t&&t.timeout||r){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&E1(e,t.extraBody),e.headers=await this.getHeadersInternal(t,o),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await pT(r),new Jh(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await pT(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return ii(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield Ae(r.read());if(m){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=l.decode(v,{stream:!0});try{const V=JSON.parse(E);if("error"in V){const G=JSON.parse(JSON.stringify(V.error)),O=G.status,$=G.code,oe=`got status: ${O}. ${JSON.stringify(V)}`;if($>=400&&$<600)throw new Ml({message:oe,status:$})}}catch(V){if(V.name==="ApiError")throw V}u+=E;let S=-1,R=0;for(;;){S=-1,R=0;for(const O of g){const $=u.indexOf(O);$!==-1&&(S===-1||$<S)&&(S=$,R=O.length)}if(S===-1)break;const V=u.substring(0,S);u=u.substring(S+R);const G=V.trim();if(G.startsWith(d)){const O=G.substring(d.length).trim();try{const $=new Response(O,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ae(new Jh($))}catch($){throw new Error(`exception parsing stream chunk ${O}. ${$}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=y1+" "+this.clientOptions.userAgentExtra;return e[m1]=t,e[Wh]=t,e[h1]="application/json",e}async getHeadersInternal(e,t){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(p1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,t),o}getFileName(e){var t;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(t=o.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),o}async uploadFile(e,t){var o;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const d=(o=t==null?void 0:t.mimeType)!==null&&o!==void 0?o:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const g={file:r},m=this.getFileName(e),v=ce("upload/v1beta/files",g._url),E=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,m,g,t==null?void 0:t.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,o){var r;const l=this.clientOptions.uploader,u=await l.stat(t),d=String(u.size),g=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),E={};o!=null&&l0(o,E);const S=await this.fetchUploadUrl(m,d,g,v,E,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,o,r,l,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function pT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw t>=400&&t<600?new Ml({message:r,status:t}):new Error(r)}}function E1(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,u){const d=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const m=u[g],v=d[g];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[g]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[g]=m)}return d}const r=o(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S1="mcp_used/unknown";let A1=!1;function u0(n){for(const e of n)if(C1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return A1}function c0(n){var e;const t=(e=n[Wh])!==null&&e!==void 0?e:"";n[Wh]=(t+` ${S1}`).trimStart()}function C1(n){return n!==null&&typeof n=="object"&&n instanceof Pp}function I1(n){return ii(this,arguments,function*(t,o=100){let r,l=0;for(;l<o;){const u=yield Ae(t.listTools({cursor:r}));for(const d of u.tools)yield yield Ae(d),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class Pp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Pp(e,t)}async initialize(){var e,t,o,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var d=!0,g=(t=void 0,oi(I1(v))),m;m=await g.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const E=r;u.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(E){t={error:E}}finally{try{!d&&!e&&(o=g.return)&&await o.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),eR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function R1(n,e,t){const o=new JI;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(o,r),e(o)}class w1{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=b1(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(Q=>{m=Q}),E=e.callbacks,S=function(){m({})},R=this.apiClient,V={onopen:S,onmessage:Q=>{R1(R,E.onmessage,Q)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(Q){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(Q){}},G=this.webSocketFactory.create(g,M1(u),V);G.connect(),await v;const oe={setup:{model:Ye(this.apiClient,e.model)}};return G.send(JSON.stringify(oe)),new N1(G,this.apiClient)}}class N1{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=jw(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Zw(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Br.PLAY)}pause(){this.sendPlaybackControl(Br.PAUSE)}stop(){this.sendPlaybackControl(Br.STOP)}resetContext(){this.sendPlaybackControl(Br.RESET_CONTEXT)}close(){this.conn.close()}}function M1(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function b1(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const D1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function x1(n,e,t){const o=new YI;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const u=nN(l);Object.assign(o,u)}else Object.assign(o,l);e(o)}class V1{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new w1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,r,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&u0(e.config.tools)&&c0(E);const S=O1(E);if(this.apiClient.isVertexAI()){const N=this.apiClient.getProject(),U=this.apiClient.getLocation(),P=this.apiClient.getApiKey(),q=!!N&&!!U||!!P;this.apiClient.getCustomBaseUrl()&&!q?v=g:(v=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v))}else{const N=this.apiClient.getApiKey();let U="BidiGenerateContent",P="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",P="access_token"),v=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${U}?${P}=${N}`}let R=()=>{};const V=new Promise(N=>{R=N}),G=e.callbacks,O=function(){var N;(N=G==null?void 0:G.onopen)===null||N===void 0||N.call(G),R({})},$=this.apiClient,oe={onopen:O,onmessage:N=>{x1($,G.onmessage,N)},onerror:(t=G==null?void 0:G.onerror)!==null&&t!==void 0?t:function(N){},onclose:(o=G==null?void 0:G.onclose)!==null&&o!==void 0?o:function(N){}},Q=this.webSocketFactory.create(v,L1(S),oe);Q.connect(),await V;let se=Ye(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&se.startsWith("publishers/")){const N=this.apiClient.getProject(),U=this.apiClient.getLocation();N&&U&&(se=`projects/${N}/locations/${U}/`+se)}let X={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[kc.AUDIO]}:e.config.responseModalities=[kc.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const fe=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],b=[];for(const N of fe)if(this.isCallableTool(N)){const U=N;b.push(await U.tool())}else b.push(N);b.length>0&&(e.config.tools=b);const M={model:se,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=Ww(this.apiClient,M):X=Xw(this.apiClient,M),delete X.config,Q.send(JSON.stringify(X)),new U1(Q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const P1={turnComplete:!0};class U1{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=Bn(t.turns),e.isVertexAI()||(o=o.map(r=>rf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(D1)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},P1),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:tN(e)}:t={realtimeInput:eN(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function L1(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function O1(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mT=10;function gT(n){var e,t,o;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(zr(u)){r=!0;break}if(!r)return!0;const l=(o=n==null?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function zr(n){return"callTool"in n&&typeof n.callTool=="function"}function k1(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>zr(r)))!==null&&o!==void 0?o:!1}function yT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((o,r)=>{if(zr(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function _T(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q1 extends ro{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,r,l,u,d;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!k1(t)||gT(t.config))return await this.generateContentInternal(g);const m=yT(t);if(m.length>0){const G=m.map(O=>`tools[${O}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${G}.`)}let v,E;const S=Bn(g.contents),R=(l=(r=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:mT;let V=0;for(;V<R&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const G=v.candidates[0].content,O=[];for(const $ of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(zr($)){const Q=await $.callTool(v.functionCalls);O.push(...Q)}V++,E={role:"user",parts:O},g.contents=Bn(g.contents),g.contents.push(G),g.contents.push(E),_T(g.config)&&(S.push(G),S.push(E))}return _T(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var o,r,l,u,d;if(this.maybeMoveToResponseJsonSchem(t),gT(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const g=yT(t);if(g.length>0){const E=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(r=(o=t==null?void 0:t.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var r;let l;const u=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async t=>{var o;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((o=u.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Gs(no.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var o,r,l,u,d,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=t.video)===null||o===void 0)&&o.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(d=t.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>zr(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&u0(e.config.tools)){const g=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),c0(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,o,r;const l=new Map;for(const u of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(zr(u)){const d=u,g=await d.tool();for(const m of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var t,o,r;const l=(r=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:mT;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(m,v,E){return ii(this,arguments,function*(){for(var S,R,V,G,O,$;d<l;){u&&(d++,u=!1);const X=yield Ae(m.processParamsMaybeAddMcpUsage(E)),fe=yield Ae(m.generateContentStreamInternal(X)),b=[],M=[];try{for(var oe=!0,Q=(R=void 0,oi(fe)),se;se=yield Ae(Q.next()),S=se.done,!S;oe=!0){G=se.value,oe=!1;const N=G;if(yield yield Ae(N),N.candidates&&(!((O=N.candidates[0])===null||O===void 0)&&O.content)){M.push(N.candidates[0].content);for(const U of($=N.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(d<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(U.functionCall.name)){const P=yield Ae(v.get(U.functionCall.name).callTool([U.functionCall]));b.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(N){R={error:N}}finally{try{!oe&&!S&&(V=Q.return)&&(yield Ae(V.call(Q)))}finally{if(R)throw R.error}}if(b.length>0){u=!0;const N=new gl;N.candidates=[{content:{role:"user",parts:b}}],yield yield Ae(N);const U=[];U.push(...M),U.push({role:"user",parts:b});const P=Bn(E.contents).concat(U);E.contents=P}else break}})})(this,g,e)}async generateContentInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=fT(this.apiClient,e);return d=ce("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=hT(v),S=new gl;return Object.assign(S,E),S})}else{const m=cT(this.apiClient,e);return d=ce("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=dT(v),S=new gl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=fT(this.apiClient,e);return d=ce("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(E){return ii(this,arguments,function*(){var S,R,V,G;try{for(var O=!0,$=oi(E),oe;oe=yield Ae($.next()),S=oe.done,!S;O=!0){G=oe.value,O=!1;const Q=G,se=hT(yield Ae(Q.json()),e);se.sdkHttpResponse={headers:Q.headers};const X=new gl;Object.assign(X,se),yield yield Ae(X)}}catch(Q){R={error:Q}}finally{try{!O&&!S&&(V=$.return)&&(yield Ae(V.call($)))}finally{if(R)throw R.error}}})})}else{const m=cT(this.apiClient,e);return d=ce("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(E){return ii(this,arguments,function*(){var S,R,V,G;try{for(var O=!0,$=oi(E),oe;oe=yield Ae($.next()),S=oe.done,!S;O=!0){G=oe.value,O=!1;const Q=G,se=dT(yield Ae(Q.json()),e);se.sdkHttpResponse={headers:Q.headers};const X=new gl;Object.assign(X,se),yield yield Ae(X)}}catch(Q){R={error:Q}}finally{try{!O&&!S&&(V=$.return)&&(yield Ae(V.call($)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=VN(this.apiClient,e);return d=ce("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=UN(v),S=new Kv;return Object.assign(S,E),S})}else{const m=xN(this.apiClient,e);return d=ce("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=PN(v),S=new Kv;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=JN(this.apiClient,e);return d=ce("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=QN(v),S=new Qv;return Object.assign(S,E),S})}else{const m=YN(this.apiClient,e);return d=ce("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=KN(v),S=new Qv;return Object.assign(S,E),S})}}async editImageInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=NN(this.apiClient,e);return l=ce("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=MN(g),v=new VI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=JM(this.apiClient,e);return l=ce("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=KM(g),v=new PI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=wM(this.apiClient,e);return l=ce("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=NM(g),v=new UI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=PM(this.apiClient,e);return l=ce("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=UM(g),v=new LI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=fM(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Xh(v))}else{const m=cM(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>$h(v))}}async listInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=TM(this.apiClient,e);return d=ce("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=SM(v),S=new $v;return Object.assign(S,E),S})}else{const m=vM(this.apiClient,e);return d=ce("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=EM(v),S=new $v;return Object.assign(S,E),S})}}async update(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=zM(this.apiClient,e);return d=ce("{model}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Xh(v))}else{const m=HM(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>$h(v))}}async delete(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=CN(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=RN(v),S=new Xv;return Object.assign(S,E),S})}else{const m=AN(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=IN(v),S=new Xv;return Object.assign(S,E),S})}}async countTokens(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=TN(this.apiClient,e);return d=ce("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=SN(v),S=new Wv;return Object.assign(S,E),S})}else{const m=vN(this.apiClient,e);return d=ce("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=EN(v),S=new Wv;return Object.assign(S,E),S})}}async computeTokens(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=dN(this.apiClient,e);return l=ce("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=hN(g),v=new OI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=eM(this.apiClient,e);return d=ce("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>{const E=ZN(v),S=new qc;return Object.assign(S,E),S})}else{const m=jN(this.apiClient,e);return d=ce("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const E=WN(v),S=new qc;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G1 extends ro{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=wI(e);return d=ce("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u}else{const m=RI(e);return d=ce("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=vI(e);return l=ce("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B1(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function F1(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>W1(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function H1(n,e,t){const o={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&h(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],X1(n,d));const g=f(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&h(t,["fieldMask"],g),o}function z1(n,e){const t={},o=f(e,["config"]);return o!=null&&h(t,["config"],H1(n,o,t)),t}function Y1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function J1(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function K1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function Q1(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function $1(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Vp(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&h(e,["setup","systemInstruction"],F1(nn(V)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let fe=na(G);Array.isArray(fe)&&(fe=fe.map(b=>j1(ta(b)))),h(e,["setup","tools"],fe)}const O=f(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],Z1(O));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const oe=f(n,["outputAudioTranscription"]);e!==void 0&&oe!=null&&h(e,["setup","outputAudioTranscription"],oe);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&h(e,["setup","realtimeInputConfig"],Q);const se=f(n,["contextWindowCompression"]);e!==void 0&&se!=null&&h(e,["setup","contextWindowCompression"],se);const X=f(n,["proactivity"]);if(e!==void 0&&X!=null&&h(e,["setup","proactivity"],X),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function X1(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],Ye(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],$1(r,t)),t}function W1(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],Y1(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],J1(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],B1(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function Z1(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function j1(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],K1(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],Q1(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eb(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function tb(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=eb(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(m=>u.includes(m)?`generationConfig.${m}`:m));const g=[];l&&g.push(l),d.length>0&&g.push(...d),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class nb extends ro{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=z1(this.apiClient,e);l=ce("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=tb(d,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ib(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),t}function ob(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&ib(o,e),e}function sb(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function rb(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function ab(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const o=f(n,["config"]);return o!=null&&rb(o,e),e}function lb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ub extends ro{constructor(e){super(),this.apiClient=e,this.list=async t=>new Gs(no.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:t.parent,config:o.config}),await this.listInternal(t),t)}async get(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sb(e);return l=ce("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ob(e);r=ce("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ab(e);return l=ce("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=lb(g),v=new kI;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cb extends ro{constructor(e,t=new ub(e)){super(),this.apiClient=e,this.documents=t,this.list=async(o={})=>new Gs(no.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=e1(e);return l=ce("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=i1(e);return l=ce("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=n1(e);r=ce("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=u1(e);return l=ce("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=c1(g),v=new qI;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=f1(e);return l=ce("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=d1(g),v=new GI;return Object.assign(v,m),v})}}async importFile(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=r1(e);return l=ce("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=s1(g),v=new Np;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let f0=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return f0=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^t()&15>>+o/4).toString(16))};const fb=()=>f0();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zh(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const jh=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fn extends Error{}class ln extends Fn{constructor(e,t,o,r){super(`${ln.makeMessage(e,t,o)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,o){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,o,r){if(!e||!r)return new uf({message:o,cause:jh(t)});const l=t;return e===400?new h0(e,l,o,r):e===401?new p0(e,l,o,r):e===403?new m0(e,l,o,r):e===404?new g0(e,l,o,r):e===409?new y0(e,l,o,r):e===422?new _0(e,l,o,r):e===429?new v0(e,l,o,r):e>=500?new T0(e,l,o,r):new ln(e,l,o,r)}}class ep extends ln{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class uf extends ln{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class d0 extends uf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class h0 extends ln{}class p0 extends ln{}class m0 extends ln{}class g0 extends ln{}class y0 extends ln{}class _0 extends ln{}class v0 extends ln{}class T0 extends ln{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const db=/^[a-z][a-z0-9+.-]*:/i,hb=n=>db.test(n);let tp=n=>(tp=Array.isArray,tp(n));const pb=tp;let mb=pb;const vT=mb;function gb(n){if(!n)return!0;for(const e in n)return!1;return!0}function yb(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const _b=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Fn(`${n} must be an integer`);if(e<0)throw new Fn(`${n} must be a positive integer`);return e},vb=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tb=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eb(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Sb=()=>{var n,e,t,o,r;const l=Eb();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lr,"X-Stainless-OS":ET(Deno.build.os),"X-Stainless-Arch":TT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lr,"X-Stainless-OS":ET((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":TT((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=Ab();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Ab(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const o=t.exec(navigator.userAgent);if(o){const r=o[1]||0,l=o[2]||0,u=o[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const TT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",ET=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Tc;const Cb=()=>Tc??(Tc=Sb());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ib(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function E0(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function Rb(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return E0({start(){},async pull(t){const{done:o,value:r}=await e.next();o?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function S0(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function wb(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const o=n.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nb=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const A0=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function bh(n,e,t){return A0(),new File(n,e??"unknown_file",t)}function Mb(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const bb=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const C0=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",Db=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&C0(n),xb=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function Vb(n,e,t){if(A0(),n=await n,Db(n))return n instanceof File?n:bh([await n.arrayBuffer()],n.name);if(xb(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),bh(await np(r),e,t)}const o=await np(n);if(e||(e=Mb(n)),!(t!=null&&t.type)){const r=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return bh(o,e,t)}async function np(n){var e,t,o,r,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(C0(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(bb(n))try{for(var d=!0,g=oi(n),m;m=await g.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const v=r;u.push(...await np(v))}}catch(v){t={error:v}}finally{try{!d&&!e&&(o=g.return)&&await o.call(g)}finally{if(t)throw t.error}}else{const v=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${Pb(n)}`)}return u}function Pb(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class I0{constructor(e){this._client=e}}I0._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R0(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ST=Object.freeze(Object.create(null)),Ub=(n=R0)=>(function(t,...o){if(t.length===1)return t[0];let r=!1;const l=[],u=t.reduce((v,E,S)=>{var R,V,G;/[?#]/.test(E)&&(r=!0);const O=o[S];let $=(r?encodeURIComponent:n)(""+O);return S!==o.length&&(O==null||typeof O=="object"&&O.toString===((G=Object.getPrototypeOf((V=Object.getPrototypeOf((R=O.hasOwnProperty)!==null&&R!==void 0?R:ST))!==null&&V!==void 0?V:ST))===null||G===void 0?void 0:G.toString))&&($=O+"",l.push({start:v.length+E.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(O).slice(8,-1)} is not a valid path parameter`})),v+E+(S===o.length?"":$)},""),d=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(d))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((v,E)=>v.start-E.start),l.length>0){let v=0;const E=l.reduce((S,R)=>{const V=" ".repeat(R.start-v),G="^".repeat(R.length);return v=R.start+R.length,S+V+G},"");throw new Fn(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${u}
${E}`)}return u}),Ec=Ub(R0);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w0 extends I0{create(e,t){var o;const{api_version:r=this._client.apiVersion}=e,l=Bc(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Fn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Fn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ec`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,t={},o){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(Ec`/${r}/interactions/${e}`,o)}cancel(e,t={},o){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(Ec`/${r}/interactions/${e}/cancel`,o)}get(e,t={},o){var r;const l=t??{},{api_version:u=this._client.apiVersion}=l,d=Bc(l,["api_version"]);return this._client.get(Ec`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},o),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}w0._key=Object.freeze(["interactions"]);class N0 extends w0{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lb(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let o=0;for(const r of n)t.set(r,o),o+=r.length;return t}let Sc;function Up(n){let e;return(Sc??(e=new globalThis.TextEncoder,Sc=e.encode.bind(e)))(n)}let Ac;function AT(n){let e;return(Ac??(e=new globalThis.TextDecoder,Ac=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Up(e):e;this.buffer=Lb([this.buffer,t]);const o=[];let r;for(;(r=Ob(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(AT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=AT(this.buffer.subarray(0,l));o.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}cf.NEWLINE_CHARS=new Set([`
`,"\r"]);cf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Ob(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function kb(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fc={off:0,error:200,warn:300,info:400,debug:500},CT=(n,e,t)=>{if(n){if(yb(Fc,n))return n;an(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Fc))}`)}};function vl(){}function Cc(n,e,t){return!e||Fc[n]>Fc[t]?vl:e[n].bind(e)}const qb={error:vl,warn:vl,info:vl,debug:vl};let IT=new WeakMap;function an(n){var e;const t=n.logger,o=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return qb;const r=IT.get(t);if(r&&r[0]===o)return r[1];const l={error:Cc("error",t,o),warn:Cc("warn",t,o),info:Cc("info",t,o),debug:Cc("debug",t,o)};return IT.set(t,[o,l]),l}const Ds=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fr{constructor(e,t,o){this.iterator=e,this.controller=t,this.client=o}static fromSSEResponse(e,t,o){let r=!1;const l=o?an(o):console;function u(){return ii(this,arguments,function*(){var g,m,v,E;if(r)throw new Fn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var R=!0,V=oi(Gb(e,t)),G;G=yield Ae(V.next()),g=G.done,!g;R=!0){E=G.value,R=!1;const O=E;if(!S)if(O.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ae(JSON.parse(O.data))}catch($){throw l.error("Could not parse message into JSON:",O.data),l.error("From chunk:",O.raw),$}}}catch(O){m={error:O}}finally{try{!R&&!g&&(v=V.return)&&(yield Ae(v.call(V)))}finally{if(m)throw m.error}}S=!0}catch(O){if(Zh(O))return yield Ae(void 0);throw O}finally{S||t.abort()}})}return new Fr(u,t,o)}static fromReadableStream(e,t,o){let r=!1;function l(){return ii(this,arguments,function*(){var g,m,v,E;const S=new cf,R=S0(e);try{for(var V=!0,G=oi(R),O;O=yield Ae(G.next()),g=O.done,!g;V=!0){E=O.value,V=!1;const $=E;for(const oe of S.decode($))yield yield Ae(oe)}}catch($){m={error:$}}finally{try{!V&&!g&&(v=G.return)&&(yield Ae(v.call(G)))}finally{if(m)throw m.error}}for(const $ of S.flush())yield yield Ae($)})}function u(){return ii(this,arguments,function*(){var g,m,v,E;if(r)throw new Fn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var R=!0,V=oi(l()),G;G=yield Ae(V.next()),g=G.done,!g;R=!0){E=G.value,R=!1;const O=E;S||O&&(yield yield Ae(JSON.parse(O)))}}catch(O){m={error:O}}finally{try{!R&&!g&&(v=V.return)&&(yield Ae(v.call(V)))}finally{if(m)throw m.error}}S=!0}catch(O){if(Zh(O))return yield Ae(void 0);throw O}finally{S||t.abort()}})}return new Fr(u,t,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],o=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=o.next();e.push(u),t.push(u)}return l.shift()}});return[new Fr(()=>r(e),this.controller,this.client),new Fr(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return E0({async start(){t=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:l}=await t.next();if(l)return o.close();const u=Up(JSON.stringify(r)+`
`);o.enqueue(u)}catch(r){o.error(r)}},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}}function Gb(n,e){return ii(this,arguments,function*(){var o,r,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Fn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Fn("Attempted to iterate over a response with no body");const d=new Fb,g=new cf,m=S0(n.body);try{for(var v=!0,E=oi(Bb(m)),S;S=yield Ae(E.next()),o=S.done,!o;v=!0){u=S.value,v=!1;const R=u;for(const V of g.decode(R)){const G=d.decode(V);G&&(yield yield Ae(G))}}}catch(R){r={error:R}}finally{try{!v&&!o&&(l=E.return)&&(yield Ae(l.call(E)))}finally{if(r)throw r.error}}for(const R of g.flush()){const V=d.decode(R);V&&(yield yield Ae(V))}})}function Bb(n){return ii(this,arguments,function*(){var t,o,r,l;let u=new Uint8Array;try{for(var d=!0,g=oi(n),m;m=yield Ae(g.next()),t=m.done,!t;d=!0){l=m.value,d=!1;const v=l;if(v==null)continue;const E=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Up(v):v;let S=new Uint8Array(u.length+E.length);S.set(u),S.set(E,u.length),u=S;let R;for(;(R=kb(u))!==-1;)yield yield Ae(u.slice(0,R)),u=u.slice(R)}}catch(v){o={error:v}}finally{try{!d&&!t&&(r=g.return)&&(yield Ae(r.call(g)))}finally{if(o)throw o.error}}u.length>0&&(yield yield Ae(u))})}class Fb{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,o,r]=Hb(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function Hb(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function zb(n,e){const{response:t,requestLogID:o,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var d;if(e.options.stream)return an(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Fr.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),m=(d=g==null?void 0:g.split(";")[0])===null||d===void 0?void 0:d.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return an(n).debug(`[${o}] response parsed`,Ds({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lp extends Promise{constructor(e,t,o=zb){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Lp(this.client,this.responsePromise,async(t,o)=>e(await this.parseResponse(t,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M0=Symbol("brand.privateNullableHeaders");function*Yb(n){if(!n)return;if(M0 in n){const{values:o,nulls:r}=n;yield*o.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():vT(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let o of t){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=vT(o[1])?o[1]:[o[1]];let u=!1;for(const d of l)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const yl=n=>{const e=new Headers,t=new Set;for(const o of n){const r=new Set;for(const[l,u]of Yb(o)){const d=l.toLowerCase();r.has(d)||(e.delete(l),r.add(d)),u===null?(e.delete(l),t.add(d)):(e.append(l,u),t.delete(d))}}return{[M0]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dh=n=>{var e,t,o,r,l,u;if(typeof globalThis.process<"u")return(o=(t=(e=hI)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var b0;class ff{constructor(e){var t,o,r,l,u,d,g,{baseURL:m=Dh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=Dh("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,S=Bc(e,["baseURL","apiKey","apiVersion"]);const R=Object.assign(Object.assign({apiKey:v,apiVersion:E},S),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=R.baseURL,this.timeout=(o=R.timeout)!==null&&o!==void 0?o:ff.DEFAULT_TIMEOUT,this.logger=(r=R.logger)!==null&&r!==void 0?r:console;const V="warn";this.logLevel=V,this.logLevel=(u=(l=CT(R.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:CT(Dh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:V,this.fetchOptions=R.fetchOptions,this.maxRetries=(d=R.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(g=R.fetch)!==null&&g!==void 0?g:Ib(),this.encoder=Nb,this._options=R,this.apiKey=v,this.apiVersion=E,this.clientAdapter=R.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=yl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return yl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return yl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,o])=>typeof o<"u").map(([t,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(t)}=`;throw new Fn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Lr}`}defaultIdempotencyKey(){return`stainless-node-retry-${fb()}`}makeStatusError(e,t,o,r){return ln.generate(e,t,o,r)}buildURL(e,t,o){const r=!this.baseURLOverridden()&&o||this.baseURL,l=hb(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return gb(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:o}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Lp(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,o){var r,l,u;const d=await e,g=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=g),await this.prepareOptions(d);const{req:m,url:v,timeout:E}=await this.buildRequest(d,{retryCount:g-t});await this.prepareRequest(m,{url:v,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),R=o===void 0?"":`, retryOf: ${o}`,V=Date.now();if(an(this).debug(`[${S}] sending request`,Ds({retryOfRequestLogID:o,method:d.method,url:v,options:d,headers:m.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new ep;const G=new AbortController,O=await this.fetchWithTimeout(v,m,E,G).catch(jh),$=Date.now();if(O instanceof globalThis.Error){const Q=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new ep;const se=Zh(O)||/timed? ?out/i.test(String(O)+("cause"in O?String(O.cause):""));if(t)return an(this).info(`[${S}] connection ${se?"timed out":"failed"} - ${Q}`),an(this).debug(`[${S}] connection ${se?"timed out":"failed"} (${Q})`,Ds({retryOfRequestLogID:o,url:v,durationMs:$-V,message:O.message})),this.retryRequest(d,t,o??S);throw an(this).info(`[${S}] connection ${se?"timed out":"failed"} - error; no more retries left`),an(this).debug(`[${S}] connection ${se?"timed out":"failed"} (error; no more retries left)`,Ds({retryOfRequestLogID:o,url:v,durationMs:$-V,message:O.message})),se?new d0:new uf({cause:O})}const oe=`[${S}${R}] ${m.method} ${v} ${O.ok?"succeeded":"failed"} with status ${O.status} in ${$-V}ms`;if(!O.ok){const Q=await this.shouldRetry(O);if(t&&Q){const N=`retrying, ${t} attempts remaining`;return await wb(O.body),an(this).info(`${oe} - ${N}`),an(this).debug(`[${S}] response error (${N})`,Ds({retryOfRequestLogID:o,url:O.url,status:O.status,headers:O.headers,durationMs:$-V})),this.retryRequest(d,t,o??S,O.headers)}const se=Q?"error; no more retries left":"error; not retryable";an(this).info(`${oe} - ${se}`);const X=await O.text().catch(N=>jh(N).message),fe=vb(X),b=fe?void 0:X;throw an(this).debug(`[${S}] response error (${se})`,Ds({retryOfRequestLogID:o,url:O.url,status:O.status,headers:O.headers,message:b,durationMs:Date.now()-V})),this.makeStatusError(O.status,fe,b,O.headers)}return an(this).info(oe),an(this).debug(`[${S}] response start`,Ds({retryOfRequestLogID:o,url:O.url,status:O.status,headers:O.headers,durationMs:$-V})),{response:O,options:d,controller:G,requestLogID:S,retryOfRequestLogID:o,startTime:V}}async fetchWithTimeout(e,t,o,r){const l=t||{},{signal:u,method:d}=l,g=Bc(l,["signal","method"]),m=r.abort.bind(r);u&&u.addEventListener("abort",m,{once:!0});const v=setTimeout(m,o),E=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,S=Object.assign(Object.assign(Object.assign({signal:r.signal},E?{duplex:"half"}:{}),{method:"GET"}),g);d&&(S.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,S)}finally{clearTimeout(v)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,o,r){var l;let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const m=parseFloat(d);Number.isNaN(m)||(u=m)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const m=parseFloat(g);Number.isNaN(m)?u=Date.parse(g)-Date.now():u=m*1e3}if(!(u&&0<=u&&u<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,m)}return await Tb(u),this.makeRequest(e,t-1,o)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var o,r,l;const u=Object.assign({},e),{method:d,path:g,query:m,defaultBaseURL:v}=u,E=this.buildURL(g,m,v);"timeout"in u&&_b("timeout",u.timeout),u.timeout=(o=u.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:R}=this.buildBody({options:u}),V=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:V},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&R instanceof globalThis.ReadableStream&&{duplex:"half"}),R&&{body:R}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:o,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=yl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Cb()),this._options.defaultHeaders,o,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=yl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Rb(e)}:this.encoder({body:e,headers:o})}}ff.DEFAULT_TIMEOUT=6e4;class Bt extends ff{constructor(){super(...arguments),this.interactions=new N0(this)}}b0=Bt;Bt.GeminiNextGenAPIClient=b0;Bt.GeminiNextGenAPIClientError=Fn;Bt.APIError=ln;Bt.APIConnectionError=uf;Bt.APIConnectionTimeoutError=d0;Bt.APIUserAbortError=ep;Bt.NotFoundError=g0;Bt.ConflictError=y0;Bt.RateLimitError=v0;Bt.BadRequestError=h0;Bt.AuthenticationError=p0;Bt.InternalServerError=T0;Bt.PermissionDeniedError=m0;Bt.UnprocessableEntityError=_0;Bt.toFile=Vb;Bt.Interactions=N0;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jb(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function Kb(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function Qb(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function $b(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function Xb(n,e,t){const o={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&h(o,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(n,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return o}function Wb(n,e,t){const o={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const X=f(n,["validationDataset"]);e!==void 0&&X!=null&&h(e,["supervisedTuningSpec"],xh(X))}else if(r==="PREFERENCE_TUNING"){const X=f(n,["validationDataset"]);e!==void 0&&X!=null&&h(e,["preferenceOptimizationSpec"],xh(X))}else if(r==="DISTILLATION"){const X=f(n,["validationDataset"]);e!==void 0&&X!=null&&h(e,["distillationSpec"],xh(X))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const X=f(n,["epochCount"]);e!==void 0&&X!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],X)}else if(d==="PREFERENCE_TUNING"){const X=f(n,["epochCount"]);e!==void 0&&X!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],X)}else if(d==="DISTILLATION"){const X=f(n,["epochCount"]);e!==void 0&&X!=null&&h(e,["distillationSpec","hyperParameters","epochCount"],X)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const X=f(n,["learningRateMultiplier"]);e!==void 0&&X!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],X)}else if(g==="PREFERENCE_TUNING"){const X=f(n,["learningRateMultiplier"]);e!==void 0&&X!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],X)}else if(g==="DISTILLATION"){const X=f(n,["learningRateMultiplier"]);e!==void 0&&X!=null&&h(e,["distillationSpec","hyperParameters","learningRateMultiplier"],X)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const X=f(n,["exportLastCheckpointOnly"]);e!==void 0&&X!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],X)}else if(m==="PREFERENCE_TUNING"){const X=f(n,["exportLastCheckpointOnly"]);e!==void 0&&X!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],X)}else if(m==="DISTILLATION"){const X=f(n,["exportLastCheckpointOnly"]);e!==void 0&&X!=null&&h(e,["distillationSpec","exportLastCheckpointOnly"],X)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const X=f(n,["adapterSize"]);e!==void 0&&X!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],X)}else if(v==="PREFERENCE_TUNING"){const X=f(n,["adapterSize"]);e!==void 0&&X!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],X)}else if(v==="DISTILLATION"){const X=f(n,["adapterSize"]);e!==void 0&&X!=null&&h(e,["distillationSpec","hyperParameters","adapterSize"],X)}let E=f(t,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const X=f(n,["tuningMode"]);e!==void 0&&X!=null&&h(e,["supervisedTuningSpec","tuningMode"],X)}const S=f(n,["customBaseModel"]);e!==void 0&&S!=null&&h(e,["customBaseModel"],S);let R=f(t,["config","method"]);if(R===void 0&&(R="SUPERVISED_FINE_TUNING"),R==="SUPERVISED_FINE_TUNING"){const X=f(n,["batchSize"]);e!==void 0&&X!=null&&h(e,["supervisedTuningSpec","hyperParameters","batchSize"],X)}let V=f(t,["config","method"]);if(V===void 0&&(V="SUPERVISED_FINE_TUNING"),V==="SUPERVISED_FINE_TUNING"){const X=f(n,["learningRate"]);e!==void 0&&X!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRate"],X)}const G=f(n,["labels"]);e!==void 0&&G!=null&&h(e,["labels"],G);const O=f(n,["beta"]);e!==void 0&&O!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],O);const $=f(n,["baseTeacherModel"]);e!==void 0&&$!=null&&h(e,["distillationSpec","baseTeacherModel"],$);const oe=f(n,["tunedTeacherModelSource"]);e!==void 0&&oe!=null&&h(e,["distillationSpec","tunedTeacherModelSource"],oe);const Q=f(n,["sftLossWeightMultiplier"]);e!==void 0&&Q!=null&&h(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],Q);const se=f(n,["outputUri"]);return e!==void 0&&se!=null&&h(e,["outputUri"],se),o}function Zb(n,e){const t={},o=f(n,["baseModel"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&uD(l);const u=f(n,["config"]);return u!=null&&Xb(u,t),t}function jb(n,e){const t={},o=f(n,["baseModel"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&cD(l,t,e);const u=f(n,["config"]);return u!=null&&Wb(u,t,e),t}function eD(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function tD(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function nD(n,e,t){const o={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function iD(n,e,t){const o={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function oD(n,e){const t={},o=f(n,["config"]);return o!=null&&nD(o,t),t}function sD(n,e){const t={},o=f(n,["config"]);return o!=null&&iD(o,t),t}function rD(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>D0(d))),h(t,["tuningJobs"],u)}return t}function aD(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>ip(d))),h(t,["tuningJobs"],u)}return t}function lD(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["model"],o);const r=f(n,["name"]);return r!=null&&h(t,["endpoint"],r),t}function uD(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(n,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(t,["examples","examples"],r)}return t}function cD(n,e,t){const o={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(l==="DISTILLATION"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function D0(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],KE(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["tuningTask","completeTime"]);g!=null&&h(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&h(t,["description"],v);const E=f(n,["baseModel"]);E!=null&&h(t,["baseModel"],E);const S=f(n,["_self"]);return S!=null&&h(t,["tunedModel"],lD(S)),t}function ip(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],KE(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&h(t,["error"],v);const E=f(n,["description"]);E!=null&&h(t,["description"],E);const S=f(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const R=f(n,["tunedModel"]);R!=null&&h(t,["tunedModel"],R);const V=f(n,["preTunedModel"]);V!=null&&h(t,["preTunedModel"],V);const G=f(n,["supervisedTuningSpec"]);G!=null&&h(t,["supervisedTuningSpec"],G);const O=f(n,["preferenceOptimizationSpec"]);O!=null&&h(t,["preferenceOptimizationSpec"],O);const $=f(n,["distillationSpec"]);$!=null&&h(t,["distillationSpec"],$);const oe=f(n,["tuningDataStats"]);oe!=null&&h(t,["tuningDataStats"],oe);const Q=f(n,["encryptionSpec"]);Q!=null&&h(t,["encryptionSpec"],Q);const se=f(n,["partnerModelTuningSpec"]);se!=null&&h(t,["partnerModelTuningSpec"],se);const X=f(n,["customBaseModel"]);X!=null&&h(t,["customBaseModel"],X);const fe=f(n,["experiment"]);fe!=null&&h(t,["experiment"],fe);const b=f(n,["labels"]);b!=null&&h(t,["labels"],b);const M=f(n,["outputUri"]);M!=null&&h(t,["outputUri"],M);const N=f(n,["pipelineJob"]);N!=null&&h(t,["pipelineJob"],N);const U=f(n,["serviceAccount"]);U!=null&&h(t,["serviceAccount"],U);const P=f(n,["tunedModelDisplayName"]);P!=null&&h(t,["tunedModelDisplayName"],P);const q=f(n,["veoTuningSpec"]);return q!=null&&h(t,["veoTuningSpec"],q),t}function fD(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(n,["done"]);u!=null&&h(t,["done"],u);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function xh(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["validationDatasetUri"],o);const r=f(n,["vertexDatasetResource"]);return r!=null&&h(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dD extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Gs(no.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var o;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((o=t.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:zh.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=tD(e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>ip(v))}else{const m=eD(e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>D0(v))}}async listInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=sD(e);return d=ce("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=aD(v),S=new Zv;return Object.assign(S,E),S})}else{const m=oD(e);return d=ce("tunedModels",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=rD(v),S=new Zv;return Object.assign(S,E),S})}}async cancel(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Kb(e);return d=ce("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=$b(v),S=new jv;return Object.assign(S,E),S})}else{const m=Jb(e);return d=ce("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Qb(v),S=new jv;return Object.assign(S,E),S})}}async tuneInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=jb(e,e);return l=ce("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>ip(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Zb(e);return l=ce("tunedModels",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>fD(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hD{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pD=1024*1024*8,mD=3,gD=1e3,yD=2,Hc="x-goog-upload-status";async function _D(n,e,t){var o;const r=await x0(n,e,t),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Hc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function vD(n,e,t){var o;const r=await x0(n,e,t),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Hc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=BE(l),d=new Mp;return Object.assign(d,u),d}async function x0(n,e,t){var o,r;let l=0,u=0,d=new Jh(new Response),g="upload";for(l=n.size;u<l;){const m=Math.min(pD,l-u),v=n.slice(u,u+m);u+m>=l&&(g+=", finalize");let E=0,S=gD;for(;E<mD&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[Hc]));)E++,await ED(S),S=S*yD;if(u+=m,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[Hc])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function TD(n){return{size:n.size,type:n.type}}function ED(n){return new Promise(e=>setTimeout(e,n))}class SD{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _D(e,t,o)}async uploadToFileSearchStore(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vD(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AD{create(e,t,o){return new CD(e,t,o)}}class CD{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RT="x-goog-api-key";class ID{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(RT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(RT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RD="gl-node/";class wD{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Bt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=yI(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new ID(this.apiKey);this.apiClient=new T1({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:RD+"web",uploader:new SD,downloader:new hD}),this.models=new q1(this.apiClient),this.live=new V1(this.apiClient,r,new AD),this.batches=new KR(this.apiClient),this.chats=new Nw(this.models,this.apiClient),this.caches=new Iw(this.apiClient),this.files=new Gw(this.apiClient),this.operations=new G1(this.apiClient),this.authTokens=new nb(this.apiClient),this.tunings=new dD(this.apiClient),this.fileSearchStores=new cb(this.apiClient)}}const ND=async()=>{const n=new wD({apiKey:"PLACEHOLDER_API_KEY"});try{const e=await n.models.generateContent({model:"gemini-3-flash-preview",contents:"Gere uma dica de segurana curta e nica para proteger contas de e-mail. Retorne um objeto JSON com os campos 'title' (ttulo) e 'content' (contedo) em portugus brasileiro.",config:{responseMimeType:"application/json",responseSchema:{type:ti.OBJECT,properties:{title:{type:ti.STRING},content:{type:ti.STRING}},required:["title","content"]}}});return JSON.parse(e.text)}catch(e){return console.error("Error fetching Gemini tip:",e),{title:"Lembrete de Segurana",content:"Use senhas exclusivas para cada conta e habilite a Autenticao de Dois Fatores (2FA) sempre que possvel."}}},MD=()=>{};var wT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=function(n){const e=[];let t=0;for(let o=0;o<n.length;o++){let r=n.charCodeAt(o);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++o)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},bD=function(n){const e=[];let t=0,o=0;for(;t<n.length;){const r=n[t++];if(r<128)e[o++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[o++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],u=n[t++],d=n[t++],g=((r&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[o++]=String.fromCharCode(55296+(g>>10)),e[o++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[o++]=String.fromCharCode((r&15)<<12|(l&63)<<6|u&63)}}return e.join("")},P0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<n.length;r+=3){const l=n[r],u=r+1<n.length,d=u?n[r+1]:0,g=r+2<n.length,m=g?n[r+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|m>>6,R=m&63;g||(R=64,u||(S=64)),o.push(t[v],t[E],t[S],t[R])}return o.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(V0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):bD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const m=r<n.length?t[n.charAt(r)]:64;++r;const E=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||d==null||m==null||E==null)throw new DD;const S=l<<2|d>>4;if(o.push(S),m!==64){const R=d<<4&240|m>>2;if(o.push(R),E!==64){const V=m<<6&192|E;o.push(V)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class DD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xD=function(n){const e=V0(n);return P0.encodeByteArray(e,!0)},zc=function(n){return xD(n).replace(/\./g,"")},VD=function(n){try{return P0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=()=>PD().__FIREBASE_DEFAULTS__,LD=()=>{if(typeof process>"u"||typeof wT>"u")return;const n=wT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},OD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&VD(n[1]);return e&&JSON.parse(e)},Op=()=>{try{return MD()||UD()||LD()||OD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},kD=n=>{var e,t;return(t=(e=Op())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},qD=n=>{const e=kD(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},U0=()=>{var n;return(n=Op())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BD(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[zc(JSON.stringify(t)),zc(JSON.stringify(u)),""].join(".")}const Cl={};function HD(){const n={prod:[],emulator:[]};for(const e of Object.keys(Cl))Cl[e]?n.emulator.push(e):n.prod.push(e);return n}function zD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let NT=!1;function YD(n,e){if(typeof window>"u"||typeof document>"u"||!kp(window.location.host)||Cl[n]===e||Cl[n]||NT)return;Cl[n]=e;function t(S){return`__firebase__banner__${S}`}const o="__firebase__banner",l=HD().prod.length>0;function u(){const S=document.getElementById(o);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{NT=!0,u()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=zD(o),R=t("text"),V=document.getElementById(R)||document.createElement("span"),G=t("learnmore"),O=document.getElementById(G)||document.createElement("a"),$=t("preprendIcon"),oe=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Q=S.element;d(Q),v(O,G);const se=m();g(oe,$),Q.append(oe,V,O,se),document.body.appendChild(Q)}l?(V.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KD(){var e;const n=(e=Op())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QD(){return!KD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $D(){try{return typeof indexedDB=="object"}catch{return!1}}function XD(){return new Promise((n,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(o),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="FirebaseError";class oa extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=WD,Object.setPrototypeOf(this,oa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L0.prototype.create)}}class L0{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],u=l?ZD(l,o):"Error",d=`${this.serviceName}: ${u} (${r}).`;return new oa(r,d,o)}}function ZD(n,e){return n.replace(jD,(t,o)=>{const r=e[o];return r!=null?String(r):`<${o}?>`})}const jD=/\{\$([^}]+)}/g;function Yc(n,e){if(n===e)return!0;const t=Object.keys(n),o=Object.keys(e);for(const r of t){if(!o.includes(r))return!1;const l=n[r],u=e[r];if(MT(l)&&MT(u)){if(!Yc(l,u))return!1}else if(l!==u)return!1}for(const r of o)if(!t.includes(r))return!1;return!0}function MT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(n){return n&&n._delegate?n._delegate:n}class bl{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new GD;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(o)return null;throw r}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nx(e))try{this.getOrInitializeService({instanceIdentifier:xs})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});o.resolve(l)}catch{}}}}clearInstance(e=xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xs){return this.instances.has(e)}getOptions(e=xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);o===d&&u.resolve(r)}return r}onInit(e,t){const o=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(o)??new Set;r.add(e),this.onInitCallbacks.set(o,r);const l=this.instances.get(o);return l&&e(l,o),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const r of o)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:tx(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=xs){return this.component?this.component.multipleInstances?e:xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tx(n){return n===xs?void 0:n}function nx(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ex(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const ox={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},sx=Fe.INFO,rx={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},ax=(n,e,...t)=>{if(e<n.logLevel)return;const o=new Date().toISOString(),r=rx[e];if(r)console[r](`[${o}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class O0{constructor(e){this.name=e,this._logLevel=sx,this._logHandler=ax,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ox[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const lx=(n,e)=>e.some(t=>n instanceof t);let bT,DT;function ux(){return bT||(bT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cx(){return DT||(DT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k0=new WeakMap,op=new WeakMap,q0=new WeakMap,Vh=new WeakMap,qp=new WeakMap;function fx(n){const e=new Promise((t,o)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Ho(n.result)),r()},u=()=>{o(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&k0.set(t,n)}).catch(()=>{}),qp.set(e,n),e}function dx(n){if(op.has(n))return;const e=new Promise((t,o)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),r()},u=()=>{o(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});op.set(n,e)}let sp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return op.get(n);if(e==="objectStoreNames")return n.objectStoreNames||q0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ho(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hx(n){sp=n(sp)}function px(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=n.call(Ph(this),e,...t);return q0.set(o,e.sort?e.sort():[e]),Ho(o)}:cx().includes(n)?function(...e){return n.apply(Ph(this),e),Ho(k0.get(this))}:function(...e){return Ho(n.apply(Ph(this),e))}}function mx(n){return typeof n=="function"?px(n):(n instanceof IDBTransaction&&dx(n),lx(n,ux())?new Proxy(n,sp):n)}function Ho(n){if(n instanceof IDBRequest)return fx(n);if(Vh.has(n))return Vh.get(n);const e=mx(n);return e!==n&&(Vh.set(n,e),qp.set(e,n)),e}const Ph=n=>qp.get(n);function gx(n,e,{blocked:t,upgrade:o,blocking:r,terminated:l}={}){const u=indexedDB.open(n,e),d=Ho(u);return o&&u.addEventListener("upgradeneeded",g=>{o(Ho(u.result),g.oldVersion,g.newVersion,Ho(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const yx=["get","getKey","getAll","getAllKeys","count"],_x=["put","add","delete","clear"],Uh=new Map;function xT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Uh.get(e))return Uh.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,r=_x.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(r||yx.includes(t)))return;const l=async function(u,...d){const g=this.transaction(u,r?"readwrite":"readonly");let m=g.store;return o&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),r&&g.done]))[0]};return Uh.set(e,l),l}hx(n=>({...n,get:(e,t,o)=>xT(e,t)||n.get(e,t,o),has:(e,t)=>!!xT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Tx(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function Tx(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rp="@firebase/app",VT="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new O0("@firebase/app"),Ex="@firebase/app-compat",Sx="@firebase/analytics-compat",Ax="@firebase/analytics",Cx="@firebase/app-check-compat",Ix="@firebase/app-check",Rx="@firebase/auth",wx="@firebase/auth-compat",Nx="@firebase/database",Mx="@firebase/data-connect",bx="@firebase/database-compat",Dx="@firebase/functions",xx="@firebase/functions-compat",Vx="@firebase/installations",Px="@firebase/installations-compat",Ux="@firebase/messaging",Lx="@firebase/messaging-compat",Ox="@firebase/performance",kx="@firebase/performance-compat",qx="@firebase/remote-config",Gx="@firebase/remote-config-compat",Bx="@firebase/storage",Fx="@firebase/storage-compat",Hx="@firebase/firestore",zx="@firebase/ai",Yx="@firebase/firestore-compat",Jx="firebase",Kx="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="[DEFAULT]",Qx={[rp]:"fire-core",[Ex]:"fire-core-compat",[Ax]:"fire-analytics",[Sx]:"fire-analytics-compat",[Ix]:"fire-app-check",[Cx]:"fire-app-check-compat",[Rx]:"fire-auth",[wx]:"fire-auth-compat",[Nx]:"fire-rtdb",[Mx]:"fire-data-connect",[bx]:"fire-rtdb-compat",[Dx]:"fire-fn",[xx]:"fire-fn-compat",[Vx]:"fire-iid",[Px]:"fire-iid-compat",[Ux]:"fire-fcm",[Lx]:"fire-fcm-compat",[Ox]:"fire-perf",[kx]:"fire-perf-compat",[qx]:"fire-rc",[Gx]:"fire-rc-compat",[Bx]:"fire-gcs",[Fx]:"fire-gcs-compat",[Hx]:"fire-fst",[Yx]:"fire-fst-compat",[zx]:"fire-vertex","fire-js":"fire-js",[Jx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new Map,$x=new Map,lp=new Map;function PT(n,e){try{n.container.addComponent(e)}catch(t){io.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Kc(n){const e=n.name;if(lp.has(e))return io.debug(`There were multiple attempts to register component ${e}.`),!1;lp.set(e,n);for(const t of Jc.values())PT(t,n);for(const t of $x.values())PT(t,n);return!0}function Xx(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wx(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zo=new L0("app","Firebase",Zx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t,o){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new bl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV=Kx;function G0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const o={name:ap,automaticDataCollectionEnabled:!0,...e},r=o.name;if(typeof r!="string"||!r)throw zo.create("bad-app-name",{appName:String(r)});if(t||(t=U0()),!t)throw zo.create("no-options");const l=Jc.get(r);if(l){if(Yc(t,l.options)&&Yc(o,l.config))return l;throw zo.create("duplicate-app",{appName:r})}const u=new ix(r);for(const g of lp.values())u.addComponent(g);const d=new jx(t,o,u);return Jc.set(r,d),d}function tV(n=ap){const e=Jc.get(n);if(!e&&n===ap&&U0())return G0();if(!e)throw zo.create("no-app",{appName:n});return e}function Yr(n,e,t){let o=Qx[n]??n;t&&(o+=`-${t}`);const r=o.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const u=[`Unable to register library "${o}" with version "${e}":`];r&&u.push(`library name "${o}" contains illegal characters (whitespace or "/")`),r&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),io.warn(u.join(" "));return}Kc(new bl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV="firebase-heartbeat-database",iV=1,Dl="firebase-heartbeat-store";let Lh=null;function B0(){return Lh||(Lh=gx(nV,iV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Dl)}catch(t){console.warn(t)}}}}).catch(n=>{throw zo.create("idb-open",{originalErrorMessage:n.message})})),Lh}async function oV(n){try{const t=(await B0()).transaction(Dl),o=await t.objectStore(Dl).get(F0(n));return await t.done,o}catch(e){if(e instanceof oa)io.warn(e.message);else{const t=zo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});io.warn(t.message)}}}async function UT(n,e){try{const o=(await B0()).transaction(Dl,"readwrite");await o.objectStore(Dl).put(e,F0(n)),await o.done}catch(t){if(t instanceof oa)io.warn(t.message);else{const o=zo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});io.warn(o.message)}}}function F0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV=1024,rV=30;class aV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uV(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=LT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>rV){const u=cV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){io.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=LT(),{heartbeatsToSend:o,unsentEntries:r}=lV(this._heartbeatsCache.heartbeats),l=zc(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return io.warn(t),""}}}function LT(){return new Date().toISOString().substring(0,10)}function lV(n,e=sV){const t=[];let o=n.slice();for(const r of n){const l=t.find(u=>u.agent===r.agent);if(l){if(l.dates.push(r.date),OT(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),OT(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class uV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $D()?XD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await oV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return UT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return UT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function OT(n){return zc(JSON.stringify({version:2,heartbeats:n})).length}function cV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let o=1;o<n.length;o++)n[o].date<t&&(t=n[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(n){Kc(new bl("platform-logger",e=>new vx(e),"PRIVATE")),Kc(new bl("heartbeat",e=>new aV(e),"PRIVATE")),Yr(rp,VT,n),Yr(rp,VT,"esm2020"),Yr("fire-js","")}fV("");var dV="firebase",hV="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yr(dV,hV,"app");var kT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yo,H0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,M){function N(){}N.prototype=M.prototype,b.F=M.prototype,b.prototype=new N,b.prototype.constructor=b,b.D=function(U,P,q){for(var D=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)D[Me-2]=arguments[Me];return M.prototype[P].apply(U,D)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,t),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,M,N){N||(N=0);const U=Array(16);if(typeof M=="string")for(var P=0;P<16;++P)U[P]=M.charCodeAt(N++)|M.charCodeAt(N++)<<8|M.charCodeAt(N++)<<16|M.charCodeAt(N++)<<24;else for(P=0;P<16;++P)U[P]=M[N++]|M[N++]<<8|M[N++]<<16|M[N++]<<24;M=b.g[0],N=b.g[1],P=b.g[2];let q=b.g[3],D;D=M+(q^N&(P^q))+U[0]+3614090360&4294967295,M=N+(D<<7&4294967295|D>>>25),D=q+(P^M&(N^P))+U[1]+3905402710&4294967295,q=M+(D<<12&4294967295|D>>>20),D=P+(N^q&(M^N))+U[2]+606105819&4294967295,P=q+(D<<17&4294967295|D>>>15),D=N+(M^P&(q^M))+U[3]+3250441966&4294967295,N=P+(D<<22&4294967295|D>>>10),D=M+(q^N&(P^q))+U[4]+4118548399&4294967295,M=N+(D<<7&4294967295|D>>>25),D=q+(P^M&(N^P))+U[5]+1200080426&4294967295,q=M+(D<<12&4294967295|D>>>20),D=P+(N^q&(M^N))+U[6]+2821735955&4294967295,P=q+(D<<17&4294967295|D>>>15),D=N+(M^P&(q^M))+U[7]+4249261313&4294967295,N=P+(D<<22&4294967295|D>>>10),D=M+(q^N&(P^q))+U[8]+1770035416&4294967295,M=N+(D<<7&4294967295|D>>>25),D=q+(P^M&(N^P))+U[9]+2336552879&4294967295,q=M+(D<<12&4294967295|D>>>20),D=P+(N^q&(M^N))+U[10]+4294925233&4294967295,P=q+(D<<17&4294967295|D>>>15),D=N+(M^P&(q^M))+U[11]+2304563134&4294967295,N=P+(D<<22&4294967295|D>>>10),D=M+(q^N&(P^q))+U[12]+1804603682&4294967295,M=N+(D<<7&4294967295|D>>>25),D=q+(P^M&(N^P))+U[13]+4254626195&4294967295,q=M+(D<<12&4294967295|D>>>20),D=P+(N^q&(M^N))+U[14]+2792965006&4294967295,P=q+(D<<17&4294967295|D>>>15),D=N+(M^P&(q^M))+U[15]+1236535329&4294967295,N=P+(D<<22&4294967295|D>>>10),D=M+(P^q&(N^P))+U[1]+4129170786&4294967295,M=N+(D<<5&4294967295|D>>>27),D=q+(N^P&(M^N))+U[6]+3225465664&4294967295,q=M+(D<<9&4294967295|D>>>23),D=P+(M^N&(q^M))+U[11]+643717713&4294967295,P=q+(D<<14&4294967295|D>>>18),D=N+(q^M&(P^q))+U[0]+3921069994&4294967295,N=P+(D<<20&4294967295|D>>>12),D=M+(P^q&(N^P))+U[5]+3593408605&4294967295,M=N+(D<<5&4294967295|D>>>27),D=q+(N^P&(M^N))+U[10]+38016083&4294967295,q=M+(D<<9&4294967295|D>>>23),D=P+(M^N&(q^M))+U[15]+3634488961&4294967295,P=q+(D<<14&4294967295|D>>>18),D=N+(q^M&(P^q))+U[4]+3889429448&4294967295,N=P+(D<<20&4294967295|D>>>12),D=M+(P^q&(N^P))+U[9]+568446438&4294967295,M=N+(D<<5&4294967295|D>>>27),D=q+(N^P&(M^N))+U[14]+3275163606&4294967295,q=M+(D<<9&4294967295|D>>>23),D=P+(M^N&(q^M))+U[3]+4107603335&4294967295,P=q+(D<<14&4294967295|D>>>18),D=N+(q^M&(P^q))+U[8]+1163531501&4294967295,N=P+(D<<20&4294967295|D>>>12),D=M+(P^q&(N^P))+U[13]+2850285829&4294967295,M=N+(D<<5&4294967295|D>>>27),D=q+(N^P&(M^N))+U[2]+4243563512&4294967295,q=M+(D<<9&4294967295|D>>>23),D=P+(M^N&(q^M))+U[7]+1735328473&4294967295,P=q+(D<<14&4294967295|D>>>18),D=N+(q^M&(P^q))+U[12]+2368359562&4294967295,N=P+(D<<20&4294967295|D>>>12),D=M+(N^P^q)+U[5]+4294588738&4294967295,M=N+(D<<4&4294967295|D>>>28),D=q+(M^N^P)+U[8]+2272392833&4294967295,q=M+(D<<11&4294967295|D>>>21),D=P+(q^M^N)+U[11]+1839030562&4294967295,P=q+(D<<16&4294967295|D>>>16),D=N+(P^q^M)+U[14]+4259657740&4294967295,N=P+(D<<23&4294967295|D>>>9),D=M+(N^P^q)+U[1]+2763975236&4294967295,M=N+(D<<4&4294967295|D>>>28),D=q+(M^N^P)+U[4]+1272893353&4294967295,q=M+(D<<11&4294967295|D>>>21),D=P+(q^M^N)+U[7]+4139469664&4294967295,P=q+(D<<16&4294967295|D>>>16),D=N+(P^q^M)+U[10]+3200236656&4294967295,N=P+(D<<23&4294967295|D>>>9),D=M+(N^P^q)+U[13]+681279174&4294967295,M=N+(D<<4&4294967295|D>>>28),D=q+(M^N^P)+U[0]+3936430074&4294967295,q=M+(D<<11&4294967295|D>>>21),D=P+(q^M^N)+U[3]+3572445317&4294967295,P=q+(D<<16&4294967295|D>>>16),D=N+(P^q^M)+U[6]+76029189&4294967295,N=P+(D<<23&4294967295|D>>>9),D=M+(N^P^q)+U[9]+3654602809&4294967295,M=N+(D<<4&4294967295|D>>>28),D=q+(M^N^P)+U[12]+3873151461&4294967295,q=M+(D<<11&4294967295|D>>>21),D=P+(q^M^N)+U[15]+530742520&4294967295,P=q+(D<<16&4294967295|D>>>16),D=N+(P^q^M)+U[2]+3299628645&4294967295,N=P+(D<<23&4294967295|D>>>9),D=M+(P^(N|~q))+U[0]+4096336452&4294967295,M=N+(D<<6&4294967295|D>>>26),D=q+(N^(M|~P))+U[7]+1126891415&4294967295,q=M+(D<<10&4294967295|D>>>22),D=P+(M^(q|~N))+U[14]+2878612391&4294967295,P=q+(D<<15&4294967295|D>>>17),D=N+(q^(P|~M))+U[5]+4237533241&4294967295,N=P+(D<<21&4294967295|D>>>11),D=M+(P^(N|~q))+U[12]+1700485571&4294967295,M=N+(D<<6&4294967295|D>>>26),D=q+(N^(M|~P))+U[3]+2399980690&4294967295,q=M+(D<<10&4294967295|D>>>22),D=P+(M^(q|~N))+U[10]+4293915773&4294967295,P=q+(D<<15&4294967295|D>>>17),D=N+(q^(P|~M))+U[1]+2240044497&4294967295,N=P+(D<<21&4294967295|D>>>11),D=M+(P^(N|~q))+U[8]+1873313359&4294967295,M=N+(D<<6&4294967295|D>>>26),D=q+(N^(M|~P))+U[15]+4264355552&4294967295,q=M+(D<<10&4294967295|D>>>22),D=P+(M^(q|~N))+U[6]+2734768916&4294967295,P=q+(D<<15&4294967295|D>>>17),D=N+(q^(P|~M))+U[13]+1309151649&4294967295,N=P+(D<<21&4294967295|D>>>11),D=M+(P^(N|~q))+U[4]+4149444226&4294967295,M=N+(D<<6&4294967295|D>>>26),D=q+(N^(M|~P))+U[11]+3174756917&4294967295,q=M+(D<<10&4294967295|D>>>22),D=P+(M^(q|~N))+U[2]+718787259&4294967295,P=q+(D<<15&4294967295|D>>>17),D=N+(q^(P|~M))+U[9]+3951481745&4294967295,b.g[0]=b.g[0]+M&4294967295,b.g[1]=b.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,b.g[2]=b.g[2]+P&4294967295,b.g[3]=b.g[3]+q&4294967295}o.prototype.v=function(b,M){M===void 0&&(M=b.length);const N=M-this.blockSize,U=this.C;let P=this.h,q=0;for(;q<M;){if(P==0)for(;q<=N;)r(this,b,q),q+=this.blockSize;if(typeof b=="string"){for(;q<M;)if(U[P++]=b.charCodeAt(q++),P==this.blockSize){r(this,U),P=0;break}}else for(;q<M;)if(U[P++]=b[q++],P==this.blockSize){r(this,U),P=0;break}}this.h=P,this.o+=M},o.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var M=1;M<b.length-8;++M)b[M]=0;M=this.o*8;for(var N=b.length-8;N<b.length;++N)b[N]=M&255,M/=256;for(this.v(b),b=Array(16),M=0,N=0;N<4;++N)for(let U=0;U<32;U+=8)b[M++]=this.g[N]>>>U&255;return b};function l(b,M){var N=d;return Object.prototype.hasOwnProperty.call(N,b)?N[b]:N[b]=M(b)}function u(b,M){this.h=M;const N=[];let U=!0;for(let P=b.length-1;P>=0;P--){const q=b[P]|0;U&&q==M||(N[P]=q,U=!1)}this.g=N}var d={};function g(b){return-128<=b&&b<128?l(b,function(M){return new u([M|0],M<0?-1:0)}):new u([b|0],b<0?-1:0)}function m(b){if(isNaN(b)||!isFinite(b))return E;if(b<0)return O(m(-b));const M=[];let N=1;for(let U=0;b>=N;U++)M[U]=b/N|0,N*=4294967296;return new u(M,0)}function v(b,M){if(b.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(b.charAt(0)=="-")return O(v(b.substring(1),M));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=m(Math.pow(M,8));let U=E;for(let q=0;q<b.length;q+=8){var P=Math.min(8,b.length-q);const D=parseInt(b.substring(q,q+P),M);P<8?(P=m(Math.pow(M,P)),U=U.j(P).add(m(D))):(U=U.j(N),U=U.add(m(D)))}return U}var E=g(0),S=g(1),R=g(16777216);n=u.prototype,n.m=function(){if(G(this))return-O(this).m();let b=0,M=1;for(let N=0;N<this.g.length;N++){const U=this.i(N);b+=(U>=0?U:4294967296+U)*M,M*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(V(this))return"0";if(G(this))return"-"+O(this).toString(b);const M=m(Math.pow(b,6));var N=this;let U="";for(;;){const P=se(N,M).g;N=$(N,P.j(M));let q=((N.g.length>0?N.g[0]:N.h)>>>0).toString(b);if(N=P,V(N))return q+U;for(;q.length<6;)q="0"+q;U=q+U}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function V(b){if(b.h!=0)return!1;for(let M=0;M<b.g.length;M++)if(b.g[M]!=0)return!1;return!0}function G(b){return b.h==-1}n.l=function(b){return b=$(this,b),G(b)?-1:V(b)?0:1};function O(b){const M=b.g.length,N=[];for(let U=0;U<M;U++)N[U]=~b.g[U];return new u(N,~b.h).add(S)}n.abs=function(){return G(this)?O(this):this},n.add=function(b){const M=Math.max(this.g.length,b.g.length),N=[];let U=0;for(let P=0;P<=M;P++){let q=U+(this.i(P)&65535)+(b.i(P)&65535),D=(q>>>16)+(this.i(P)>>>16)+(b.i(P)>>>16);U=D>>>16,q&=65535,D&=65535,N[P]=D<<16|q}return new u(N,N[N.length-1]&-2147483648?-1:0)};function $(b,M){return b.add(O(M))}n.j=function(b){if(V(this)||V(b))return E;if(G(this))return G(b)?O(this).j(O(b)):O(O(this).j(b));if(G(b))return O(this.j(O(b)));if(this.l(R)<0&&b.l(R)<0)return m(this.m()*b.m());const M=this.g.length+b.g.length,N=[];for(var U=0;U<2*M;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(let P=0;P<b.g.length;P++){const q=this.i(U)>>>16,D=this.i(U)&65535,Me=b.i(P)>>>16,ot=b.i(P)&65535;N[2*U+2*P]+=D*ot,oe(N,2*U+2*P),N[2*U+2*P+1]+=q*ot,oe(N,2*U+2*P+1),N[2*U+2*P+1]+=D*Me,oe(N,2*U+2*P+1),N[2*U+2*P+2]+=q*Me,oe(N,2*U+2*P+2)}for(b=0;b<M;b++)N[b]=N[2*b+1]<<16|N[2*b];for(b=M;b<2*M;b++)N[b]=0;return new u(N,0)};function oe(b,M){for(;(b[M]&65535)!=b[M];)b[M+1]+=b[M]>>>16,b[M]&=65535,M++}function Q(b,M){this.g=b,this.h=M}function se(b,M){if(V(M))throw Error("division by zero");if(V(b))return new Q(E,E);if(G(b))return M=se(O(b),M),new Q(O(M.g),O(M.h));if(G(M))return M=se(b,O(M)),new Q(O(M.g),M.h);if(b.g.length>30){if(G(b)||G(M))throw Error("slowDivide_ only works with positive integers.");for(var N=S,U=M;U.l(b)<=0;)N=X(N),U=X(U);var P=fe(N,1),q=fe(U,1);for(U=fe(U,2),N=fe(N,2);!V(U);){var D=q.add(U);D.l(b)<=0&&(P=P.add(N),q=D),U=fe(U,1),N=fe(N,1)}return M=$(b,P.j(M)),new Q(P,M)}for(P=E;b.l(M)>=0;){for(N=Math.max(1,Math.floor(b.m()/M.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),q=m(N),D=q.j(M);G(D)||D.l(b)>0;)N-=U,q=m(N),D=q.j(M);V(q)&&(q=S),P=P.add(q),b=$(b,D)}return new Q(P,b)}n.B=function(b){return se(this,b).h},n.and=function(b){const M=Math.max(this.g.length,b.g.length),N=[];for(let U=0;U<M;U++)N[U]=this.i(U)&b.i(U);return new u(N,this.h&b.h)},n.or=function(b){const M=Math.max(this.g.length,b.g.length),N=[];for(let U=0;U<M;U++)N[U]=this.i(U)|b.i(U);return new u(N,this.h|b.h)},n.xor=function(b){const M=Math.max(this.g.length,b.g.length),N=[];for(let U=0;U<M;U++)N[U]=this.i(U)^b.i(U);return new u(N,this.h^b.h)};function X(b){const M=b.g.length+1,N=[];for(let U=0;U<M;U++)N[U]=b.i(U)<<1|b.i(U-1)>>>31;return new u(N,b.h)}function fe(b,M){const N=M>>5;M%=32;const U=b.g.length-N,P=[];for(let q=0;q<U;q++)P[q]=M>0?b.i(q+N)>>>M|b.i(q+N+1)<<32-M:b.i(q+N);return new u(P,b.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,H0=o,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Yo=u}).apply(typeof kT<"u"?kT:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z0,Tl,Y0,xc,up,J0,K0,Q0;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var T=0;T<p.length;++T){var C=p[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=t(this);function r(p,T){if(T)e:{var C=o;p=p.split(".");for(var w=0;w<p.length-1;w++){var F=p[w];if(!(F in C))break e;C=C[F]}p=p[p.length-1],w=C[p],T=T(w),T!=w&&T!=null&&e(C,p,{configurable:!0,writable:!0,value:T})}}r("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(p){return p||function(T){var C=[],w;for(w in T)Object.prototype.hasOwnProperty.call(T,w)&&C.push([w,T[w]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(p){var T=typeof p;return T=="object"&&p!=null||T=="function"}function g(p,T,C){return p.call.apply(p.bind,arguments)}function m(p,T,C){return m=g,m.apply(null,arguments)}function v(p,T){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),p.apply(this,w)}}function E(p,T){function C(){}C.prototype=T.prototype,p.Z=T.prototype,p.prototype=new C,p.prototype.constructor=p,p.Ob=function(w,F,J){for(var ae=Array(arguments.length-2),we=2;we<arguments.length;we++)ae[we-2]=arguments[we];return T.prototype[F].apply(w,ae)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function R(p){const T=p.length;if(T>0){const C=Array(T);for(let w=0;w<T;w++)C[w]=p[w];return C}return[]}function V(p,T){for(let w=1;w<arguments.length;w++){const F=arguments[w];var C=typeof F;if(C=C!="object"?C:F?Array.isArray(F)?"array":C:"null",C=="array"||C=="object"&&typeof F.length=="number"){C=p.length||0;const J=F.length||0;p.length=C+J;for(let ae=0;ae<J;ae++)p[C+ae]=F[ae]}else p.push(F)}}class G{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function O(p){u.setTimeout(()=>{throw p},0)}function $(){var p=b;let T=null;return p.g&&(T=p.g,p.g=p.g.next,p.g||(p.h=null),T.next=null),T}class oe{constructor(){this.h=this.g=null}add(T,C){const w=Q.get();w.set(T,C),this.h?this.h.next=w:this.g=w,this.h=w}}var Q=new G(()=>new se,p=>p.reset());class se{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let X,fe=!1,b=new oe,M=()=>{const p=Promise.resolve(void 0);X=()=>{p.then(N)}};function N(){for(var p;p=$();){try{p.h.call(p.g)}catch(C){O(C)}var T=Q;T.j(p),T.h<100&&(T.h++,p.next=T.g,T.g=p)}fe=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(p,T){this.type=p,this.g=this.target=T,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,T=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};u.addEventListener("test",C,T),u.removeEventListener("test",C,T)}catch{}return p})();function D(p){return/^[\s\xa0]*$/.test(p)}function Me(p,T){P.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,T)}E(Me,P),Me.prototype.init=function(p,T){const C=this.type=p.type,w=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=T,T=p.relatedTarget,T||(C=="mouseover"?T=p.fromElement:C=="mouseout"&&(T=p.toElement)),this.relatedTarget=T,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ot="closure_listenable_"+(Math.random()*1e6|0),W=0;function le(p,T,C,w,F){this.listener=p,this.proxy=null,this.src=T,this.type=C,this.capture=!!w,this.ha=F,this.key=++W,this.da=this.fa=!1}function ge(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function xe(p,T,C){for(const w in p)T.call(C,p[w],w,p)}function $e(p,T){for(const C in p)T.call(void 0,p[C],C,p)}function k(p){const T={};for(const C in p)T[C]=p[C];return T}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(p,T){let C,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(C in w)p[C]=w[C];for(let J=0;J<te.length;J++)C=te[J],Object.prototype.hasOwnProperty.call(w,C)&&(p[C]=w[C])}}function pe(p){this.src=p,this.g={},this.h=0}pe.prototype.add=function(p,T,C,w,F){const J=p.toString();p=this.g[J],p||(p=this.g[J]=[],this.h++);const ae=be(p,T,w,F);return ae>-1?(T=p[ae],C||(T.fa=!1)):(T=new le(T,this.src,J,!!w,F),T.fa=C,p.push(T)),T};function Se(p,T){const C=T.type;if(C in p.g){var w=p.g[C],F=Array.prototype.indexOf.call(w,T,void 0),J;(J=F>=0)&&Array.prototype.splice.call(w,F,1),J&&(ge(T),p.g[C].length==0&&(delete p.g[C],p.h--))}}function be(p,T,C,w){for(let F=0;F<p.length;++F){const J=p[F];if(!J.da&&J.listener==T&&J.capture==!!C&&J.ha==w)return F}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),xt={};function ut(p,T,C,w,F){if(Array.isArray(T)){for(let J=0;J<T.length;J++)ut(p,T[J],C,w,F);return null}return C=da(C),p&&p[ot]?p.J(T,C,d(w)?!!w.capture:!1,F):es(p,T,C,!1,w,F)}function es(p,T,C,w,F,J){if(!T)throw Error("Invalid event type");const ae=d(F)?!!F.capture:!!F;let we=ts(p);if(we||(p[Ge]=we=new pe(p)),C=we.add(T,C,w,ae,J),C.proxy)return C;if(w=Js(),C.proxy=w,w.src=p,w.listener=C,p.addEventListener)q||(F=ae),F===void 0&&(F=!1),p.addEventListener(T.toString(),w,F);else if(p.attachEvent)p.attachEvent(li(T.toString()),w);else if(p.addListener&&p.removeListener)p.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Js(){function p(C){return T.call(p.src,p.listener,C)}const T=ca;return p}function Ks(p,T,C,w,F){if(Array.isArray(T))for(var J=0;J<T.length;J++)Ks(p,T[J],C,w,F);else w=d(w)?!!w.capture:!!w,C=da(C),p&&p[ot]?(p=p.i,J=String(T).toString(),J in p.g&&(T=p.g[J],C=be(T,C,w,F),C>-1&&(ge(T[C]),Array.prototype.splice.call(T,C,1),T.length==0&&(delete p.g[J],p.h--)))):p&&(p=ts(p))&&(T=p.g[T.toString()],p=-1,T&&(p=be(T,C,w,F)),(C=p>-1?T[p]:null)&&Qs(C))}function Qs(p){if(typeof p!="number"&&p&&!p.da){var T=p.src;if(T&&T[ot])Se(T.i,p);else{var C=p.type,w=p.proxy;T.removeEventListener?T.removeEventListener(C,w,p.capture):T.detachEvent?T.detachEvent(li(C),w):T.addListener&&T.removeListener&&T.removeListener(w),(C=ts(T))?(Se(C,p),C.h==0&&(C.src=null,T[Ge]=null)):ge(p)}}}function li(p){return p in xt?xt[p]:xt[p]="on"+p}function ca(p,T){if(p.da)p=!0;else{T=new Me(T,this);const C=p.listener,w=p.ha||p.src;p.fa&&Qs(p),p=C.call(w,T)}return p}function ts(p){return p=p[Ge],p instanceof pe?p:null}var fa="__closure_events_fn_"+(Math.random()*1e9>>>0);function da(p){return typeof p=="function"?p:(p[fa]||(p[fa]=function(T){return p.handleEvent(T)}),p[fa])}function Tt(){U.call(this),this.i=new pe(this),this.M=this,this.G=null}E(Tt,U),Tt.prototype[ot]=!0,Tt.prototype.removeEventListener=function(p,T,C,w){Ks(this,p,T,C,w)};function Vt(p,T){var C,w=p.G;if(w)for(C=[];w;w=w.G)C.push(w);if(p=p.M,w=T.type||T,typeof T=="string")T=new P(T,p);else if(T instanceof P)T.target=T.target||p;else{var F=T;T=new P(w,p),ue(T,F)}F=!0;let J,ae;if(C)for(ae=C.length-1;ae>=0;ae--)J=T.g=C[ae],F=lo(J,w,!0,T)&&F;if(J=T.g=p,F=lo(J,w,!0,T)&&F,F=lo(J,w,!1,T)&&F,C)for(ae=0;ae<C.length;ae++)J=T.g=C[ae],F=lo(J,w,!1,T)&&F}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var p=this.i;for(const T in p.g){const C=p.g[T];for(let w=0;w<C.length;w++)ge(C[w]);delete p.g[T],p.h--}}this.G=null},Tt.prototype.J=function(p,T,C,w){return this.i.add(String(p),T,!1,C,w)},Tt.prototype.K=function(p,T,C,w){return this.i.add(String(p),T,!0,C,w)};function lo(p,T,C,w){if(T=p.i.g[String(T)],!T)return!0;T=T.concat();let F=!0;for(let J=0;J<T.length;++J){const ae=T[J];if(ae&&!ae.da&&ae.capture==C){const we=ae.listener,gt=ae.ha||ae.src;ae.fa&&Se(p.i,ae),F=we.call(gt,w)!==!1&&F}}return F&&!w.defaultPrevented}function Rf(p,T){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:u.setTimeout(p,T||0)}function Yl(p){p.g=Rf(()=>{p.g=null,p.i&&(p.i=!1,Yl(p))},p.l);const T=p.h;p.h=null,p.m.apply(null,T)}class on extends U{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Yl(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(p){U.call(this),this.h=p,this.g={}}E(ns,U);var ha=[];function pa(p){xe(p.g,function(T,C){this.g.hasOwnProperty(C)&&Qs(T)},p),p.g={}}ns.prototype.N=function(){ns.Z.N.call(this),pa(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uo=u.JSON.stringify,wf=u.JSON.parse,Jl=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Kl(){}function Ql(){}var Hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ft(){P.call(this,"d")}E(Ft,P);function Rn(){P.call(this,"c")}E(Rn,P);var mt={},$l=null;function $s(){return $l=$l||new Tt}mt.Ia="serverreachability";function Xl(p){P.call(this,mt.Ia,p)}E(Xl,P);function ui(p){const T=$s();Vt(T,new Xl(T))}mt.STAT_EVENT="statevent";function is(p,T){P.call(this,mt.STAT_EVENT,p),this.stat=T}E(is,P);function Et(p){const T=$s();Vt(T,new is(T,p))}mt.Ja="timingevent";function ci(p,T){P.call(this,mt.Ja,p),this.size=T}E(ci,P);function fi(p,T){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},T)}function zn(){this.g=!0}zn.prototype.ua=function(){this.g=!1};function Nf(p,T,C,w,F,J){p.info(function(){if(p.g)if(J){var ae="",we=J.split("&");for(let Je=0;Je<we.length;Je++){var gt=we[Je].split("=");if(gt.length>1){const ct=gt[0];gt=gt[1];const bn=ct.split("_");ae=bn.length>=2&&bn[1]=="type"?ae+(ct+"="+gt+"&"):ae+(ct+"=redacted&")}}}else ae=null;else ae=J;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+T+`
`+C+`
`+ae})}function Wl(p,T,C,w,F,J,ae){p.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+T+`
`+C+`
`+J+" "+ae})}function di(p,T,C,w){p.info(function(){return"XMLHTTP TEXT ("+T+"): "+Mf(p,C)+(w?" "+w:"")})}function os(p,T){p.info(function(){return"TIMEOUT: "+T})}zn.prototype.info=function(){};function Mf(p,T){if(!p.g)return T;if(!T)return null;try{const J=JSON.parse(T);if(J){for(p=0;p<J.length;p++)if(Array.isArray(J[p])){var C=J[p];if(!(C.length<2)){var w=C[1];if(Array.isArray(w)&&!(w.length<1)){var F=w[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ae=1;ae<w.length;ae++)w[ae]=""}}}}return uo(J)}catch{return T}}var ss={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ma={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ga;function rs(){}E(rs,Kl),rs.prototype.g=function(){return new XMLHttpRequest},ga=new rs;function Oi(p){return encodeURIComponent(String(p))}function Zl(p){var T=1;p=p.split(":");const C=[];for(;T>0&&p.length;)C.push(p.shift()),T--;return p.length&&C.push(p.join(":")),C}function Yn(p,T,C,w){this.j=p,this.i=T,this.l=C,this.S=w||1,this.V=new ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}var St={},Ot={};function hi(p,T,C){p.M=1,p.A=as(Ct(T)),p.u=C,p.R=!0,Xs(p,null)}function Xs(p,T){p.F=Date.now(),pi(p),p.B=Ct(p.A);var C=p.B,w=p.S;Array.isArray(w)||(w=[String(w)]),er(C.i,"t",w),p.C=0,C=p.j.L,p.h=new Jn,p.g=hu(p.j,C?T:null,!p.u),p.P>0&&(p.O=new on(m(p.Y,p,p.g),p.P)),T=p.V,C=p.g,w=p.ba;var F="readystatechange";Array.isArray(F)||(F&&(ha[0]=F.toString()),F=ha);for(let J=0;J<F.length;J++){const ae=ut(C,F[J],w||T.handleEvent,!1,T.h||T);if(!ae)break;T.g[ae.key]=ae}T=p.J?k(p.J):{},p.u?(p.v||(p.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,T)):(p.v="GET",p.g.ea(p.B,p.v,null,T)),ui(),Nf(p.i,p.v,p.B,p.l,p.S,p.u)}Yn.prototype.ba=function(p){p=p.target;const T=this.O;T&&$n(p)==3?T.j():this.Y(p)},Yn.prototype.Y=function(p){try{if(p==this.g)e:{const we=$n(this.g),gt=this.g.ya(),Je=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||Ht(this.g)))){this.K||we!=4||gt==7||(gt==8||Je<=0?ui(3):ui(2)),mi(this);var T=this.g.ca();this.X=T;var C=bf(this);if(this.o=T==200,Wl(this.i,this.v,this.B,this.l,this.S,we,T),this.o){if(this.U&&!this.L){t:{if(this.g){var w,F=this.g;if((w=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(w)){var J=w;break t}}J=null}if(p=J)di(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gi(this,p);else{this.o=!1,this.m=3,Et(12),yn(this),wn(this);break e}}if(this.R){p=!0;let ct;for(;!this.K&&this.C<C.length;)if(ct=eu(this,C),ct==Ot){we==4&&(this.m=4,Et(14),p=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==St){this.m=4,Et(15),di(this.i,this.l,C,"[Invalid Chunk]"),p=!1;break}else di(this.i,this.l,ct,null),gi(this,ct);if(jl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||C.length!=0||this.h.h||(this.m=1,Et(16),p=!1),this.o=this.o&&p,!p)di(this.i,this.l,C,"[Invalid Chunked Response]"),yn(this),wn(this);else if(C.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Da(ae),ae.P=!0,Et(11))}}else di(this.i,this.l,C,null),gi(this,C);we==4&&yn(this),this.o&&!this.K&&(we==4?uu(this.j,this):(this.o=!1,pi(this)))}else qi(this.g),T==400&&C.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),yn(this),wn(this)}}}catch{}finally{}};function bf(p){if(!jl(p))return p.g.la();const T=Ht(p.g);if(T==="")return"";let C="";const w=T.length,F=$n(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return yn(p),wn(p),"";p.h.i=new u.TextDecoder}for(let J=0;J<w;J++)p.h.h=!0,C+=p.h.i.decode(T[J],{stream:!(F&&J==w-1)});return T.length=0,p.h.g+=C,p.C=0,p.h.g}function jl(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function eu(p,T){var C=p.C,w=T.indexOf(`
`,C);return w==-1?Ot:(C=Number(T.substring(C,w)),isNaN(C)?St:(w+=1,w+C>T.length?Ot:(T=T.slice(w,w+C),p.C=w+C,T)))}Yn.prototype.cancel=function(){this.K=!0,yn(this)};function pi(p){p.T=Date.now()+p.H,Ws(p,p.H)}function Ws(p,T){if(p.D!=null)throw Error("WatchDog timer not null");p.D=fi(m(p.aa,p),T)}function mi(p){p.D&&(u.clearTimeout(p.D),p.D=null)}Yn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(os(this.i,this.B),this.M!=2&&(ui(),Et(17)),yn(this),this.m=2,wn(this)):Ws(this,this.T-p)};function wn(p){p.j.I==0||p.K||uu(p.j,p)}function yn(p){mi(p);var T=p.O;T&&typeof T.dispose=="function"&&T.dispose(),p.O=null,pa(p.V),p.g&&(T=p.g,p.g=null,T.abort(),T.dispose())}function gi(p,T){try{var C=p.j;if(C.I!=0&&(C.g==p||_i(C.h,p))){if(!p.L&&_i(C.h,p)&&C.I==3){try{var w=C.Ba.g.parse(T)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<p.F)sr(C),_o(C);else break e;ps(C),Et(18)}}else C.xa=F[1],0<C.xa-C.K&&F[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=fi(m(C.Va,C),6e3));yi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ci(C,11)}else if((p.L||C.g==p)&&sr(C),!D(T))for(F=C.Ba.g.parse(T),T=0;T<F.length;T++){let Je=F[T];const ct=Je[0];if(!(ct<=C.K))if(C.K=ct,Je=Je[1],C.I==2)if(Je[0]=="c"){C.M=Je[1],C.ba=Je[2];const bn=Je[3];bn!=null&&(C.ka=bn,C.j.info("VER="+C.ka));const Ii=Je[4];Ii!=null&&(C.za=Ii,C.j.info("SVER="+C.za));const Xn=Je[5];Xn!=null&&typeof Xn=="number"&&Xn>0&&(w=1.5*Xn,C.O=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const Wn=p.g;if(Wn){const ms=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ms){var J=w.h;J.g||ms.indexOf("spdy")==-1&&ms.indexOf("quic")==-1&&ms.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(va(J,J.h),J.h=null))}if(w.G){const rr=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;rr&&(w.wa=rr,Xe(w.J,w.G,rr))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-p.F,C.j.info("Handshake RTT: "+C.T+"ms")),w=C;var ae=p;if(w.na=du(w,w.L?w.ba:null,w.W),ae.L){Ta(w.h,ae);var we=ae,gt=w.O;gt&&(we.H=gt),we.D&&(mi(we),pi(we)),w.g=ae}else au(w);C.i.length>0&&Ai(C)}else Je[0]!="stop"&&Je[0]!="close"||Ci(C,7);else C.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Ci(C,7):Ma(C):Je[0]!="noop"&&C.l&&C.l.qa(Je),C.A=0)}}ui(4)}catch{}}var At=class{constructor(p,T){this.g=p,this.map=T}};function ya(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _a(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function yi(p){return p.h?1:p.g?p.g.size:0}function _i(p,T){return p.h?p.h==T:p.g?p.g.has(T):!1}function va(p,T){p.g?p.g.add(T):p.h=T}function Ta(p,T){p.h&&p.h==T?p.h=null:p.g&&p.g.has(T)&&p.g.delete(T)}ya.prototype.cancel=function(){if(this.i=Ea(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ea(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let T=p.i;for(const C of p.g.values())T=T.concat(C.G);return T}return R(p.i)}var tu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zs(p,T){if(p){p=p.split("&");for(let C=0;C<p.length;C++){const w=p[C].indexOf("=");let F,J=null;w>=0?(F=p[C].substring(0,w),J=p[C].substring(w+1)):F=p[C],T(F,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function _n(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;p instanceof _n?(this.l=p.l,kt(this,p.j),this.o=p.o,this.g=p.g,co(this,p.u),this.h=p.h,Sa(this,su(p.i)),this.m=p.m):p&&(T=String(p).match(tu))?(this.l=!1,kt(this,T[1]||"",!0),this.o=vi(T[2]||""),this.g=vi(T[3]||"",!0),co(this,T[4]),this.h=vi(T[5]||"",!0),Sa(this,T[6]||"",!0),this.m=vi(T[7]||"")):(this.l=!1,this.i=new ho(null,this.l))}_n.prototype.toString=function(){const p=[];var T=this.j;T&&p.push(ls(T,js,!0),":");var C=this.g;return(C||T=="file")&&(p.push("//"),(T=this.o)&&p.push(ls(T,js,!0),"@"),p.push(Oi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&p.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(ls(C,C.charAt(0)=="/"?Aa:nu,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",ls(C,iu)),p.join("")},_n.prototype.resolve=function(p){const T=Ct(this);let C=!!p.j;C?kt(T,p.j):C=!!p.o,C?T.o=p.o:C=!!p.g,C?T.g=p.g:C=p.u!=null;var w=p.h;if(C)co(T,p.u);else if(C=!!p.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var F=T.h.lastIndexOf("/");F!=-1&&(w=T.h.slice(0,F+1)+w)}if(F=w,F==".."||F==".")w="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){w=F.lastIndexOf("/",0)==0,F=F.split("/");const J=[];for(let ae=0;ae<F.length;){const we=F[ae++];we=="."?w&&ae==F.length&&J.push(""):we==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),w&&ae==F.length&&J.push("")):(J.push(we),w=!0)}w=J.join("/")}else w=F}return C?T.h=w:C=p.i.toString()!=="",C?Sa(T,su(p.i)):C=!!p.m,C&&(T.m=p.m),T};function Ct(p){return new _n(p)}function kt(p,T,C){p.j=C?vi(T,!0):T,p.j&&(p.j=p.j.replace(/:$/,""))}function co(p,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);p.u=T}else p.u=null}function Sa(p,T,C){T instanceof ho?(p.i=T,tr(p.i,p.l)):(C||(T=ls(T,fo)),p.i=new ho(T,p.l))}function Xe(p,T,C){p.i.set(T,C)}function as(p){return Xe(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function vi(p,T){return p?T?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ls(p,T,C){return typeof p=="string"?(p=encodeURI(p).replace(T,un),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function un(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var js=/[#\/\?@]/g,nu=/[#\?:]/g,Aa=/[#\?]/g,fo=/[#\?@]/g,iu=/#/g;function ho(p,T){this.h=this.g=null,this.i=p||null,this.j=!!T}function cn(p){p.g||(p.g=new Map,p.h=0,p.i&&Zs(p.i,function(T,C){p.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=ho.prototype,n.add=function(p,T){cn(this),this.i=null,p=po(this,p);let C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(T),this.h+=1,this};function ou(p,T){cn(p),T=po(p,T),p.g.has(T)&&(p.i=null,p.h-=p.g.get(T).length,p.g.delete(T))}function Ca(p,T){return cn(p),T=po(p,T),p.g.has(T)}n.forEach=function(p,T){cn(this),this.g.forEach(function(C,w){C.forEach(function(F){p.call(T,F,w,this)},this)},this)};function Ia(p,T){cn(p);let C=[];if(typeof T=="string")Ca(p,T)&&(C=C.concat(p.g.get(po(p,T))));else for(p=Array.from(p.g.values()),T=0;T<p.length;T++)C=C.concat(p[T]);return C}n.set=function(p,T){return cn(this),this.i=null,p=po(this,p),Ca(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[T]),this.h+=1,this},n.get=function(p,T){return p?(p=Ia(this,p),p.length>0?String(p[0]):T):T};function er(p,T,C){ou(p,T),C.length>0&&(p.i=null,p.g.set(po(p,T),R(C)),p.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],T=Array.from(this.g.keys());for(let w=0;w<T.length;w++){var C=T[w];const F=Oi(C);C=Ia(this,C);for(let J=0;J<C.length;J++){let ae=F;C[J]!==""&&(ae+="="+Oi(C[J])),p.push(ae)}}return this.i=p.join("&")};function su(p){const T=new ho;return T.i=p.i,p.g&&(T.g=new Map(p.g),T.h=p.h),T}function po(p,T){return T=String(T),p.j&&(T=T.toLowerCase()),T}function tr(p,T){T&&!p.j&&(cn(p),p.i=null,p.g.forEach(function(C,w){const F=w.toLowerCase();w!=F&&(ou(this,w),er(this,F,C))},p)),p.j=T}function Kn(p,T){const C=new zn;if(u.Image){const w=new Image;w.onload=v(Nn,C,"TestLoadImage: loaded",!0,T,w),w.onerror=v(Nn,C,"TestLoadImage: error",!1,T,w),w.onabort=v(Nn,C,"TestLoadImage: abort",!1,T,w),w.ontimeout=v(Nn,C,"TestLoadImage: timeout",!1,T,w),u.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=p}else T(!1)}function Ra(p,T){const C=new zn,w=new AbortController,F=setTimeout(()=>{w.abort(),Nn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(p,{signal:w.signal}).then(J=>{clearTimeout(F),J.ok?Nn(C,"TestPingServer: ok",!0,T):Nn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(F),Nn(C,"TestPingServer: error",!1,T)})}function Nn(p,T,C,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(C)}catch{}}function mo(){this.g=new Jl}function Ti(p){this.i=p.Sb||null,this.h=p.ab||!1}E(Ti,Kl),Ti.prototype.g=function(){return new us(this.i,this.h)};function us(p,T){Tt.call(this),this.H=p,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(us,Tt),n=us.prototype,n.open=function(p,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=T,this.readyState=1,Qn(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(T.body=p),(this.H||u).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,go(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;nr(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function nr(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var T=p.value?p.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!p.done}))&&(this.response=this.responseText+=T)}p.done?go(this):Qn(this),this.readyState==3&&nr(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,go(this))},n.Na=function(p){this.g&&(this.response=p,go(this))},n.ga=function(){this.g&&go(this)};function go(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Qn(p)}n.setRequestHeader=function(p,T){this.A.append(p,T)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=T.next();return p.join(`\r
`)};function Qn(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Mn(p){let T="";return xe(p,function(C,w){T+=w,T+=":",T+=C,T+=`\r
`}),T}function cs(p,T,C){e:{for(w in C){var w=!1;break e}w=!0}w||(C=Mn(C),typeof p=="string"?C!=null&&Oi(C):Xe(p,T,C))}function je(p){Tt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(je,Tt);var Ei=/^https?$/i,wa=["POST","PUT"];n=je.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,T,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);T=T?T.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ga.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(T,String(p),!0),this.B=!1}catch(J){fs(this,J);return}if(p=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)C.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const J of w.keys())C.set(J,w.get(J));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(J=>J.toLowerCase()=="content-type"),F=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(wa,T,void 0)>=0)||w||F||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ae]of C)this.g.setRequestHeader(J,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(J){fs(this,J)}};function fs(p,T){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=T,p.o=5,Na(p),ki(p)}function Na(p){p.A||(p.A=!0,Vt(p,"complete"),Vt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Vt(this,"complete"),Vt(this,"abort"),ki(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ki(this,!0)),je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ds(this):this.Xa())},n.Xa=function(){ds(this)};function ds(p){if(p.h&&typeof l<"u"){if(p.v&&$n(p)==4)setTimeout(p.Ca.bind(p),0);else if(Vt(p,"readystatechange"),$n(p)==4){p.h=!1;try{const J=p.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var w;if(w=J===0){let ae=String(p.D).match(tu)[1]||null;!ae&&u.self&&u.self.location&&(ae=u.self.location.protocol.slice(0,-1)),w=!Ei.test(ae?ae.toLowerCase():"")}C=w}if(C)Vt(p,"complete"),Vt(p,"success");else{p.o=6;try{var F=$n(p)>2?p.g.statusText:""}catch{F=""}p.l=F+" ["+p.ca()+"]",Na(p)}}finally{ki(p)}}}}function ki(p,T){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const C=p.g;p.g=null,T||Vt(p,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function $n(p){return p.g?p.g.readyState:0}n.ca=function(){try{return $n(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var T=this.g.responseText;return p&&T.indexOf(p)==0&&(T=T.substring(p.length)),wf(T)}};function Ht(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function qi(p){const T={};p=(p.g&&$n(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<p.length;w++){if(D(p[w]))continue;var C=Zl(p[w]);const F=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const J=T[F]||[];T[F]=J,J.push(C)}$e(T,function(w){return w.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Si(p,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||T}function yo(p){this.za=0,this.i=[],this.j=new zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Si("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Si("baseRetryDelayMs",5e3,p),this.Za=Si("retryDelaySeedMs",1e4,p),this.Ta=Si("forwardChannelMaxRetries",2,p),this.va=Si("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new ya(p&&p.concurrentRequestLimit),this.Ba=new mo,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=yo.prototype,n.ka=8,n.I=1,n.connect=function(p,T,C,w){Et(0),this.W=p,this.H=T||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.J=du(this,null,this.W),Ai(this)};function Ma(p){if(ir(p),p.I==3){var T=p.V++,C=Ct(p.J);if(Xe(C,"SID",p.M),Xe(C,"RID",T),Xe(C,"TYPE","terminate"),hs(p,C),T=new Yn(p,p.j,T),T.M=2,T.A=as(Ct(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(T.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=T.A,C=!0),C||(T.g=hu(T.j,null),T.g.ea(T.A)),T.F=Date.now(),pi(T)}fu(p)}function _o(p){p.g&&(Da(p),p.g.cancel(),p.g=null)}function ir(p){_o(p),p.v&&(u.clearTimeout(p.v),p.v=null),sr(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function Ai(p){if(!_a(p.h)&&!p.m){p.m=!0;var T=p.Ea;X||M(),fe||(X(),fe=!0),b.add(T,p),p.D=0}}function or(p,T){return yi(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=T.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=fi(m(p.Ea,p,T),cu(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const F=new Yn(this,this.j,p);let J=this.o;if(this.U&&(J?(J=k(J),ue(J,this.U)):J=this.U),this.u!==null||this.R||(F.J=J,J=null),this.S)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(T+=w,T>4096){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=ru(this,F,T),C=Ct(this.J),Xe(C,"RID",p),Xe(C,"CVER",22),this.G&&Xe(C,"X-HTTP-Session-Id",this.G),hs(this,C),J&&(this.R?T="headers="+Oi(Mn(J))+"&"+T:this.u&&cs(C,this.u,J)),va(this.h,F),this.Ra&&Xe(C,"TYPE","init"),this.S?(Xe(C,"$req",T),Xe(C,"SID","null"),F.U=!0,hi(F,C,null)):hi(F,C,T),this.I=2}}else this.I==3&&(p?ba(this,p):this.i.length==0||_a(this.h)||ba(this))};function ba(p,T){var C;T?C=T.l:C=p.V++;const w=Ct(p.J);Xe(w,"SID",p.M),Xe(w,"RID",C),Xe(w,"AID",p.K),hs(p,w),p.u&&p.o&&cs(w,p.u,p.o),C=new Yn(p,p.j,C,p.D+1),p.u===null&&(C.J=p.o),T&&(p.i=T.G.concat(p.i)),T=ru(p,C,1e3),C.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),va(p.h,C),hi(C,w,T)}function hs(p,T){p.H&&xe(p.H,function(C,w){Xe(T,w,C)}),p.l&&xe({},function(C,w){Xe(T,w,C)})}function ru(p,T,C){C=Math.min(p.i.length,C);const w=p.l?m(p.l.Ka,p.l,p):null;e:{var F=p.i;let we=-1;for(;;){const gt=["count="+C];we==-1?C>0?(we=F[0].g,gt.push("ofs="+we)):we=0:gt.push("ofs="+we);let Je=!0;for(let ct=0;ct<C;ct++){var J=F[ct].g;const bn=F[ct].map;if(J-=we,J<0)we=Math.max(0,F[ct].g-100),Je=!1;else try{J="req"+J+"_"||"";try{var ae=bn instanceof Map?bn:Object.entries(bn);for(const[Ii,Xn]of ae){let Wn=Xn;d(Xn)&&(Wn=uo(Xn)),gt.push(J+Ii+"="+encodeURIComponent(Wn))}}catch(Ii){throw gt.push(J+"type="+encodeURIComponent("_badmap")),Ii}}catch{w&&w(bn)}}if(Je){ae=gt.join("&");break e}}ae=void 0}return p=p.i.splice(0,C),T.G=p,ae}function au(p){if(!p.g&&!p.v){p.Y=1;var T=p.Da;X||M(),fe||(X(),fe=!0),b.add(T,p),p.A=0}}function ps(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=fi(m(p.Da,p),cu(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,lu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=fi(m(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),_o(this),lu(this))};function Da(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function lu(p){p.g=new Yn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var T=Ct(p.na);Xe(T,"RID","rpc"),Xe(T,"SID",p.M),Xe(T,"AID",p.K),Xe(T,"CI",p.F?"0":"1"),!p.F&&p.ia&&Xe(T,"TO",p.ia),Xe(T,"TYPE","xmlhttp"),hs(p,T),p.u&&p.o&&cs(T,p.u,p.o),p.O&&(p.g.H=p.O);var C=p.g;p=p.ba,C.M=1,C.A=as(Ct(T)),C.u=null,C.R=!0,Xs(C,p)}n.Va=function(){this.C!=null&&(this.C=null,_o(this),ps(this),Et(19))};function sr(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function uu(p,T){var C=null;if(p.g==T){sr(p),Da(p),p.g=null;var w=2}else if(_i(p.h,T))C=T.G,Ta(p.h,T),w=1;else return;if(p.I!=0){if(T.o)if(w==1){C=T.u?T.u.length:0,T=Date.now()-T.F;var F=p.D;w=$s(),Vt(w,new ci(w,C)),Ai(p)}else au(p);else if(F=T.m,F==3||F==0&&T.X>0||!(w==1&&or(p,T)||w==2&&ps(p)))switch(C&&C.length>0&&(T=p.h,T.i=T.i.concat(C)),F){case 1:Ci(p,5);break;case 4:Ci(p,10);break;case 3:Ci(p,6);break;default:Ci(p,2)}}}function cu(p,T){let C=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(C*=2),C*T}function Ci(p,T){if(p.j.info("Error code "+T),T==2){var C=m(p.bb,p),w=p.Ua;const F=!w;w=new _n(w||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||kt(w,"https"),as(w),F?Kn(w.toString(),C):Ra(w.toString(),C)}else Et(2);p.I=0,p.l&&p.l.pa(T),fu(p),ir(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function fu(p){if(p.I=0,p.ja=[],p.l){const T=Ea(p.h);(T.length!=0||p.i.length!=0)&&(V(p.ja,T),V(p.ja,p.i),p.h.i.length=0,R(p.i),p.i.length=0),p.l.oa()}}function du(p,T,C){var w=C instanceof _n?Ct(C):new _n(C);if(w.g!="")T&&(w.g=T+"."+w.g),co(w,w.u);else{var F=u.location;w=F.protocol,T=T?T+"."+F.hostname:F.hostname,F=+F.port;const J=new _n(null);w&&kt(J,w),T&&(J.g=T),F&&co(J,F),C&&(J.h=C),w=J}return C=p.G,T=p.wa,C&&T&&Xe(w,C,T),Xe(w,"VER",p.ka),hs(p,w),w}function hu(p,T,C){if(T&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=p.Aa&&!p.ma?new je(new Ti({ab:C})):new je(p.ma),T.Fa(p.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pu(){}n=pu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function vo(){}vo.prototype.g=function(p,T){return new sn(p,T)};function sn(p,T){Tt.call(this),this.g=new yo(T),this.l=p,this.h=T&&T.messageUrlParams||null,p=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(p?p["X-WebChannel-Content-Type"]=T.messageContentType:p={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(p?p["X-WebChannel-Client-Profile"]=T.sa:p={"X-WebChannel-Client-Profile":T.sa}),this.g.U=p,(p=T&&T.Qb)&&!D(p)&&(this.g.u=p),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!D(T)&&(this.g.G=T,p=this.h,p!==null&&T in p&&(p=this.h,T in p&&delete p[T])),this.j=new Gi(this)}E(sn,Tt),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Ma(this.g)},sn.prototype.o=function(p){var T=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.v&&(C={},C.__data__=uo(p),p=C);T.i.push(new At(T.Ya++,p)),T.I==3&&Ai(T)},sn.prototype.N=function(){this.g.l=null,delete this.j,Ma(this.g),delete this.g,sn.Z.N.call(this)};function mu(p){Ft.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var T=p.__sm__;if(T){e:{for(const C in T){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,T=T!==null&&p in T?T[p]:void 0),this.data=T}else this.data=p}E(mu,Ft);function gu(){Rn.call(this),this.status=1}E(gu,Rn);function Gi(p){this.g=p}E(Gi,pu),Gi.prototype.ra=function(){Vt(this.g,"a")},Gi.prototype.qa=function(p){Vt(this.g,new mu(p))},Gi.prototype.pa=function(p){Vt(this.g,new gu)},Gi.prototype.oa=function(){Vt(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,Q0=function(){return new vo},K0=function(){return $s()},J0=mt,up={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ss.NO_ERROR=0,ss.TIMEOUT=8,ss.HTTP_ERROR=6,xc=ss,ma.COMPLETE="complete",Y0=ma,Ql.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,Tl=Ql,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,z0=je}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="12.9.0";function pV(n){sa=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new O0("@firebase/firestore");function Or(){return Os.logLevel}function he(n,...e){if(Os.logLevel<=Fe.DEBUG){const t=e.map(Gp);Os.debug(`Firestore (${sa}): ${n}`,...t)}}function oo(n,...e){if(Os.logLevel<=Fe.ERROR){const t=e.map(Gp);Os.error(`Firestore (${sa}): ${n}`,...t)}}function ks(n,...e){if(Os.logLevel<=Fe.WARN){const t=e.map(Gp);Os.warn(`Firestore (${sa}): ${n}`,...t)}}function Gp(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,$0(n,o,t)}function $0(n,e,t){let o=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw oo(o),new Error(o)}function Qe(n,e,t,o){let r="Unexpected state";typeof t=="string"?r=t:o=t,n||$0(e,r,o)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends oa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(en.UNAUTHENTICATED)))}shutdown(){}}class gV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class yV{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let o=this.i;const r=g=>this.i!==o?(o=this.i,t(g)):Promise.resolve();let l=new Ps;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ps,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},d=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ps)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Qe(typeof o.accessToken=="string",31837,{l:o}),new X0(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class _V{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=en.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class vV{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new _V(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wx(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const o=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const r=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new qT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<n;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const r=EV(40);for(let l=0;l<r.length;++l)o.length<20&&r[l]<t&&(o+=e.charAt(r[l]%62))}return o}}function Oe(n,e){return n<e?-1:n>e?1:0}function cp(n,e){const t=Math.min(n.length,e.length);for(let o=0;o<t;o++){const r=n.charAt(o),l=e.charAt(o);if(r!==l)return Oh(r)===Oh(l)?Oe(r,l):Oh(r)?1:-1}return Oe(n.length,e.length)}const SV=55296,AV=57343;function Oh(n){const e=n.charCodeAt(0);return e>=SV&&e<=AV}function Xr(n,e,t){return n.length===e.length&&n.every(((o,r)=>t(o,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="__name__";class Di{constructor(e,t,o){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&Ee(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return Di.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Di?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let r=0;r<o;r++){const l=Di.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return Oe(e.length,t.length)}static compareSegments(e,t){const o=Di.isNumericId(e),r=Di.isNumericId(t);return o&&!r?-1:!o&&r?1:o&&r?Di.extractNumericId(e).compare(Di.extractNumericId(t)):cp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yo.fromString(e.substring(4,e.length-2))}}class st extends Di{construct(e,t,o){return new st(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new de(ne.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((r=>r.length>0)))}return new st(t)}static emptyPath(){return new st([])}}const CV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Di{construct(e,t,o){return new Xt(e,t,o)}static isValidIdentifier(e){return CV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===GT}static keyField(){return new Xt([GT])}static fromServerFormat(e){const t=[];let o="",r=0;const l=()=>{if(o.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let u=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new de(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=g,r+=2}else d==="`"?(u=!u,r++):d!=="."||u?(o+=d,r++):(l(),r++)}if(l(),u)throw new de(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(st.fromString(e))}static fromName(e){return new ve(st.fromString(e).popFirst(5))}static empty(){return new ve(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(n,e,t){if(!t)throw new de(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IV(n,e,t,o){if(e===!0&&o===!0)throw new de(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function BT(n){if(!ve.isDocumentKey(n))throw new de(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function FT(n){if(ve.isDocumentKey(n))throw new de(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Z0(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function df(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function Jr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=df(n);throw new de(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Gl(n,e){if(!Z0(n))throw new de(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const r=e[o].typeString,l="value"in e[o]?{value:e[o].value}:void 0;if(!(o in n)){t=`JSON missing required field: '${o}'`;break}const u=n[o];if(r&&typeof u!==r){t=`JSON field '${o}' must be a ${r}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${o}' field to equal '${l.value}'`;break}}if(t)throw new de(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=-62135596800,zT=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*zT);return new lt(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<HT)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zT}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gl(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-HT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Dt("string",lt._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new lt(0,0))}static max(){return new Ce(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=-1;function RV(n,e){const t=n.toTimestamp().seconds,o=n.toTimestamp().nanoseconds+1,r=Ce.fromTimestamp(o===1e9?new lt(t+1,0):new lt(t,o));return new Ko(r,ve.empty(),e)}function wV(n){return new Ko(n.readTime,n.key,xl)}class Ko{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Ko(Ce.min(),ve.empty(),xl)}static max(){return new Ko(Ce.max(),ve.empty(),xl)}}function NV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==MV)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((o,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(o,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,o)=>{t(e)}))}static reject(e){return new ie(((t,o)=>{o(e)}))}static waitFor(e){return new ie(((t,o)=>{let r=0,l=0,u=!1;e.forEach((d=>{++r,d.next((()=>{++l,u&&l===r&&t()}),(g=>o(g)))})),u=!0,l===r&&t()}))}static or(e){let t=ie.resolve(!1);for(const o of e)t=t.next((r=>r?ie.resolve(r):o()));return t}static forEach(e,t){const o=[];return e.forEach(((r,l)=>{o.push(t.call(this,r,l))})),this.waitFor(o)}static mapArray(e,t){return new ie(((o,r)=>{const l=e.length,u=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;t(e[m]).next((v=>{u[m]=v,++d,d===l&&o(u)}),(v=>r(v)))}}))}static doWhile(e,t){return new ie(((o,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):o()};l()}))}}function DV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function aa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>t.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp=-1;function pf(n){return n==null}function Qc(n){return n===0&&1/n==-1/0}function xV(n){return typeof n=="number"&&Number.isInteger(n)&&!Qc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="";function VV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YT(e)),e=PV(n.get(t),e);return YT(e)}function PV(n,e){let t=e;const o=n.length;for(let r=0;r<o;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case j0:t+="";break;default:t+=l}}return t}function YT(n){return n+j0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||$t.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const r=this.comparator(e,o.key);if(r===0)return t+o.left.size;r<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rc(this.root,e,this.comparator,!0)}}class Rc{constructor(e,t,o,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?o(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,t,o,r,l){this.key=e,this.value=t,this.color=o??$t.RED,this.left=r??$t.EMPTY,this.right=l??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,r,l){return new $t(e??this.key,t??this.value,o??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let r=this;const l=o(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,o),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,o)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return $t.EMPTY;o=r.right.min(),r=r.copy(o.key,o.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,o,r,l){return this}insert(e,t,o){return new $t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const r=o.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new KT(this.data.getIterator())}getIteratorFrom(e){return new KT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class KT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new ni([])}unionWith(e){let t=new Lt(Xt.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new ni(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xr(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new tS("Invalid base64 string: "+l):l}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let u=0;u<r.length;++u)l+=String.fromCharCode(r[u]);return l})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let r=0;r<t.length;r++)o[r]=t.charCodeAt(r);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const UV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qo(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=UV.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const o=new Date(n);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $o(n){return typeof n=="string"?Wt.fromBase64String(n):Wt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="server_timestamp",iS="__type__",oS="__previous_value__",sS="__local_write_time__";function Hp(n){var t,o;return((o=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[iS])==null?void 0:o.stringValue)===nS}function mf(n){const e=n.mapValue.fields[oS];return Hp(e)?mf(e):e}function Vl(n){const e=Qo(n.mapValue.fields[sS].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,t,o,r,l,u,d,g,m,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=v,this.apiKey=E}}const $c="(default)";class Pl{constructor(e,t){this.projectId=e,this.database=t||$c}static empty(){return new Pl("","")}get isDefaultDatabase(){return this.database===$c}isEqual(e){return e instanceof Pl&&e.projectId===this.projectId&&e.database===this.database}}function OV(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new de(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pl(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="__type__",kV="__max__",wc={mapValue:{}},aS="__vector__",Xc="value";function Xo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hp(n)?4:GV(n)?9007199254740991:qV(n)?10:11:Ee(28295,{value:n})}function Li(n,e){if(n===e)return!0;const t=Xo(n);if(t!==Xo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vl(n).isEqual(Vl(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const u=Qo(r.timestampValue),d=Qo(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return $o(r.bytesValue).isEqual($o(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return vt(r.geoPointValue.latitude)===vt(l.geoPointValue.latitude)&&vt(r.geoPointValue.longitude)===vt(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return vt(r.integerValue)===vt(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const u=vt(r.doubleValue),d=vt(l.doubleValue);return u===d?Qc(u)===Qc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Xr(n.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(r,l){const u=r.mapValue.fields||{},d=l.mapValue.fields||{};if(JT(u)!==JT(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!Li(u[g],d[g])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function Ul(n,e){return(n.values||[]).find((t=>Li(t,e)))!==void 0}function Wr(n,e){if(n===e)return 0;const t=Xo(n),o=Xo(e);if(t!==o)return Oe(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=vt(l.integerValue||l.doubleValue),g=vt(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(n,e);case 3:return QT(n.timestampValue,e.timestampValue);case 4:return QT(Vl(n),Vl(e));case 5:return cp(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=$o(l),g=$o(u);return d.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),g=u.split("/");for(let m=0;m<d.length&&m<g.length;m++){const v=Oe(d[m],g[m]);if(v!==0)return v}return Oe(d.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=Oe(vt(l.latitude),vt(u.latitude));return d!==0?d:Oe(vt(l.longitude),vt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return $T(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var S,R,V,G;const d=l.fields||{},g=u.fields||{},m=(S=d[Xc])==null?void 0:S.arrayValue,v=(R=g[Xc])==null?void 0:R.arrayValue,E=Oe(((V=m==null?void 0:m.values)==null?void 0:V.length)||0,((G=v==null?void 0:v.values)==null?void 0:G.length)||0);return E!==0?E:$T(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===wc.mapValue&&u===wc.mapValue)return 0;if(l===wc.mapValue)return 1;if(u===wc.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=u.fields||{},v=Object.keys(m);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const S=cp(g[E],v[E]);if(S!==0)return S;const R=Wr(d[g[E]],m[v[E]]);if(R!==0)return R}return Oe(g.length,v.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function QT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Qo(n),o=Qo(e),r=Oe(t.seconds,o.seconds);return r!==0?r:Oe(t.nanos,o.nanos)}function $T(n,e){const t=n.values||[],o=e.values||[];for(let r=0;r<t.length&&r<o.length;++r){const l=Wr(t[r],o[r]);if(l)return l}return Oe(t.length,o.length)}function Zr(n){return fp(n)}function fp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const o=Qo(t);return`time(${o.seconds},${o.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return $o(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let o="[",r=!0;for(const l of t.values||[])r?r=!1:o+=",",o+=fp(l);return o+"]"})(n.arrayValue):"mapValue"in n?(function(t){const o=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const u of o)l?l=!1:r+=",",r+=`${u}:${fp(t.fields[u])}`;return r+"}"})(n.mapValue):Ee(61005,{value:n})}function Vc(n){switch(Xo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mf(n);return e?16+Vc(e):16;case 5:return 2*n.stringValue.length;case 6:return $o(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((r,l)=>r+Vc(l)),0)})(n.arrayValue);case 10:case 11:return(function(o){let r=0;return Bs(o.fields,((l,u)=>{r+=l.length+Vc(u)})),r})(n.mapValue);default:throw Ee(13486,{value:n})}}function XT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function dp(n){return!!n&&"integerValue"in n}function zp(n){return!!n&&"arrayValue"in n}function WT(n){return!!n&&"nullValue"in n}function ZT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Pc(n){return!!n&&"mapValue"in n}function qV(n){var t,o;return((o=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[rS])==null?void 0:o.stringValue)===aS}function Il(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Bs(n.mapValue.fields,((t,o)=>e.mapValue.fields[t]=Il(o))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Il(n.arrayValue.values[t]);return e}return{...n}}function GV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===kV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Pc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Il(t)}setAll(e){let t=Xt.emptyPath(),o={},r=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,o,r),o={},r=[],t=d.popLast()}u?o[d.lastSegment()]=Il(u):r.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,o,r)}delete(e){const t=this.field(e.popLast());Pc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let r=t.mapValue.fields[e.get(o)];Pc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,o){Bs(t,((r,l)=>e[r]=l));for(const r of o)delete e[r]}clone(){return new qn(Il(this.value))}}function lS(n){const e=[];return Bs(n.fields,((t,o)=>{const r=new Xt([t]);if(Pc(o)){const l=lS(o.mapValue).fields;if(l.length===0)e.push(r);else for(const u of l)e.push(r.child(u))}else e.push(r)})),new ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t,o,r,l,u,d){this.key=e,this.documentType=t,this.version=o,this.readTime=r,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new tn(e,0,Ce.min(),Ce.min(),Ce.min(),qn.empty(),0)}static newFoundDocument(e,t,o,r){return new tn(e,1,t,Ce.min(),o,r,0)}static newNoDocument(e,t){return new tn(e,2,t,Ce.min(),Ce.min(),qn.empty(),0)}static newUnknownDocument(e,t){return new tn(e,3,t,Ce.min(),Ce.min(),qn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t){this.position=e,this.inclusive=t}}function jT(n,e,t){let o=0;for(let r=0;r<n.position.length;r++){const l=e[r],u=n.position[r];if(l.field.isKeyField()?o=ve.comparator(ve.fromName(u.referenceValue),t.key):o=Wr(u,t.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function eE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Li(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,t="asc"){this.field=e,this.dir=t}}function BV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{}class bt extends uS{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new HV(e,t,o):t==="array-contains"?new JV(e,o):t==="in"?new KV(e,o):t==="not-in"?new QV(e,o):t==="array-contains-any"?new $V(e,o):new bt(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new zV(e,o):new YV(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wr(t,this.value)):t!==null&&Xo(this.value)===Xo(t)&&this.matchesComparison(Wr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends uS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ri(e,t)}matches(e){return cS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cS(n){return n.op==="and"}function fS(n){return FV(n)&&cS(n)}function FV(n){for(const e of n.filters)if(e instanceof ri)return!1;return!0}function hp(n){if(n instanceof bt)return n.field.canonicalString()+n.op.toString()+Zr(n.value);if(fS(n))return n.filters.map((e=>hp(e))).join(",");{const e=n.filters.map((t=>hp(t))).join(",");return`${n.op}(${e})`}}function dS(n,e){return n instanceof bt?(function(o,r){return r instanceof bt&&o.op===r.op&&o.field.isEqual(r.field)&&Li(o.value,r.value)})(n,e):n instanceof ri?(function(o,r){return r instanceof ri&&o.op===r.op&&o.filters.length===r.filters.length?o.filters.reduce(((l,u,d)=>l&&dS(u,r.filters[d])),!0):!1})(n,e):void Ee(19439)}function hS(n){return n instanceof bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Zr(t.value)}`})(n):n instanceof ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(hS).join(" ,")+"}"})(n):"Filter"}class HV extends bt{constructor(e,t,o){super(e,t,o),this.key=ve.fromName(o.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class zV extends bt{constructor(e,t){super(e,"in",t),this.keys=pS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class YV extends bt{constructor(e,t){super(e,"not-in",t),this.keys=pS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function pS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((o=>ve.fromName(o.referenceValue)))}class JV extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zp(t)&&Ul(t.arrayValue,this.value)}}class KV extends bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ul(this.value.arrayValue,t)}}class QV extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ul(this.value.arrayValue,t)}}class $V extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>Ul(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,t=null,o=[],r=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=r,this.limit=l,this.startAt=u,this.endAt=d,this.Te=null}}function tE(n,e=null,t=[],o=[],r=null,l=null,u=null){return new XV(n,e,t,o,r,l,u)}function Yp(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>hp(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),pf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>Zr(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>Zr(o))).join(",")),e.Te=t}return e.Te}function Jp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eE(n.startAt,e.startAt)&&eE(n.endAt,e.endAt)}function pp(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t=null,o=[],r=[],l=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=r,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function WV(n,e,t,o,r,l,u,d){return new la(n,e,t,o,r,l,u,d)}function Kp(n){return new la(n)}function nE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ZV(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function mS(n){return n.collectionGroup!==null}function Rl(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Lt(Xt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ll(l,o))})),t.has(Xt.keyField().canonicalString())||e.Ie.push(new Ll(Xt.keyField(),o))}return e.Ie}function xi(n){const e=Re(n);return e.Ee||(e.Ee=jV(e,Rl(n))),e.Ee}function jV(n,e){if(n.limitType==="F")return tE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Ll(r.field,l)}));const t=n.endAt?new Wc(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new Wc(n.startAt.position,n.startAt.inclusive):null;return tE(n.path,n.collectionGroup,e,n.filters,n.limit,t,o)}}function mp(n,e){const t=n.filters.concat([e]);return new la(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function eP(n,e){const t=n.explicitOrderBy.concat([e]);return new la(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function gp(n,e,t){return new la(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gf(n,e){return Jp(xi(n),xi(e))&&n.limitType===e.limitType}function gS(n){return`${Yp(xi(n))}|lt:${n.limitType}`}function kr(n){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((r=>hS(r))).join(", ")}]`),pf(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((r=>Zr(r))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((r=>Zr(r))).join(",")),`Target(${o})`})(xi(n))}; limitType=${n.limitType})`}function yf(n,e){return e.isFoundDocument()&&(function(o,r){const l=r.key.path;return o.collectionGroup!==null?r.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):ve.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(n,e)&&(function(o,r){for(const l of Rl(o))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(o,r){for(const l of o.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(o,r){return!(o.startAt&&!(function(u,d,g){const m=jT(u,d,g);return u.inclusive?m<=0:m<0})(o.startAt,Rl(o),r)||o.endAt&&!(function(u,d,g){const m=jT(u,d,g);return u.inclusive?m>=0:m>0})(o.endAt,Rl(o),r))})(n,e)}function tP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yS(n){return(e,t)=>{let o=!1;for(const r of Rl(n)){const l=nP(r,e,t);if(l!==0)return l;o=o||r.field.isKeyField()}return 0}}function nP(n,e,t){const o=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,u,d){const g=u.data.field(l),m=d.data.field(l);return g!==null&&m!==null?Wr(g,m):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return o;case"desc":return-1*o;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[r,l]of o)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),r=this.inner[o];if(r===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],e))return o.length===1?delete this.inner[t]:o.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Bs(this.inner,((t,o)=>{for(const[r,l]of o)e(r,l)}))}isEmpty(){return eS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=new dt(ve.comparator);function so(){return iP}const _S=new dt(ve.comparator);function El(...n){let e=_S;for(const t of n)e=e.insert(t.key,t);return e}function vS(n){let e=_S;return n.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function Vs(){return wl()}function TS(){return wl()}function wl(){return new Fs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const oP=new dt(ve.comparator),sP=new Lt(ve.comparator);function ke(...n){let e=sP;for(const t of n)e=e.add(t);return e}const rP=new Lt(Oe);function aP(){return rP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qc(e)?"-0":e}}function ES(n){return{integerValue:""+n}}function lP(n,e){return xV(e)?ES(e):Qp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(){this._=void 0}}function uP(n,e,t){return n instanceof Zc?(function(r,l){const u={fields:{[iS]:{stringValue:nS},[sS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&Hp(l)&&(l=mf(l)),l&&(u.fields[oS]=l),{mapValue:u}})(t,e):n instanceof Ol?AS(n,e):n instanceof kl?CS(n,e):(function(r,l){const u=SS(r,l),d=iE(u)+iE(r.Ae);return dp(u)&&dp(r.Ae)?ES(d):Qp(r.serializer,d)})(n,e)}function cP(n,e,t){return n instanceof Ol?AS(n,e):n instanceof kl?CS(n,e):t}function SS(n,e){return n instanceof jc?(function(o){return dp(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class Zc extends _f{}class Ol extends _f{constructor(e){super(),this.elements=e}}function AS(n,e){const t=IS(e);for(const o of n.elements)t.some((r=>Li(r,o)))||t.push(o);return{arrayValue:{values:t}}}class kl extends _f{constructor(e){super(),this.elements=e}}function CS(n,e){let t=IS(e);for(const o of n.elements)t=t.filter((r=>!Li(r,o)));return{arrayValue:{values:t}}}class jc extends _f{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function iE(n){return vt(n.integerValue||n.doubleValue)}function IS(n){return zp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function fP(n,e){return n.field.isEqual(e.field)&&(function(o,r){return o instanceof Ol&&r instanceof Ol||o instanceof kl&&r instanceof kl?Xr(o.elements,r.elements,Li):o instanceof jc&&r instanceof jc?Li(o.Ae,r.Ae):o instanceof Zc&&r instanceof Zc})(n.transform,e.transform)}class dP{constructor(e,t){this.version=e,this.transformResults=t}}class Vi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vi}static exists(e){return new Vi(void 0,e)}static updateTime(e){return new Vi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class vf{}function RS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $p(n.key,Vi.none()):new Bl(n.key,n.data,Vi.none());{const t=n.data,o=qn.empty();let r=new Lt(Xt.comparator);for(let l of e.fields)if(!r.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?o.delete(l):o.set(l,u),r=r.add(l)}return new Hs(n.key,o,new ni(r.toArray()),Vi.none())}}function hP(n,e,t){n instanceof Bl?(function(r,l,u){const d=r.value.clone(),g=sE(r.fieldTransforms,l,u.transformResults);d.setAll(g),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Hs?(function(r,l,u){if(!Uc(r.precondition,l))return void l.convertToUnknownDocument(u.version);const d=sE(r.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(wS(r)),g.setAll(d),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(r,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Nl(n,e,t,o){return n instanceof Bl?(function(l,u,d,g){if(!Uc(l.precondition,u))return d;const m=l.value.clone(),v=rE(l.fieldTransforms,g,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,o):n instanceof Hs?(function(l,u,d,g){if(!Uc(l.precondition,u))return d;const m=rE(l.fieldTransforms,g,u),v=u.data;return v.setAll(wS(l)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,o):(function(l,u,d){return Uc(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function pP(n,e){let t=null;for(const o of n.fieldTransforms){const r=e.data.field(o.field),l=SS(o.transform,r||null);l!=null&&(t===null&&(t=qn.empty()),t.set(o.field,l))}return t||null}function oE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(o,r){return o===void 0&&r===void 0||!(!o||!r)&&Xr(o,r,((l,u)=>fP(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Bl extends vf{constructor(e,t,o,r=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Hs extends vf{constructor(e,t,o,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function wS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=n.data.field(t);e.set(t,o)}})),e}function sE(n,e,t){const o=new Map;Qe(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const l=n[r],u=l.transform,d=e.data.field(l.field);o.set(l.field,cP(u,d,t[r]))}return o}function rE(n,e,t){const o=new Map;for(const r of n){const l=r.transform,u=t.data.field(r.field);o.set(r.field,uP(l,u,e))}return o}class $p extends vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mP extends vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t,o,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=r}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&hP(l,e,o[r])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Nl(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Nl(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=TS();return this.mutations.forEach((r=>{const l=e.get(r.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(r.key)?null:d;const g=RS(u,d);g!==null&&o.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(Ce.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ke())}isEqual(e){return this.batchId===e.batchId&&Xr(this.mutations,e.mutations,((t,o)=>oE(t,o)))&&Xr(this.baseMutations,e.baseMutations,((t,o)=>oE(t,o)))}}class Xp{constructor(e,t,o,r){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=r}static from(e,t,o){Qe(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let r=(function(){return oP})();const l=e.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,o[u].version);return new Xp(e,t,o,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Be;function vP(n){switch(n){case ne.OK:return Ee(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function NS(n){if(n===void 0)return oo("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Mt.OK:return ne.OK;case Mt.CANCELLED:return ne.CANCELLED;case Mt.UNKNOWN:return ne.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return ne.INTERNAL;case Mt.UNAVAILABLE:return ne.UNAVAILABLE;case Mt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Mt.NOT_FOUND:return ne.NOT_FOUND;case Mt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Mt.ABORTED:return ne.ABORTED;case Mt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Mt.DATA_LOSS:return ne.DATA_LOSS;default:return Ee(39323,{code:n})}}(Be=Mt||(Mt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=new Yo([4294967295,4294967295],0);function aE(n){const e=TP().encode(n),t=new H0;return t.update(e),new Uint8Array(t.digest())}function lE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Yo([t,o],0),new Yo([r,l],0)]}class Wp{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new Sl(`Invalid padding: ${t}`);if(o<0)throw new Sl(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Sl(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new Sl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Yo.fromNumber(this.ge)}ye(e,t,o){let r=e.add(t.multiply(Yo.fromNumber(o)));return r.compare(EP)===1&&(r=new Yo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=aE(e),[o,r]=lE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(o,r,l);if(!this.we(u))return!1}return!0}static create(e,t,o){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Wp(l,r,t);return o.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=aE(e),[o,r]=lE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(o,r,l);this.be(u)}}be(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class Sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,o,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const r=new Map;return r.set(e,Fl.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Tf(Ce.min(),r,new dt(Oe),so(),ke())}}class Fl{constructor(e,t,o,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Fl(o,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t,o,r){this.Se=e,this.removedTargetIds=t,this.key=o,this.De=r}}class MS{constructor(e,t){this.targetId=e,this.Ce=t}}class bS{constructor(e,t,o=Wt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=r}}class uE{constructor(){this.ve=0,this.Fe=cE(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),t=ke(),o=ke();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:o=o.add(r);break;default:Ee(38017,{changeType:l})}})),new Fl(this.Me,this.xe,e,t,o)}Ke(){this.Oe=!1,this.Fe=cE()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class SP{constructor(e){this.Ge=e,this.ze=new Map,this.je=so(),this.He=Nc(),this.Je=Nc(),this.Ze=new dt(Oe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const o=this.nt(t);switch(e.state){case 0:this.rt(t)&&o.Le(e.resumeToken);break;case 1:o.We(),o.Ne||o.Ke(),o.Le(e.resumeToken);break;case 2:o.We(),o.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(o.Qe(),o.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),o.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((o,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,o=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(pp(l))if(o===0){const u=new ve(l.path);this.et(t,u,tn.newNoDocument(u,Ce.min()))}else Qe(o===1,20013,{expectedCount:o});else{const u=this._t(t);if(u!==o){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(t);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:r=0},hashCount:l=0}=t;let u,d;try{u=$o(o).toUint8Array()}catch(g){if(g instanceof tS)return ks("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Wp(u,r,l)}catch(g){return ks(g instanceof Sl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,o){return t.Ce.count===o-this.Pt(e,t.targetId)?0:2}Pt(e,t){const o=this.Ge.getRemoteKeysForTarget(t);let r=0;return o.forEach((l=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const d=this.ot(u);if(d){if(l.current&&pp(d.target)){const g=new ve(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,tn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let o=ke();this.Je.forEach(((l,u)=>{let d=!0;u.forEachWhile((g=>{const m=this.ot(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(o=o.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const r=new Tf(e,t,this.Ze,this.je,o);return this.je=so(),this.He=Nc(),this.Je=Nc(),this.Ze=new dt(Oe),r}Ye(e,t){if(!this.rt(e))return;const o=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,o),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,o){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),o&&(this.je=this.je.insert(t,o))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new uE,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Lt(Oe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Lt(Oe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Nc(){return new dt(ve.comparator)}function cE(){return new dt(ve.comparator)}const AP={asc:"ASCENDING",desc:"DESCENDING"},CP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IP={and:"AND",or:"OR"};class RP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yp(n,e){return n.useProto3Json||pf(e)?e:{value:e}}function ef(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wP(n,e){return ef(n,e.toTimestamp())}function Pi(n){return Qe(!!n,49232),Ce.fromTimestamp((function(t){const o=Qo(t);return new lt(o.seconds,o.nanos)})(n))}function Zp(n,e){return _p(n,e).canonicalString()}function _p(n,e){const t=(function(r){return new st(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function xS(n){const e=st.fromString(n);return Qe(OS(e),10190,{key:e.toString()}),e}function vp(n,e){return Zp(n.databaseId,e.path)}function kh(n,e){const t=xS(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(PS(t))}function VS(n,e){return Zp(n.databaseId,e)}function NP(n){const e=xS(n);return e.length===4?st.emptyPath():PS(e)}function Tp(n){return new st(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function PS(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fE(n,e,t){return{name:vp(n,e),fields:t.value.mapValue.fields}}function MP(n,e){let t;if("targetChange"in e){e.targetChange;const o=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ee(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(Qe(v===void 0||typeof v=="string",58123),Wt.fromBase64String(v||"")):(Qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Wt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?ne.UNKNOWN:NS(m.code);return new de(v,m.message||"")})(u);t=new bS(o,r,l,d||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const r=kh(n,o.document.name),l=Pi(o.document.updateTime),u=o.document.createTime?Pi(o.document.createTime):Ce.min(),d=new qn({mapValue:{fields:o.document.fields}}),g=tn.newFoundDocument(r,l,u,d),m=o.targetIds||[],v=o.removedTargetIds||[];t=new Lc(m,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const r=kh(n,o.document),l=o.readTime?Pi(o.readTime):Ce.min(),u=tn.newNoDocument(r,l),d=o.removedTargetIds||[];t=new Lc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const r=kh(n,o.document),l=o.removedTargetIds||[];t=new Lc([],l,r,null)}else{if(!("filter"in e))return Ee(11601,{Vt:e});{e.filter;const o=e.filter;o.targetId;const{count:r=0,unchangedNames:l}=o,u=new _P(r,l),d=o.targetId;t=new MS(d,u)}}return t}function bP(n,e){let t;if(e instanceof Bl)t={update:fE(n,e.key,e.value)};else if(e instanceof $p)t={delete:vp(n,e.key)};else if(e instanceof Hs)t={update:fE(n,e.key,e.data),updateMask:qP(e.fieldMask)};else{if(!(e instanceof mP))return Ee(16599,{dt:e.type});t={verify:vp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(l,u){const d=u.transform;if(d instanceof Zc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ol)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof kl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof jc)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Ee(20930,{transform:u.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:wP(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee(27497)})(n,e.precondition)),t}function DP(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(r,l){let u=r.updateTime?Pi(r.updateTime):Pi(l);return u.isEqual(Ce.min())&&(u=Pi(l)),new dP(u,r.transformResults||[])})(t,e)))):[]}function xP(n,e){return{documents:[VS(n,e.path)]}}function VP(n,e){const t={structuredQuery:{}},o=e.path;let r;e.collectionGroup!==null?(r=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=VS(n,r);const l=(function(m){if(m.length!==0)return LS(ri.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:qr(S.field),direction:LP(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=yp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:r}}function PP(n){let e=NP(n.parent);const t=n.structuredQuery,o=t.from?t.from.length:0;let r=null;if(o>0){Qe(o===1,65062);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=US(E);return S instanceof ri&&fS(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(V){return new Ll(Gr(V.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,pf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(E){const S=!!E.before,R=E.values||[];return new Wc(R,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const S=!E.before,R=E.values||[];return new Wc(R,S)})(t.endAt)),WV(e,r,u,l,d,"F",g,m)}function UP(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function US(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=Gr(t.unaryFilter.field);return bt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const r=Gr(t.unaryFilter.field);return bt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Gr(t.unaryFilter.field);return bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Gr(t.unaryFilter.field);return bt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return bt.create(Gr(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ri.create(t.compositeFilter.filters.map((o=>US(o))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function LP(n){return AP[n]}function OP(n){return CP[n]}function kP(n){return IP[n]}function qr(n){return{fieldPath:n.canonicalString()}}function Gr(n){return Xt.fromServerFormat(n.fieldPath)}function LS(n){return n instanceof bt?(function(t){if(t.op==="=="){if(ZT(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NAN"}};if(WT(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ZT(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NOT_NAN"}};if(WT(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qr(t.field),op:OP(t.op),value:t.value}}})(n):n instanceof ri?(function(t){const o=t.getFilters().map((r=>LS(r)));return o.length===1?o[0]:{compositeFilter:{op:kP(t.op),filters:o}}})(n):Ee(54877,{filter:n})}function qP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function OS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function kS(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t,o,r,l=Ce.min(),u=Ce.min(),d=Wt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new Fo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.yt=e}}function BP(n){const e=PP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.Sn=new HP}addToCollectionParentIndex(e,t){return this.Sn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Ko.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Ko.min())}updateCollectionGroup(e,t,o){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class HP{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t]||new Lt(st.comparator),l=!r.has(o);return this.index[t]=r.add(o),l}has(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t];return r&&r.has(o)}getEntries(e){return(this.index[e]||new Lt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qS=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(qS,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new jr(0)}static ar(){return new jr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="LruGarbageCollector",zP=1048576;function pE([n,e],[t,o]){const r=Oe(n,t);return r===0?Oe(e,o):r}class YP{constructor(e){this.Pr=e,this.buffer=new Lt(pE),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();pE(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JP{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){he(hE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){aa(t)?he(hE,"Ignoring IndexedDB error during garbage collection: ",t):await ra(t)}await this.Ar(3e5)}))}}class KP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(hf.ce);const o=new YP(t);return this.Vr.forEachTarget(e,(r=>o.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>o.Er(r))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.Vr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(dE)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dE):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let o,r,l,u,d,g,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,u=Date.now(),this.nthSequenceNumber(e,r)))).next((E=>(o=E,d=Date.now(),this.removeTargets(e,o,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,o)))).next((E=>(m=Date.now(),Or()<=Fe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${r} in `+(d-u)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${E} documents in `+(m-g)+`ms
Total Duration: ${m-v}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:E}))))}}function QP(n,e){return new KP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.changes=new Fs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?ie.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,t,o,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=r}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(o=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(o!==null&&Nl(o.mutation,r,ni.empty(),lt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,ke()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=ke()){const r=Vs();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,o).next((l=>{let u=El();return l.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const o=Vs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,ke())))}populateOverlays(e,t,o){const r=[];return o.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,o,r){let l=so();const u=wl(),d=(function(){return wl()})();return t.forEach(((g,m)=>{const v=o.get(m.key);r.has(m.key)&&(v===void 0||v.mutation instanceof Hs)?l=l.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),Nl(v.mutation,m,v.mutation.getFieldMask(),lt.now())):u.set(m.key,ni.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>d.set(m,new XP(v,u.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const o=wl();let r=new dt(((u,d)=>u-d)),l=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((g=>{const m=t.get(g);if(m===null)return;let v=o.get(g)||ni.empty();v=d.applyToLocalView(m,v),o.set(g,v);const E=(r.get(d.batchId)||ke()).add(g);r=r.insert(d.batchId,E)}))})).next((()=>{const u=[],d=r.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,v=g.value,E=TS();v.forEach((S=>{if(!l.has(S)){const R=RS(t.get(S),o.get(S));R!==null&&E.set(S,R),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return ie.waitFor(u)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,r){return ZV(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,r):this.getDocumentsMatchingCollectionQuery(e,t,o,r)}getNextDocuments(e,t,o,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,r).next((l=>{const u=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,r-l.size):ie.resolve(Vs());let d=xl,g=l;return u.next((m=>ie.forEach(m,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,g,m,ke()))).next((v=>({batchId:d,changes:vS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((o=>{let r=El();return o.isFoundDocument()&&(r=r.insert(o.key,o)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,r){const l=t.collectionGroup;let u=El();return this.indexManager.getCollectionParents(e,l).next((d=>ie.forEach(d,(g=>{const m=(function(E,S){return new la(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,o,r).next((v=>{v.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,o,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,l,r)))).next((u=>{l.forEach(((g,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,tn.newInvalidDocument(v)))}));let d=El();return u.forEach(((g,m)=>{const v=l.get(g);v!==void 0&&Nl(v.mutation,m,ni.empty(),lt.now()),yf(t,m)&&(d=d.insert(g,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ie.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Pi(r.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:BP(r.bundledQuery),readTime:Pi(r.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(){this.overlays=new dt(ve.comparator),this.Lr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Vs();return ie.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&o.set(r,l)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((r,l)=>{this.bt(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,o){const r=this.Lr.get(o);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(o)),ie.resolve()}getOverlaysForCollection(e,t,o){const r=Vs(),l=t.length+1,u=new ve(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>o&&r.set(g.getKey(),g)}return ie.resolve(r)}getOverlaysForCollectionGroup(e,t,o,r){let l=new dt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>o){let v=l.get(m.largestBatchId);v===null&&(v=Vs(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Vs(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=r)););return ie.resolve(d)}bt(e,t,o){const r=this.overlays.get(o.key);if(r!==null){const u=this.Lr.get(r.largestBatchId).delete(o.key);this.Lr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(o.key,new yP(t,o));let l=this.Lr.get(t);l===void 0&&(l=ke(),this.Lr.set(t,l)),this.Lr.set(t,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this.kr=new Lt(Gt.Kr),this.qr=new Lt(Gt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const o=new Gt(e,t);this.kr=this.kr.add(o),this.qr=this.qr.add(o)}$r(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Wr(new Gt(e,t))}Qr(e,t){e.forEach((o=>this.removeReference(o,t)))}Gr(e){const t=new ve(new st([])),o=new Gt(t,e),r=new Gt(t,e+1),l=[];return this.qr.forEachInRange([o,r],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ve(new st([])),o=new Gt(t,e),r=new Gt(t,e+1);let l=ke();return this.qr.forEachInRange([o,r],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Gt(e,0),o=this.kr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class Gt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ve.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Lt(Gt.Kr)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,r){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new gP(l,t,o,r);this.mutationQueue.push(u);for(const d of r)this.Jr=this.Jr.add(new Gt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,r=this.Xr(o),l=r<0?0:r;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Fp:this.Yn-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Gt(t,0),r=new Gt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([o,r],(u=>{const d=this.Zr(u.Hr);l.push(d)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Lt(Oe);return t.forEach((r=>{const l=new Gt(r,0),u=new Gt(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(d=>{o=o.add(d.Hr)}))})),ie.resolve(this.Yr(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,r=o.length+1;let l=o;ve.isDocumentKey(l)||(l=l.child(""));const u=new Gt(new ve(l),0);let d=new Lt(Oe);return this.Jr.forEachWhile((g=>{const m=g.key.path;return!!o.isPrefixOf(m)&&(m.length===r&&(d=d.add(g.Hr)),!0)}),u),ie.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((o=>{const r=this.Zr(o);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Qe(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Jr;return ie.forEach(t.mutations,(r=>{const l=new Gt(r.key,t.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=o}))}nr(e){}containsKey(e,t){const o=new Gt(t,0),r=this.Jr.firstAfterOrEqual(o);return ie.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.ti=e,this.docs=(function(){return new dt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,r=this.docs.get(o),l=r?r.size:0,u=this.ti(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return ie.resolve(o?o.document.mutableCopy():tn.newInvalidDocument(t))}getEntries(e,t){let o=so();return t.forEach((r=>{const l=this.docs.get(r);o=o.insert(r,l?l.document.mutableCopy():tn.newInvalidDocument(r))})),ie.resolve(o)}getDocumentsMatchingQuery(e,t,o,r){let l=so();const u=t.path,d=new ve(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:v}}=g.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||NV(wV(v),o)<=0||(r.has(v.key)||yf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,o,r){Ee(9500)}ni(e,t){return ie.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new i2(this)}getSize(e){return ie.resolve(this.size)}}class i2 extends $P{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((o,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(o)})),ie.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.persistence=e,this.ri=new Fs((t=>Yp(t)),Jp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ii=0,this.si=new jp,this.targetCount=0,this.oi=jr._r()}forEachTarget(e,t){return this.ri.forEach(((o,r)=>t(r))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.ii&&(this.ii=t),ie.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new jr(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.lr(t),ie.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,o){let r=0;const l=[];return this.ri.forEach(((u,d)=>{d.sequenceNumber<=t&&o.get(d.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),ie.waitFor(l).next((()=>r))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const o=this.ri.get(t)||null;return ie.resolve(o)}addMatchingKeys(e,t,o){return this.si.$r(t,o),ie.resolve()}removeMatchingKeys(e,t,o){this.si.Qr(t,o);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((u=>{l.push(r.markPotentiallyOrphaned(e,u))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const o=this.si.jr(t);return ie.resolve(o)}containsKey(e,t){return ie.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t){this._i={},this.overlays={},this.ai=new hf(0),this.ui=!1,this.ui=!0,this.ci=new e2,this.referenceDelegate=e(this),this.li=new o2(this),this.indexManager=new FP,this.remoteDocumentCache=(function(r){return new n2(r)})((o=>this.referenceDelegate.hi(o))),this.serializer=new GP(t),this.Pi=new ZP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this._i[e.toKey()];return o||(o=new t2(t,this.referenceDelegate),this._i[e.toKey()]=o),o}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,o){he("MemoryPersistence","Starting transaction:",e);const r=new s2(this.ai.next());return this.referenceDelegate.Ti(),o(r).next((l=>this.referenceDelegate.Ii(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ei(e,t){return ie.or(Object.values(this._i).map((o=>()=>o.containsKey(e,t))))}}class s2 extends bV{constructor(e){super(),this.currentSequenceNumber=e}}class em{constructor(e){this.persistence=e,this.Ri=new jp,this.Ai=null}static Vi(e){return new em(e)}get di(){if(this.Ai)return this.Ai;throw Ee(60996)}addReference(e,t,o){return this.Ri.addReference(o,t),this.di.delete(o.toString()),ie.resolve()}removeReference(e,t,o){return this.Ri.removeReference(o,t),this.di.add(o.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.di.add(l.toString())))})).next((()=>o.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.di,(o=>{const r=ve.fromPath(o);return this.mi(e,r).next((l=>{l||t.removeEntry(r,Ce.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((o=>{o?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class tf{constructor(e,t){this.persistence=e,this.fi=new Fs((o=>VV(o.path)),((o,r)=>o.isEqual(r))),this.garbageCollector=QP(this,t)}static Vi(e,t){return new tf(e,t)}Ti(){}Ii(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((r=>o+r))))}pr(e){let t=0;return this.mr(e,(o=>{t++})).next((()=>t))}mr(e,t){return ie.forEach(this.fi,((o,r)=>this.wr(e,o,r).next((l=>l?ie.resolve():t(r)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ni(e,(u=>this.wr(e,u,t).next((d=>{d||(o++,l.removeEntry(u,Ce.min()))})))).next((()=>l.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ie.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vc(e.data.value)),t}wr(e,t,o){return ie.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return ie.resolve(r!==void 0&&r>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,t,o,r){this.targetId=e,this.fromCache=t,this.Ts=o,this.Is=r}static Es(e,t){let o=ke(),r=ke();for(const l of t.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new tm(e,t.fromCache,o,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return QD()?8:DV(JD())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,o,r){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,r,o).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new r2;return this.ys(e,t,u).next((d=>{if(l.result=d,this.As)return this.ws(e,t,u,d.size)}))})).next((()=>l.result))}ws(e,t,o,r){return o.documentReadCount<this.Vs?(Or()<=Fe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",kr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ie.resolve()):(Or()<=Fe.DEBUG&&he("QueryEngine","Query:",kr(t),"scans",o.documentReadCount,"local documents and returns",r,"documents as results."),o.documentReadCount>this.ds*r?(Or()<=Fe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",kr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xi(t))):ie.resolve())}gs(e,t){if(nE(t))return ie.resolve(null);let o=xi(t);return this.indexManager.getIndexType(e,o).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=gp(t,null,"F"),o=xi(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const u=ke(...l);return this.fs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,o).next((g=>{const m=this.bs(t,d);return this.Ss(t,m,u,g.readTime)?this.gs(e,gp(t,null,"F")):this.Ds(e,m,t,g)}))))})))))}ps(e,t,o,r){return nE(t)||r.isEqual(Ce.min())?ie.resolve(null):this.fs.getDocuments(e,o).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,o,r)?ie.resolve(null):(Or()<=Fe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),kr(t)),this.Ds(e,u,t,RV(r,xl)).next((d=>d)))}))}bs(e,t){let o=new Lt(yS(e));return t.forEach(((r,l)=>{yf(e,l)&&(o=o.add(l))})),o}Ss(e,t,o,r){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}ys(e,t,o){return Or()<=Fe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",kr(t)),this.fs.getDocumentsMatchingQuery(e,t,Ko.min(),o)}Ds(e,t,o,r){return this.fs.getDocumentsMatchingQuery(e,o,r).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="LocalStore",l2=3e8;class u2{constructor(e,t,o,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new dt(Oe),this.Fs=new Fs((l=>Yp(l)),Jp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(o)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function c2(n,e,t,o){return new u2(n,e,t,o)}async function BS(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let r;return t.mutationQueue.getAllMutationBatches(o).next((l=>(r=l,t.Os(e),t.mutationQueue.getAllMutationBatches(o)))).next((l=>{const u=[],d=[];let g=ke();for(const m of r){u.push(m.batchId);for(const v of m.mutations)g=g.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(o,g).next((m=>({Ns:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function f2(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const r=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,g,m,v){const E=m.batch,S=E.keys();let R=ie.resolve();return S.forEach((V=>{R=R.next((()=>v.getEntry(g,V))).next((G=>{const O=m.docVersions.get(V);Qe(O!==null,48541),G.version.compareTo(O)<0&&(E.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),v.addEntry(G)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(g,E)))})(t,o,e,l).next((()=>l.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(d){let g=ke();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(o,r)))}))}function FS(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function d2(n,e){const t=Re(n),o=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const d=[];e.targetChanges.forEach(((v,E)=>{const S=r.get(E);if(!S)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,E))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(Wt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,o)),r=r.insert(E,R),(function(G,O,$){return G.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=l2?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(S,R,v)&&d.push(t.li.updateTargetData(l,R))}));let g=so(),m=ke();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(h2(l,u,e.documentUpdates).next((v=>{g=v.Bs,m=v.Ls}))),!o.isEqual(Ce.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,o)));d.push(v)}return ie.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,m))).next((()=>g))})).then((l=>(t.vs=r,l)))}function h2(n,e,t){let o=ke(),r=ke();return t.forEach((l=>o=o.add(l))),e.getEntries(n,o).next((l=>{let u=so();return t.forEach(((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(d)),g.isNoDocument()&&g.version.isEqual(Ce.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):he(nm,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)})),{Bs:u,Ls:r}}))}function p2(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=Fp),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function m2(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let r;return t.li.getTargetData(o,e).next((l=>l?(r=l,ie.resolve(r)):t.li.allocateTargetId(o).next((u=>(r=new Fo(e,u,"TargetPurposeListen",o.currentSequenceNumber),t.li.addTargetData(o,r).next((()=>r)))))))})).then((o=>{const r=t.vs.get(o.targetId);return(r===null||o.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(o.targetId,o),t.Fs.set(e,o.targetId)),o}))}async function Ep(n,e,t){const o=Re(n),r=o.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",l,(u=>o.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!aa(u))throw u;he(nm,`Failed to update sequence numbers for target ${e}: ${u}`)}o.vs=o.vs.remove(e),o.Fs.delete(r.target)}function mE(n,e,t){const o=Re(n);let r=Ce.min(),l=ke();return o.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,m,v){const E=Re(g),S=E.Fs.get(v);return S!==void 0?ie.resolve(E.vs.get(S)):E.li.getTargetData(m,v)})(o,u,xi(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,o.li.getMatchingKeysForTargetId(u,d.targetId).next((g=>{l=g}))})).next((()=>o.Cs.getDocumentsMatchingQuery(u,e,t?r:Ce.min(),t?l:ke()))).next((d=>(g2(o,tP(e),d),{documents:d,ks:l})))))}function g2(n,e,t){let o=n.Ms.get(e)||Ce.min();t.forEach(((r,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),n.Ms.set(e,o)}class gE{constructor(){this.activeTargetIds=aP()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y2{constructor(){this.vo=new gE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,o){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new gE,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="ConnectivityMonitor";class _E{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){he(yE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){he(yE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc=null;function Sp(){return Mc===null?Mc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mc++,"0x"+Mc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="RestConnection",v2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class T2{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${o}/databases/${r}`,this.$o=this.databaseId.database===$c?`project_id=${o}`:`project_id=${o}&database_id=${r}`}Wo(e,t,o,r,l){const u=Sp(),d=this.Qo(e,t.toUriEncodedString());he(qh,`Sending RPC '${e}' ${u}:`,d,o);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,r,l);const{host:m}=new URL(d),v=kp(m);return this.zo(e,d,g,o,v).then((E=>(he(qh,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw ks(qh,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",o),E}))}jo(e,t,o,r,l,u){return this.Wo(e,t,o,r,l)}Go(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+sa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),o&&o.headers.forEach(((r,l)=>e[l]=r))}Qo(e,t){const o=v2[e];let r=`${this.qo}/v1/${t}:${o}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection",_l=(n,e,t)=>{n.listen(e,(o=>{try{t(o)}catch(r){setTimeout((()=>{throw r}),0)}}))};class Kr extends T2{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Kr.c_){const e=K0();_l(e,J0.STAT_EVENT,(t=>{t.stat===up.PROXY?he(jt,"STAT_EVENT: detected buffering proxy"):t.stat===up.NOPROXY&&he(jt,"STAT_EVENT: detected no buffering proxy")})),Kr.c_=!0}}zo(e,t,o,r,l){const u=Sp();return new Promise(((d,g)=>{const m=new z0;m.setWithCredentials(!0),m.listenOnce(Y0.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case xc.NO_ERROR:const E=m.getResponseJson();he(jt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case xc.TIMEOUT:he(jt,`RPC '${e}' ${u} timed out`),g(new de(ne.DEADLINE_EXCEEDED,"Request time out"));break;case xc.HTTP_ERROR:const S=m.getStatus();if(he(jt,`RPC '${e}' ${u} failed with status:`,S,"response text:",m.getResponseText()),S>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const V=R==null?void 0:R.error;if(V&&V.status&&V.message){const G=(function($){const oe=$.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(oe)>=0?oe:ne.UNKNOWN})(V.status);g(new de(G,V.message))}else g(new de(ne.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new de(ne.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{he(jt,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(r);he(jt,`RPC '${e}' ${u} sending request:`,r),m.send(t,"POST",v,o,15)}))}T_(e,t,o){const r=Sp(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,o),d.encodeInitMessageHeaders=!0;const m=l.join("");he(jt,`Creating RPC '${e}' stream ${r}: ${m}`,d);const v=u.createWebChannel(m,d);this.I_(v);let E=!1,S=!1;const R=new E2({Ho:V=>{S?he(jt,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(E||(he(jt,`Opening RPC '${e}' stream ${r} transport.`),v.open(),E=!0),he(jt,`RPC '${e}' stream ${r} sending:`,V),v.send(V))},Jo:()=>v.close()});return _l(v,Tl.EventType.OPEN,(()=>{S||(he(jt,`RPC '${e}' stream ${r} transport opened.`),R.i_())})),_l(v,Tl.EventType.CLOSE,(()=>{S||(S=!0,he(jt,`RPC '${e}' stream ${r} transport closed`),R.o_(),this.E_(v))})),_l(v,Tl.EventType.ERROR,(V=>{S||(S=!0,ks(jt,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),R.o_(new de(ne.UNAVAILABLE,"The operation could not be completed")))})),_l(v,Tl.EventType.MESSAGE,(V=>{var G;if(!S){const O=V.data[0];Qe(!!O,16349);const $=O,oe=($==null?void 0:$.error)||((G=$[0])==null?void 0:G.error);if(oe){he(jt,`RPC '${e}' stream ${r} received error:`,oe);const Q=oe.status;let se=(function(b){const M=Mt[b];if(M!==void 0)return NS(M)})(Q),X=oe.message;Q==="NOT_FOUND"&&X.includes("database")&&X.includes("does not exist")&&X.includes(this.databaseId.database)&&ks(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),se===void 0&&(se=ne.INTERNAL,X="Unknown error status: "+Q+" with message "+oe.message),S=!0,R.o_(new de(se,X)),v.close()}else he(jt,`RPC '${e}' stream ${r} received:`,O),R.__(O)}})),Kr.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,o){super.Go(e,t,o),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Q0()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(n){return new Kr(n)}function Gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(n){return new RP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr.c_=!1;class HS{constructor(e,t,o=1e3,r=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=o,this.A_=r,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),o=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-o);r>0&&he("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="PersistentStream";class zS{constructor(e,t,o,r,l,u,d,g){this.Ci=e,this.b_=o,this.S_=r,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(oo(t.toString()),oo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,r])=>{this.D_===t&&this.G_(o,r)}),(o=>{e((()=>{const r=new de(ne.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(r)}))}))}G_(e,t){const o=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.Yo((()=>{o((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{o((()=>this.z_(r)))})),this.stream.onMessage((r=>{o((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(vE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(he(vE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class A2 extends zS{constructor(e,t,o,r,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,r,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=MP(this.serializer,e),o=(function(l){if(!("targetChange"in l))return Ce.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?Pi(u.readTime):Ce.min()})(e);return this.listener.J_(t,o)}Z_(e){const t={};t.database=Tp(this.serializer),t.addTarget=(function(l,u){let d;const g=u.target;if(d=pp(g)?{documents:xP(l,g)}:{query:VP(l,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=DS(l,u.resumeToken);const m=yp(l,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ce.min())>0){d.readTime=ef(l,u.snapshotVersion.toTimestamp());const m=yp(l,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const o=UP(this.serializer,e);o&&(t.labels=o),this.K_(t)}X_(e){const t={};t.database=Tp(this.serializer),t.removeTarget=e,this.K_(t)}}class C2 extends zS{constructor(e,t,o,r,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,r,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=DP(e.writeResults,e.commitTime),o=Pi(e.commitTime);return this.listener.na(o,t)}ra(){const e={};e.database=Tp(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>bP(this.serializer,o)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{}class R2 extends I2{constructor(e,t,o,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,o,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,_p(t,o),r,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(ne.UNKNOWN,l.toString())}))}jo(e,t,o,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.jo(e,_p(t,o),r,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(ne.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function w2(n,e,t,o){return new R2(n,e,t,o)}class N2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(oo(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="RemoteStore";class M2{constructor(e,t,o,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{o.enqueueAndForget((async()=>{zs(this)&&(he(qs,"Restarting streams for network reachability change."),await(async function(g){const m=Re(g);m.Ea.add(4),await Hl(m),m.Va.set("Unknown"),m.Ea.delete(4),await Sf(m)})(this))}))})),this.Va=new N2(o,r)}}async function Sf(n){if(zs(n))for(const e of n.Ra)await e(!0)}async function Hl(n){for(const e of n.Ra)await e(!1)}function YS(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),rm(t)?sm(t):ua(t).O_()&&om(t,e))}function im(n,e){const t=Re(n),o=ua(t);t.Ia.delete(e),o.O_()&&JS(t,e),t.Ia.size===0&&(o.O_()?o.L_():zs(t)&&t.Va.set("Unknown"))}function om(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ua(n).Z_(e)}function JS(n,e){n.da.$e(e),ua(n).X_(e)}function sm(n){n.da=new SP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ua(n).start(),n.Va.ua()}function rm(n){return zs(n)&&!ua(n).x_()&&n.Ia.size>0}function zs(n){return Re(n).Ea.size===0}function KS(n){n.da=void 0}async function b2(n){n.Va.set("Online")}async function D2(n){n.Ia.forEach(((e,t)=>{om(n,e)}))}async function x2(n,e){KS(n),rm(n)?(n.Va.ha(e),sm(n)):n.Va.set("Unknown")}async function V2(n,e,t){if(n.Va.set("Online"),e instanceof bS&&e.state===2&&e.cause)try{await(async function(r,l){const u=l.cause;for(const d of l.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,u),r.Ia.delete(d),r.da.removeTarget(d))})(n,e)}catch(o){he(qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await nf(n,o)}else if(e instanceof Lc?n.da.Xe(e):e instanceof MS?n.da.st(e):n.da.tt(e),!t.isEqual(Ce.min()))try{const o=await FS(n.localStore);t.compareTo(o)>=0&&await(function(l,u){const d=l.da.Tt(u);return d.targetChanges.forEach(((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,m)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(Wt.EMPTY_BYTE_STRING,v.snapshotVersion)),JS(l,g);const E=new Fo(v.target,g,m,v.sequenceNumber);om(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(o){he(qs,"Failed to raise snapshot:",o),await nf(n,o)}}async function nf(n,e,t){if(!aa(e))throw e;n.Ea.add(1),await Hl(n),n.Va.set("Offline"),t||(t=()=>FS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(qs,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Sf(n)}))}function QS(n,e){return e().catch((t=>nf(n,t,e)))}async function Af(n){const e=Re(n),t=Wo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fp;for(;P2(e);)try{const r=await p2(e.localStore,o);if(r===null){e.Ta.length===0&&t.L_();break}o=r.batchId,U2(e,r)}catch(r){await nf(e,r)}$S(e)&&XS(e)}function P2(n){return zs(n)&&n.Ta.length<10}function U2(n,e){n.Ta.push(e);const t=Wo(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function $S(n){return zs(n)&&!Wo(n).x_()&&n.Ta.length>0}function XS(n){Wo(n).start()}async function L2(n){Wo(n).ra()}async function O2(n){const e=Wo(n);for(const t of n.Ta)e.ea(t.mutations)}async function k2(n,e,t){const o=n.Ta.shift(),r=Xp.from(o,e,t);await QS(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Af(n)}async function q2(n,e){e&&Wo(n).Y_&&await(async function(o,r){if((function(u){return vP(u)&&u!==ne.ABORTED})(r.code)){const l=o.Ta.shift();Wo(o).B_(),await QS(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,r))),await Af(o)}})(n,e),$S(n)&&XS(n)}async function TE(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),he(qs,"RemoteStore received new credentials");const o=zs(t);t.Ea.add(3),await Hl(t),o&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Sf(t)}async function G2(n,e){const t=Re(n);e?(t.Ea.delete(2),await Sf(t)):e||(t.Ea.add(2),await Hl(t),t.Va.set("Unknown"))}function ua(n){return n.ma||(n.ma=(function(t,o,r){const l=Re(t);return l.sa(),new A2(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Zo:b2.bind(null,n),Yo:D2.bind(null,n),t_:x2.bind(null,n),J_:V2.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),rm(n)?sm(n):n.Va.set("Unknown")):(await n.ma.stop(),KS(n))}))),n.ma}function Wo(n){return n.fa||(n.fa=(function(t,o,r){const l=Re(t);return l.sa(),new C2(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:L2.bind(null,n),t_:q2.bind(null,n),ta:O2.bind(null,n),na:k2.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Af(n)):(await n.fa.stop(),n.Ta.length>0&&(he(qs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t,o,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=r,this.removalCallback=l,this.deferred=new Ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,r,l){const u=Date.now()+o,d=new am(e,t,u,r,l);return d.start(o),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lm(n,e){if(oo("AsyncQueue",`${e}: ${n}`),aa(n))return new de(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{static emptySet(e){return new Qr(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||ve.comparator(t.key,o.key):(t,o)=>ve.comparator(t.key,o.key),this.keyedMap=El(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new Qr;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.ga=new dt(ve.comparator)}track(e){const t=e.doc.key,o=this.ga.get(t);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(t,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(t):e.type===1&&o.type===2?this.ga=this.ga.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Vt:e,pa:o}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,o)=>{e.push(o)})),e}}class ea{constructor(e,t,o,r,l,u,d,g,m){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(e,t,o,r,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ea(e,t,Qr.emptySet(t),u,o,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==o[r].type||!t[r].doc.isEqual(o[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class F2{constructor(){this.queries=SE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,o){const r=Re(t),l=r.queries;r.queries=SE(),l.forEach(((u,d)=>{for(const g of d.ba)g.onError(o)}))})(this,new de(ne.ABORTED,"Firestore shutting down"))}}function SE(){return new Fs((n=>gS(n)),gf)}async function H2(n,e){const t=Re(n);let o=3;const r=e.query;let l=t.queries.get(r);l?!l.Sa()&&e.Da()&&(o=2):(l=new B2,o=e.Da()?0:1);try{switch(o){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const d=lm(u,`Initialization of query '${kr(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&um(t)}async function z2(n,e){const t=Re(n),o=e.query;let r=3;const l=t.queries.get(o);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?r=e.Da()?0:1:!l.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function Y2(n,e){const t=Re(n);let o=!1;for(const r of e){const l=r.query,u=t.queries.get(l);if(u){for(const d of u.ba)d.Fa(r)&&(o=!0);u.wa=r}}o&&um(t)}function J2(n,e,t){const o=Re(n),r=o.queries.get(e);if(r)for(const l of r.ba)l.onError(t);o.queries.delete(e)}function um(n){n.Ca.forEach((e=>{e.next()}))}var Ap,AE;(AE=Ap||(Ap={})).Ma="default",AE.Cache="cache";class K2{constructor(e,t,o){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const r of e.docChanges)r.type!==3&&o.push(r);e=new ea(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const o=t!=="Offline";return(!this.options.Ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.key=e}}class ZS{constructor(e){this.key=e}}class Q2{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ke(),this.mutatedKeys=ke(),this.eu=yS(e),this.tu=new Qr(this.eu)}get nu(){return this.Za}ru(e,t){const o=t?t.iu:new EE,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=r,d=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,E)=>{const S=r.get(v),R=yf(this.query,E)?E:null,V=!!S&&this.mutatedKeys.has(S.key),G=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let O=!1;S&&R?S.data.isEqual(R.data)?V!==G&&(o.track({type:3,doc:R}),O=!0):this.su(S,R)||(o.track({type:2,doc:R}),O=!0,(g&&this.eu(R,g)>0||m&&this.eu(R,m)<0)&&(d=!0)):!S&&R?(o.track({type:0,doc:R}),O=!0):S&&!R&&(o.track({type:1,doc:S}),O=!0,(g||m)&&(d=!0)),O&&(R?(u=u.add(R),l=G?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),o.track({type:1,doc:v})}return{tu:u,iu:o,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,E)=>(function(R,V){const G=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Vt:O})}};return G(R)-G(V)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(o),r=r??!1;const d=t&&!r?this._u():[],g=this.Ya.size===0&&this.current&&!r?1:0,m=g!==this.Xa;return this.Xa=g,u.length!==0||m?{snapshot:new ea(this.query,e.tu,l,u,e.mutatedKeys,g===0,m,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new EE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ke(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Ya=this.Ya.add(o.key))}));const t=[];return e.forEach((o=>{this.Ya.has(o)||t.push(new ZS(o))})),this.Ya.forEach((o=>{e.has(o)||t.push(new WS(o))})),t}cu(e){this.Za=e.ks,this.Ya=ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ea.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const cm="SyncEngine";class $2{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class X2{constructor(e){this.key=e,this.hu=!1}}class W2{constructor(e,t,o,r,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Fs((d=>gS(d)),gf),this.Iu=new Map,this.Eu=new Set,this.Ru=new dt(ve.comparator),this.Au=new Map,this.Vu=new jp,this.du={},this.mu=new Map,this.fu=jr.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Z2(n,e,t=!0){const o=oA(n);let r;const l=o.Tu.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await jS(o,e,t,!0),r}async function j2(n,e){const t=oA(n);await jS(t,e,!0,!1)}async function jS(n,e,t,o){const r=await m2(n.localStore,xi(e)),l=r.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return o&&(d=await eU(n,e,l,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&YS(n.remoteStore,r),d}async function eU(n,e,t,o,r){n.pu=(E,S,R)=>(async function(G,O,$,oe){let Q=O.view.ru($);Q.Ss&&(Q=await mE(G.localStore,O.query,!1).then((({documents:b})=>O.view.ru(b,Q))));const se=oe&&oe.targetChanges.get(O.targetId),X=oe&&oe.targetMismatches.get(O.targetId)!=null,fe=O.view.applyChanges(Q,G.isPrimaryClient,se,X);return IE(G,O.targetId,fe.au),fe.snapshot})(n,E,S,R);const l=await mE(n.localStore,e,!0),u=new Q2(e,l.ks),d=u.ru(l.documents),g=Fl.createSynthesizedTargetChangeForCurrentChange(t,o&&n.onlineState!=="Offline",r),m=u.applyChanges(d,n.isPrimaryClient,g);IE(n,t,m.au);const v=new $2(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function tU(n,e,t){const o=Re(n),r=o.Tu.get(e),l=o.Iu.get(r.targetId);if(l.length>1)return o.Iu.set(r.targetId,l.filter((u=>!gf(u,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(r.targetId),o.sharedClientState.isActiveQueryTarget(r.targetId)||await Ep(o.localStore,r.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(r.targetId),t&&im(o.remoteStore,r.targetId),Cp(o,r.targetId)})).catch(ra)):(Cp(o,r.targetId),await Ep(o.localStore,r.targetId,!0))}async function nU(n,e){const t=Re(n),o=t.Tu.get(e),r=t.Iu.get(o.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),im(t.remoteStore,o.targetId))}async function iU(n,e,t){const o=cU(n);try{const r=await(function(u,d){const g=Re(u),m=lt.now(),v=d.reduce(((R,V)=>R.add(V.key)),ke());let E,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let V=so(),G=ke();return g.xs.getEntries(R,v).next((O=>{V=O,V.forEach((($,oe)=>{oe.isValidDocument()||(G=G.add($))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,V))).next((O=>{E=O;const $=[];for(const oe of d){const Q=pP(oe,E.get(oe.key).overlayedDocument);Q!=null&&$.push(new Hs(oe.key,Q,lS(Q.value.mapValue),Vi.exists(!0)))}return g.mutationQueue.addMutationBatch(R,m,$,d)})).next((O=>{S=O;const $=O.applyToLocalDocumentSet(E,G);return g.documentOverlayCache.saveOverlays(R,O.batchId,$)}))})).then((()=>({batchId:S.batchId,changes:vS(E)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(r.batchId),(function(u,d,g){let m=u.du[u.currentUser.toKey()];m||(m=new dt(Oe)),m=m.insert(d,g),u.du[u.currentUser.toKey()]=m})(o,r.batchId,t),await zl(o,r.changes),await Af(o.remoteStore)}catch(r){const l=lm(r,"Failed to persist write");t.reject(l)}}async function eA(n,e){const t=Re(n);try{const o=await d2(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const u=t.Au.get(l);u&&(Qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?Qe(u.hu,14607):r.removedDocuments.size>0&&(Qe(u.hu,42227),u.hu=!1))})),await zl(t,o,e)}catch(o){await ra(o)}}function CE(n,e,t){const o=Re(n);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const r=[];o.Tu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(u,d){const g=Re(u);g.onlineState=d;let m=!1;g.queries.forEach(((v,E)=>{for(const S of E.ba)S.va(d)&&(m=!0)})),m&&um(g)})(o.eventManager,e),r.length&&o.Pu.J_(r),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function oU(n,e,t){const o=Re(n);o.sharedClientState.updateQueryState(e,"rejected",t);const r=o.Au.get(e),l=r&&r.key;if(l){let u=new dt(ve.comparator);u=u.insert(l,tn.newNoDocument(l,Ce.min()));const d=ke().add(l),g=new Tf(Ce.min(),new Map,new dt(Oe),u,d);await eA(o,g),o.Ru=o.Ru.remove(l),o.Au.delete(e),fm(o)}else await Ep(o.localStore,e,!1).then((()=>Cp(o,e,t))).catch(ra)}async function sU(n,e){const t=Re(n),o=e.batch.batchId;try{const r=await f2(t.localStore,e);nA(t,o,null),tA(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await zl(t,r)}catch(r){await ra(r)}}async function rU(n,e,t){const o=Re(n);try{const r=await(function(u,d){const g=Re(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return g.mutationQueue.lookupMutationBatch(m,d).next((E=>(Qe(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(m,E)))).next((()=>g.mutationQueue.performConsistencyCheck(m))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>g.localDocuments.getDocuments(m,v)))}))})(o.localStore,e);nA(o,e,t),tA(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await zl(o,r)}catch(r){await ra(r)}}function tA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function nA(n,e,t){const o=Re(n);let r=o.du[o.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),o.du[o.currentUser.toKey()]=r}}function Cp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const o of n.Iu.get(e))n.Tu.delete(o),t&&n.Pu.yu(o,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((o=>{n.Vu.containsKey(o)||iA(n,o)}))}function iA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(im(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),fm(n))}function IE(n,e,t){for(const o of t)o instanceof WS?(n.Vu.addReference(o.key,e),aU(n,o)):o instanceof ZS?(he(cm,"Document no longer in limbo: "+o.key),n.Vu.removeReference(o.key,e),n.Vu.containsKey(o.key)||iA(n,o.key)):Ee(19791,{wu:o})}function aU(n,e){const t=e.key,o=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(o)||(he(cm,"New document in limbo: "+t),n.Eu.add(o),fm(n))}function fm(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(st.fromString(e)),o=n.fu.next();n.Au.set(o,new X2(t)),n.Ru=n.Ru.insert(t,o),YS(n.remoteStore,new Fo(xi(Kp(t.path)),o,"TargetPurposeLimboResolution",hf.ce))}}async function zl(n,e,t){const o=Re(n),r=[],l=[],u=[];o.Tu.isEmpty()||(o.Tu.forEach(((d,g)=>{u.push(o.pu(g,e,t).then((m=>{var v;if((m||t)&&o.isPrimaryClient){const E=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;o.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(m){r.push(m);const E=tm.Es(g.targetId,m);l.push(E)}})))})),await Promise.all(u),o.Pu.J_(r),await(async function(g,m){const v=Re(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(m,(S=>ie.forEach(S.Ts,(R=>v.persistence.referenceDelegate.addReference(E,S.targetId,R))).next((()=>ie.forEach(S.Is,(R=>v.persistence.referenceDelegate.removeReference(E,S.targetId,R)))))))))}catch(E){if(!aa(E))throw E;he(nm,"Failed to update sequence numbers: "+E)}for(const E of m){const S=E.targetId;if(!E.fromCache){const R=v.vs.get(S),V=R.snapshotVersion,G=R.withLastLimboFreeSnapshotVersion(V);v.vs=v.vs.insert(S,G)}}})(o.localStore,l))}async function lU(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){he(cm,"User change. New user:",e.toKey());const o=await BS(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((d=>{d.forEach((g=>{g.reject(new de(ne.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await zl(t,o.Ns)}}function uU(n,e){const t=Re(n),o=t.Au.get(e);if(o&&o.hu)return ke().add(o.key);{let r=ke();const l=t.Iu.get(e);if(!l)return r;for(const u of l){const d=t.Tu.get(u);r=r.unionWith(d.view.nu)}return r}}function oA(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oU.bind(null,e),e.Pu.J_=Y2.bind(null,e.eventManager),e.Pu.yu=J2.bind(null,e.eventManager),e}function cU(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rU.bind(null,e),e}class of{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ef(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return c2(this.persistence,new a2,e.initialUser,this.serializer)}Cu(e){return new GS(em.Vi,this.serializer)}Du(e){return new y2}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}of.provider={build:()=>new of};class fU extends of{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof tf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new JP(o,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new GS((o=>tf.Vi(o,t)),this.serializer)}}class Ip{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>CE(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=lU.bind(null,this.syncEngine),await G2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new F2})()}createDatastore(e){const t=Ef(e.databaseInfo.databaseId),o=S2(e.databaseInfo);return w2(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,r,l,u,d){return new M2(o,r,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>CE(this.syncEngine,t,0)),(function(){return _E.v()?new _E:new _2})())}createSyncEngine(e,t){return(function(r,l,u,d,g,m,v){const E=new W2(r,l,u,d,g,m);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Re(r);he(qs,"RemoteStore shutting down."),l.Ea.add(5),await Hl(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ip.provider={build:()=>new Ip};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):oo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="FirestoreClient";class hU{constructor(e,t,o,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this._databaseInfo=r,this.user=en.UNAUTHENTICATED,this.clientId=Bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async u=>{he(Zo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(o,(u=>(he(Zo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=lm(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function Bh(n,e){n.asyncQueue.verifyOperationInProgress(),he(Zo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let o=t.initialUser;n.setCredentialChangeListener((async r=>{o.isEqual(r)||(await BS(e.localStore,r),o=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function RE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await pU(n);he(Zo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((o=>TE(e.remoteStore,o))),n.setAppCheckTokenChangeListener(((o,r)=>TE(e.remoteStore,r))),n._onlineComponents=e}async function pU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(Zo,"Using user provided OfflineComponentProvider");try{await Bh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ne.FAILED_PRECONDITION||r.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;ks("Error using user provided cache. Falling back to memory cache: "+t),await Bh(n,new of)}}else he(Zo,"Using default OfflineComponentProvider"),await Bh(n,new fU(void 0));return n._offlineComponents}async function sA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(Zo,"Using user provided OnlineComponentProvider"),await RE(n,n._uninitializedComponentsProvider._online)):(he(Zo,"Using default OnlineComponentProvider"),await RE(n,new Ip))),n._onlineComponents}function mU(n){return sA(n).then((e=>e.syncEngine))}async function wE(n){const e=await sA(n),t=e.eventManager;return t.onListen=Z2.bind(null,e.syncEngine),t.onUnlisten=tU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=j2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nU.bind(null,e.syncEngine),t}function gU(n,e,t,o){const r=new dU(o),l=new K2(e,r,t);return n.asyncQueue.enqueueAndForget((async()=>H2(await wE(n),l))),()=>{r.Nu(),n.asyncQueue.enqueueAndForget((async()=>z2(await wE(n),l)))}}function yU(n,e){const t=new Ps;return n.asyncQueue.enqueueAndForget((async()=>iU(await mU(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U="ComponentProvider",NE=new Map;function vU(n,e,t,o,r){return new LV(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,rA(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="firestore.googleapis.com",ME=!0;class bE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aA,this.ssl=ME}else this.host=e.host,this.ssl=e.ssl??ME;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zP)throw new de(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rA(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,r){return o.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cf{constructor(e,t,o,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new mV;switch(o.type){case"firstParty":return new vV(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new de(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=NE.get(t);o&&(he(_U,"Removing Datastore"),NE.delete(t),o.terminate())})(this),Promise.resolve()}}function TU(n,e,t,o={}){var m;n=Jr(n,Cf);const r=kp(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(BD(`https://${d}`),YD("Firestore",!0)),l.host!==aA&&l.host!==d&&ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:d,ssl:r,emulatorOptions:o};if(!Yc(g,u)&&(n._setSettings(g),o.mockUserToken)){let v,E;if(typeof o.mockUserToken=="string")v=o.mockUserToken,E=en.MOCK_USER;else{v=FD(o.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const S=o.mockUserToken.sub||o.mockUserToken.user_id;if(!S)throw new de(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new en(S)}n._authCredentials=new gV(new X0(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Ys(this.firestore,e,this._query)}}class Ut{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}toJSON(){return{type:Ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(Gl(t,Ut._jsonSchema))return new Ut(e,o||null,new ve(st.fromString(t.referencePath)))}}Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:Dt("string",Ut._jsonSchemaVersion),referencePath:Dt("string")};class Jo extends Ys{constructor(e,t,o){super(e,t,Kp(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new ve(e))}withConverter(e){return new Jo(this.firestore,e,this._path)}}function DE(n,e,...t){if(n=Ls(n),W0("collection","path",e),n instanceof Cf){const o=st.fromString(e,...t);return FT(o),new Jo(n,null,o)}{if(!(n instanceof Ut||n instanceof Jo))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(st.fromString(e,...t));return FT(o),new Jo(n.firestore,null,o)}}function lA(n,e,...t){if(n=Ls(n),arguments.length===1&&(e=Bp.newId()),W0("doc","path",e),n instanceof Cf){const o=st.fromString(e,...t);return BT(o),new Ut(n,null,new ve(o))}{if(!(n instanceof Ut||n instanceof Jo))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(st.fromString(e,...t));return BT(o),new Ut(n.firestore,n instanceof Jo?n.converter:null,new ve(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="AsyncQueue";class VE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HS(this,"async_queue_retry"),this._c=()=>{const o=Gh();o&&he(xE,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const t=Gh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Gh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ps;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!aa(e))throw e;he(xE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,oo("INTERNAL UNHANDLED ERROR: ",PE(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=t,t}enqueueAfterDelay(e,t,o){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=am.createAndSchedule(this,e,t,o,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Ee(47125,{Pc:PE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function PE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ql extends Cf{constructor(e,t,o,r){super(e,t,o,r),this.type="firestore",this._queue=new VE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new VE(e),this._firestoreClient=void 0,await e}}}function EU(n,e){const t=typeof n=="object"?n:tV(),o=typeof n=="string"?n:$c,r=Xx(t,"firestore").getImmediate({identifier:o});if(!r._initialized){const l=qD("firestore");l&&TU(r,...l)}return r}function uA(n){if(n._terminated)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||SU(n),n._firestoreClient}function SU(n){var o,r,l,u;const e=n._freezeSettings(),t=vU(n._databaseId,((o=n._app)==null?void 0:o.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new hU(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(g){const m=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn(Wt.fromBase64String(e))}catch(t){throw new de(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gl(e,Gn._jsonSchema))return Gn.fromBase64String(e.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:Dt("string",Gn._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ui._jsonSchemaVersion}}static fromJSON(e){if(Gl(e,Ui._jsonSchema))return new Ui(e.latitude,e.longitude)}}Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:Dt("string",Ui._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,r){if(o.length!==r.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gl(e,si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new si(e.vectorValues);throw new de(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}si._jsonSchemaVersion="firestore/vectorValue/1.0",si._jsonSchema={type:Dt("string",si._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=/^__.*__$/;class CU{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new Hs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bl(e,this.data,t,this.fieldTransforms)}}function dA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{dataSource:n})}}class dm{constructor(e,t,o,r,l,u){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=r,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new dm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePathSegment(e),o}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePath(),o}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return sf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(dA(this.dataSource)&&AU.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class IU{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||Ef(e)}createContext(e,t,o,r=!1){return new dm({dataSource:e,methodName:t,targetDoc:o,path:Xt.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hA(n){const e=n._freezeSettings(),t=Ef(n._databaseId);return new IU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RU(n,e,t,o,r,l={}){const u=n.createContext(l.merge||l.mergeFields?2:0,e,t,r);gA("Data must be an object, but it was:",u,o);const d=pA(o,u);let g,m;if(l.merge)g=new ni(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=If(e,E,t);if(!u.contains(S))throw new de(ne.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);bU(v,S)||v.push(S)}g=new ni(v),m=u.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,m=u.fieldTransforms;return new CU(new qn(d),g,m)}function wU(n,e,t,o=!1){return hm(t,n.createContext(o?4:3,e))}function hm(n,e){if(mA(n=Ls(n)))return gA("Unsupported field value:",e,n),pA(n,e);if(n instanceof fA)return(function(o,r){if(!dA(r.dataSource))throw r.createError(`${o._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(o,r){const l=[];let u=0;for(const d of o){let g=hm(d,r.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(n,e)}return(function(o,r){if((o=Ls(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return lP(r.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=lt.fromDate(o);return{timestampValue:ef(r.serializer,l)}}if(o instanceof lt){const l=new lt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:ef(r.serializer,l)}}if(o instanceof Ui)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Gn)return{bytesValue:DS(r.serializer,o._byteString)};if(o instanceof Ut){const l=r.databaseId,u=o.firestore._databaseId;if(!u.isEqual(l))throw r.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Zp(o.firestore._databaseId||r.databaseId,o._key.path)}}if(o instanceof si)return(function(u,d){const g=u instanceof si?u.toArray():u;return{mapValue:{fields:{[rS]:{stringValue:aS},[Xc]:{arrayValue:{values:g.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return Qp(d.serializer,v)}))}}}}}})(o,r);if(kS(o))return o._toProto(r.serializer);throw r.createError(`Unsupported field value: ${df(o)}`)})(n,e)}function pA(n,e){const t={};return eS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bs(n,((o,r)=>{const l=hm(r,e.childContextForField(o));l!=null&&(t[o]=l)})),{mapValue:{fields:t}}}function mA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof Ui||n instanceof Gn||n instanceof Ut||n instanceof fA||n instanceof si||kS(n))}function gA(n,e,t){if(!mA(t)||!Z0(t)){const o=df(t);throw o==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+o)}}function If(n,e,t){if((e=Ls(e))instanceof cA)return e._internalPath;if(typeof e=="string")return MU(n,e);throw sf("Field path arguments must be of type string or ",n,!1,void 0,t)}const NU=new RegExp("[~\\*/\\[\\]]");function MU(n,e,t){if(e.search(NU)>=0)throw sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cA(...e.split("."))._internalPath}catch{throw sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sf(n,e,t,o,r){const l=o&&!o.isEmpty(),u=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${o}`),u&&(g+=` in document ${r}`),g+=")"),new de(ne.INVALID_ARGUMENT,d+n+g)}function bU(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{convertValue(e,t="none"){switch(Xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return Bs(e,((r,l)=>{o[r]=this.convertValue(l,t)})),o}convertVectorValue(e){var o,r,l;const t=(l=(r=(o=e.fields)==null?void 0:o[Xc].arrayValue)==null?void 0:r.values)==null?void 0:l.map((u=>vt(u.doubleValue)));return new si(t)}convertGeoPoint(e){return new Ui(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=mf(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Vl(e));default:return null}}convertTimestamp(e){const t=Qo(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=st.fromString(e);Qe(OS(o),9688,{name:e});const r=new Pl(o.get(1),o.get(3)),l=new ve(o.popFirst(5));return r.isEqual(t)||oo(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA extends DU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}const UE="@firebase/firestore",LE="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(n){return(function(t,o){if(typeof t!="object"||t===null)return!1;const r=t;for(const l of o)if(l in r&&typeof r[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,t,o,r,l){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(If("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xU extends _A{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pm{}class vA extends pm{}function PU(n,e,...t){let o=[];e instanceof pm&&o.push(e),o=o.concat(t),(function(l){const u=l.filter((g=>g instanceof gm)).length,d=l.filter((g=>g instanceof mm)).length;if(u>1||u>0&&d>0)throw new de(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const r of o)n=r._apply(n);return n}class mm extends vA{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new mm(e,t,o)}_apply(e){const t=this._parse(e);return TA(e._query,t),new Ys(e.firestore,e.converter,mp(e._query,t))}_parse(e){const t=hA(e.firestore);return(function(l,u,d,g,m,v,E){let S;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new de(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){qE(E,v);const V=[];for(const G of E)V.push(kE(g,l,G));S={arrayValue:{values:V}}}else S=kE(g,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||qE(E,v),S=wU(d,u,E,v==="in"||v==="not-in");return bt.create(m,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class gm extends pm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gm(e,t)}_parse(e){const t=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return t.length===1?t[0]:ri.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let u=r;const d=l.getFlattenedFilters();for(const g of d)TA(u,g),u=mp(u,g)})(e._query,t),new Ys(e.firestore,e.converter,mp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ym extends vA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ym(e,t)}_apply(e){const t=(function(r,l,u){if(r.startAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ll(l,u)})(e._query,this._field,this._direction);return new Ys(e.firestore,e.converter,eP(e._query,t))}}function UU(n,e="asc"){const t=e,o=If("orderBy",n);return ym._create(o,t)}function kE(n,e,t){if(typeof(t=Ls(t))=="string"){if(t==="")throw new de(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mS(e)&&t.indexOf("/")!==-1)throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(st.fromString(t));if(!ve.isDocumentKey(o))throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return XT(n,new ve(o))}if(t instanceof Ut)return XT(n,t._key);throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${df(t)}.`)}function qE(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TA(n,e){const t=(function(r,l){for(const u of r)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function LU(n,e,t){let o;return o=n?n.toFirestore(e):e,o}class Al{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Us extends _A{constructor(e,t,o,r,l,u){super(e,t,o,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(If("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Us._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Us._jsonSchemaVersion="firestore/documentSnapshot/1.0",Us._jsonSchema={type:Dt("string",Us._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class Oc extends Us{data(e={}){return super.data(e)}}class $r{constructor(e,t,o,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Al(r.hasPendingWrites,r.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new Oc(this._firestore,this._userDataWriter,o.key,o,new Al(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((d=>{const g=new Oc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Al(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const g=new Oc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Al(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:OU(d.type),doc:g,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$r._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),o.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r._jsonSchemaVersion="firestore/querySnapshot/1.0",$r._jsonSchema={type:Dt("string",$r._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};function kU(n){return EA(Jr(n.firestore,ql),[new $p(n._key,Vi.none())])}function qU(n,e){const t=Jr(n.firestore,ql),o=lA(n),r=LU(n.converter,e),l=hA(n.firestore);return EA(t,[RU(l,"addDoc",o._key,r,n.converter!==null,{}).toMutation(o._key,Vi.exists(!1))]).then((()=>o))}function GU(n,...e){var m,v,E;n=Ls(n);let t={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||OE(e[o])||(t=e[o++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(OE(e[o])){const S=e[o];e[o]=(m=S.next)==null?void 0:m.bind(S),e[o+1]=(v=S.error)==null?void 0:v.bind(S),e[o+2]=(E=S.complete)==null?void 0:E.bind(S)}let l,u,d;if(n instanceof Ut)u=Jr(n.firestore,ql),d=Kp(n._key.path),l={next:S=>{e[o]&&e[o](BU(u,n,S))},error:e[o+1],complete:e[o+2]};else{const S=Jr(n,Ys);u=Jr(S.firestore,ql),d=S._query;const R=new yA(u);l={next:V=>{e[o]&&e[o](new $r(u,R,S,V))},error:e[o+1],complete:e[o+2]},VU(n._query)}const g=uA(u);return gU(g,d,r,l)}function EA(n,e){const t=uA(n);return yU(t,e)}function BU(n,e,t){const o=t.docs.get(e._key),r=new yA(n);return new Us(n,r,e._key,o,new Al(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){pV(eV),Kc(new bl("firestore",((o,{instanceIdentifier:r,options:l})=>{const u=o.getProvider("app").getImmediate(),d=new ql(new yV(o.getProvider("auth-internal")),new TV(u,o.getProvider("app-check-internal")),OV(u,r),u);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Yr(UE,LE,e),Yr(UE,LE,"esm2020")})();const FU={apiKey:"AIzaSyB5ULtiQgXlqTK2xk8GS68ciRonJ7kDYvI",authDomain:"seguidoresexpress-c44df.firebaseapp.com",projectId:"seguidoresexpress-c44df",storageBucket:"seguidoresexpress-c44df.firebasestorage.app",messagingSenderId:"7538143586",appId:"1:7538143586:web:3d681c7f92758a6ea5bc3b"},HU=G0(FU),Fh=EU(HU),zU=({onLogout:n})=>{const[e,t]=Qt.useState(""),[o,r]=Qt.useState(""),[l,u]=Qt.useState([]),[d,g]=Qt.useState(null),[m,v]=Qt.useState(!1),[E,S]=Qt.useState(!0),[R,V]=Qt.useState({});Qt.useEffect(()=>{const Q=PU(DE(Fh,"credentials"),UU("createdAt","desc")),se=GU(Q,X=>{const fe=[];X.forEach(b=>{fe.push({id:b.id,...b.data()})}),u(fe),S(!1)},X=>{console.error("Erro ao buscar dados do Firebase:",X),S(!1)});return G(),()=>se()},[]);const G=async()=>{v(!0);const Q=await ND();g(Q),v(!1)},O=async Q=>{Q.preventDefault();try{await qU(DE(Fh,"credentials"),{email:e,password:o,createdAt:Date.now()}),t(""),r("")}catch(se){console.error("Erro ao salvar no Firebase:",se),alert("Erro ao salvar dados.")}},$=async Q=>{if(confirm("Tem certeza que deseja remover este item permanentemente do banco de dados?"))try{await kU(lA(Fh,"credentials",Q))}catch(se){console.error("Erro ao deletar:",se)}},oe=Q=>{V(se=>({...se,[Q]:!se[Q]}))};return re.jsxs("div",{className:"flex flex-col max-h-[90vh]",children:[re.jsxs("div",{className:"bg-slate-900 p-6 flex justify-between items-center text-white sticky top-0 z-10",children:[re.jsxs("div",{children:[re.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[re.jsx("i",{className:"fa-solid fa-cloud-shield text-blue-400"}),"Cloud Vault"]}),re.jsx("p",{className:"text-xs text-slate-400",children:E?"Sincronizando...":`${l.length} contas na nuvem`})]}),re.jsx("div",{className:"flex gap-2",children:re.jsxs("button",{onClick:n,className:"bg-slate-800 hover:bg-slate-700 p-2.5 rounded-lg transition-colors flex items-center gap-2 text-sm",children:[re.jsx("i",{className:"fa-solid fa-lock"}),re.jsx("span",{children:"Bloquear"})]})})]}),re.jsxs("div",{className:"overflow-y-auto flex-1",children:[re.jsx("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:re.jsxs("form",{onSubmit:O,className:"space-y-4",children:[re.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[re.jsxs("div",{className:"relative",children:[re.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"E-mail"}),re.jsxs("div",{className:"relative",children:[re.jsx("input",{type:"email",className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all text-sm",placeholder:"exemplo@gmail.com",value:e,onChange:Q=>t(Q.target.value),required:!0}),re.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 flex justify-center",children:re.jsx(Q_,{email:e,className:"scale-75"})})]})]}),re.jsxs("div",{children:[re.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Senha"}),re.jsx("input",{type:"password",className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all text-sm",placeholder:"",value:o,onChange:Q=>r(Q.target.value),required:!0})]})]}),re.jsxs("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2.5 rounded-lg transition-all flex items-center justify-center gap-2 text-sm shadow-md hover:shadow-lg",children:[re.jsx("i",{className:"fa-solid fa-cloud-arrow-up"}),"Sincronizar no Banco"]})]})}),re.jsxs("div",{className:"p-6",children:[re.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4",children:"Dados Armazenados (Firebase)"}),E?re.jsx("div",{className:"flex justify-center py-12",children:re.jsx("i",{className:"fa-solid fa-circle-notch animate-spin text-blue-500 text-2xl"})}):l.length===0?re.jsxs("div",{className:"text-center py-12 opacity-50",children:[re.jsx("i",{className:"fa-solid fa-database text-4xl mb-3 text-gray-300"}),re.jsx("p",{className:"text-sm text-gray-500",children:"Nenhum dado no Firestore."})]}):re.jsx("div",{className:"space-y-3",children:l.map(Q=>re.jsxs("div",{className:"group bg-white border border-gray-100 rounded-xl p-4 shadow-sm hover:shadow-md transition-all flex items-center justify-between",children:[re.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[re.jsx("div",{className:"bg-gray-50 w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0 border border-gray-100",children:re.jsx(Q_,{email:Q.email})}),re.jsxs("div",{className:"flex-1 min-w-0",children:[re.jsx("p",{className:"text-sm font-semibold text-gray-800 truncate",children:Q.email}),re.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[re.jsx("p",{className:"text-xs font-mono text-gray-400",children:R[Q.id]?Q.password:""}),re.jsx("button",{onClick:()=>oe(Q.id),className:"text-gray-400 hover:text-blue-500 transition-colors",children:re.jsx("i",{className:`fa-solid ${R[Q.id]?"fa-eye-slash":"fa-eye"} text-[10px]`})})]})]})]}),re.jsx("button",{onClick:()=>$(Q.id),className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all ml-4",children:re.jsx("i",{className:"fa-solid fa-trash-can text-sm"})})]},Q.id))})]}),re.jsx("div",{className:"p-6 pt-0",children:re.jsxs("div",{className:"bg-blue-50/50 rounded-2xl p-5 border border-blue-100/50",children:[re.jsxs("div",{className:"flex items-center justify-between mb-3",children:[re.jsxs("h4",{className:"text-[10px] font-black text-blue-600/50 uppercase tracking-[0.2em] flex items-center gap-2",children:[re.jsx("i",{className:"fa-solid fa-shield-halved"}),"Dica de Segurana AI"]}),re.jsx("button",{onClick:G,disabled:m,className:"text-blue-500 hover:text-blue-700 text-[10px] font-bold uppercase",children:m?"Refinando...":"Nova Dica"})]}),d?re.jsxs("div",{children:[re.jsx("h5",{className:"font-bold text-blue-900 text-sm mb-1",children:d.title}),re.jsx("p",{className:"text-blue-800 text-xs leading-relaxed opacity-80",children:d.content})]}):re.jsxs("div",{className:"animate-pulse space-y-2",children:[re.jsx("div",{className:"h-4 bg-blue-200/50 rounded w-1/2"}),re.jsx("div",{className:"h-3 bg-blue-200/50 rounded w-full"})]})]})})]})]})},YU=()=>{const[n,e]=Qt.useState(bi.INITIAL_SETUP),[t,o]=Qt.useState(!0);Qt.useEffect(()=>{const d=localStorage.getItem("master_password");e(d?bi.MASTER_LOGIN:bi.INITIAL_SETUP),o(!1)},[]);const r=d=>{localStorage.setItem("master_password",d),e(bi.MASTER_LOGIN)},l=()=>{e(bi.EMAIL_STORAGE)},u=()=>{e(bi.MASTER_LOGIN)};return t?re.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:re.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):re.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:[re.jsxs("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-2xl overflow-hidden transition-all duration-500",children:[n===bi.INITIAL_SETUP&&re.jsx(fI,{onComplete:r}),n===bi.MASTER_LOGIN&&re.jsx(dI,{onSuccess:l}),n===bi.EMAIL_STORAGE&&re.jsx(zU,{onLogout:u})]}),re.jsx("div",{className:"mt-8 text-center text-sm text-gray-400",children:re.jsx("p",{children:" 2024 SecureVault - Armazenamento de Credenciais Criptografado Localmente."})})]})},SA=document.getElementById("root");if(!SA)throw new Error("Could not find root element to mount to");const JU=cI.createRoot(SA);JU.render(re.jsx(nI.StrictMode,{children:re.jsx(YU,{})}));
